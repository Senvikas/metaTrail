(function(root,factory){root.STJRV2=factory(root,root.document)})(typeof global!=="undefined"?global:typeof window!=="undefined"?window:this,function(window,document){"use strict";if(window.STJRV2)return window.STJRV2;var self={},scriptUrl=(function(){if(document.currentScript)
return document.currentScript.src;var ls,s,getSrc=function(ls,attr){var i,l=ls.length,nf,s;for(i=0;i<l;i++){s=null;if(ls[i].getAttribute.length!==undefined)s=ls[i].getAttribute(attr,2);if(!s)continue;nf=s;nf=nf.split("?")[0].split("/").pop();if(nf.match(/widget(\.min)?(\.[0-9]+)?\.js/))return s}};ls=document.getElementsByTagName("script");s=getSrc(ls,"src");if(!s){ls=document.getElementsByTagName("meta");s=getSrc(ls,"content")}
if(s)return s;return""})(),domain=scriptUrl.match(/^(https?:)?\/\/(staging\.|beta\.|dev\.|qa\.)?(www\.|biz\.)?sitejabber\.com/)?scriptUrl.split("/")[2].replace("biz.",""):"www.sitejabber.com";if(domain=="sitejabber.com")domain="www.sitejabber.com";var base="https://"+domain,prodBase='https://www.sitejabber.com',CDNBase='https://static.sitejabber.com',isAbsolute=base.indexOf("//www")>=0;var _loadingStyleSheet=!1,_hasLoadedStyleSheet=!1,WIDGET_NUMBER=0,cookieSent={},sj_responses={},sj_config={};self.isAbsolute=function(){return isAbsolute};self.getBase=function(){return base};self.getCDNBase=function(){return CDNBase};self.subBaseToCDN=function(str=base){return str===prodBase?CDNBase:str};self._getQueryString=function(key,val){var k,tmp=[];if(val===!0)val="1";else if(val===!1)val="0";if(val!==null){if(typeof val==="object"){for(k in val)if(val[k]!==null)tmp.push(self._getQueryString(key+"["+k+"]",val[k]));return tmp.join("")}else if(typeof val!=="function"&&typeof val!=="undefined")return encodeURIComponent(key)+"="+encodeURIComponent(val)+"&";else return""}else return""};(self.getQueryString=function(productData,index){var ret="",key;for(key in productData)ret+=self._getQueryString(key+(typeof index=="number"?"["+index+"]":""),productData[key]);return ret}),(self.getConfig=function(){return sj_config});self.getNextWidgetNumber=function(){return++WIDGET_NUMBER};self.getResponse=function(key){return sj_responses[key]};self.setConfig=function(cfg){if(typeof cfg!=="object"||cfg===null)return!1;sj_config=cfg;return!0};self.setResponse=function(key,response){sj_responses[key]=response;return this};self.jsonP=function(url,widgetNumber,callback,errorCallback){var script=document.createElement("script"),head=document.getElementsByTagName("head")[0];script.type="text/javascript";var srcUrl=url;try{srcUrl=new URL(srcUrl);srcUrl.searchParams.append("widget_version",2);srcUrl.searchParams.append("cache_version",'');srcUrl.searchParams.append("referrer_url",window.location.href)}catch(error){self.ErrorHandler(error)}
script.src=srcUrl;head.insertBefore(script,head.firstChild);if(errorCallback)
script.addEventListener("error",(res)=>{console.log(res);errorCallback()});if(callback)callback(script);return script};self.getParameterByName=function(urlParam,name){var url=!urlParam?urlParam:scriptUrl;name=name.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regex=new RegExp("[\\?&]"+name+"=([^&#]*)"),results=regex.exec(url);return results===null?"":decodeURIComponent(results[1].replace(/\+/g," "))};self.hasLoadedStyleSheet=function(){return _hasLoadedStyleSheet};self.getAttrObj=function(el){var options={},data,key;if(el){data=el.dataset;for(key in data)
options[key.split(/(?=[A-Z])/).join("_").toLowerCase()]=data[key]}
return options};self.isEventTrusted=function(event){let check=!0;if(!self.isMobileBrowser()&&event.isTrusted!==undefined)check=event.isTrusted;return check};self.isMobileBrowser=function(event){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(window.navigator.userAgent)};self.partInViewport=function(el){let x=el.getBoundingClientRect().left,y=el.getBoundingClientRect().top,ww=Math.max(document.documentElement.clientWidth,window.innerWidth||0),hw=Math.max(document.documentElement.clientHeight,window.innerHeight||0),w=el.clientWidth,h=el.clientHeight;return y<hw&&y+h>0&&x<ww&&x+w>0};self.markVoted=function(elsArr=[]){elsArr.forEach(function(el){var elm=el;var reviewId=elm.getAttribute("data-review");if(!reviewId){review=elm.getAttribute("data-review")}
var cookieName="helpfulvote-"+reviewId;var cookieValue=self.readCookie(cookieName);if(!cookieValue){cookieValue=self.readCookie(reviewId)}
if(!cookieValue){cookieValue=self.readCookie(elm.getAttribute("id"))}
if(RegExp("^(("+reviewId+")\\|(\\w+)\\|(\\d+)\\|(\\d+)\\|(\\d+))$").test(cookieValue)){var valueArr=cookieValue.split("|");el.dataset.vote_id=valueArr[2];if(valueArr[1]=="pos"||valueArr[1]=="neg"){elm.querySelector(".isHelpful").innerHTML=self.__("Thanks for your feedback!");elm.classList.add("active");if(valueArr[1]=="pos"){elm.querySelector(".js-helpful-button").classList.add("active")}else if(valueArr[1]=="neg"){elm.querySelector(".js-helpful-no-button").classList.add("active")}
var posVoteCounter=elm.querySelector(".js-pos-vote-count");var negVoteCounter=elm.querySelector(".js-neg-vote-count");posVoteCounter.innerText=valueArr[3];negVoteCounter.innerText=valueArr[4]}}})};self.__=function(string){let translations=window.STJR_TRANSLATIONS||{};try{Array.from(document.querySelectorAll(".js-stjr-additional-translations:not(.stjr-init)")).forEach((el)=>{el.classList.add("stjr-init");const translation=JSON.parse(el.innerText);translations={...translation,...translation}})}catch(error){console.log("Error parsing json translations");console.log(error)}
window.STJR_TRANSLATIONS=translations;return translations[string]||string};(self.createVoteCookies=function(name,reviewId,voteId,voteType,posVotes,negVotes,votedValue=1){var voteTypeAfter=parseInt(votedValue)!==0?voteType:"none";self.createCookie(name,reviewId+"|"+voteTypeAfter+"|"+voteId+"|"+posVotes+"|"+negVotes,30);self.setCookie(name.replace("-","."),reviewId+"|"+voteTypeAfter+"|"+voteId+"|"+posVotes+"|"+negVotes,30)}),(self.loadScript=function(url,callback){var tempBase=base,scriptElement=document.createElement("script"),r=!1;if(/dev\.biz\.sitejabber\.com/.test(location.origin)&&/\.js/.test(url))tempBase=location.origin;scriptElement.src=(self.isAbsolute()?CDNBase:tempBase)+url;scriptElement.type="text/javascript";scriptElement.crossOrigin="anonymous";scriptElement.onload=scriptElement.onreadystatechange=function(){if(!r&&(!this.readyState||this.readyState=="complete")){r=!0;if(callback)callback();}};document.getElementsByTagName("script")[0].appendChild(scriptElement)});self.loadStyleSheet=function(url){var linkElement=document.createElement("link");linkElement.href=url;linkElement.rel="stylesheet";linkElement.type="text/css";linkElement.crossOrigin="anonymous";document.getElementsByTagName("head")[0].appendChild(linkElement)};self.loadStyleSheets=function(url){if(!_loadingStyleSheet){_loadingStyleSheet=!0;var selectedWidgets="";if(/\?widgets=/.test(selectedWidgets)){self.loadStyleSheet(self.getBase()+"/css/v2/widget-styles.css"+selectedWidgets)}else{self.loadStyleSheet(url+"widget"+(self.isAbsolute()?".min.1637847212":"")+".css")}
var timer=setInterval(function(){if(!0){clearInterval(timer);timer=null;_hasLoadedStyleSheet=!0}},50)}};self.render=function(){if(!self.hasLoadedStyleSheet()||!sj_responses["response"+this._widgetNumber]){window.setTimeout(self.render.bind(this),500);return this}
if(sj_responses["response"+this._widgetNumber].loaded)return;var u=document.getElementById("stjr-widget"+this._widgetNumber);var t=document.querySelector("#"+this.id);if(t==null||u==null)return;sj_responses["response"+this._widgetNumber].loaded=!0;u.innerHTML=sj_responses["response"+this._widgetNumber].html;this.render();return this};self.renderNoProductsMessage=function(classSelector,_widgetNumber){var u=document.querySelector(classSelector);u.innerHTML=`<p class="stjr-util-para--empty">${self.__("Preview will appear once products are added.")}</p>`};self.setCookie=function(name,channel,days){if(!cookieSent[name]){var url=base+"/save-cookie?n="+name+"&v="+channel+"&e="+days+"&rnd="+Math.random(),xmlHttp=new XMLHttpRequest();xmlHttp.open("GET",url,!0);xmlHttp.withCredentials=!0;xmlHttp.send(null);cookieSent[name]=!0}};self.createCookie=function(name,value,days,domain){var dom=domain?"; domain="+domain:"",expires="";if(days){var date=new Date();date.setTime(date.getTime()+days*24*60*60*1000);expires="; expires="+date.toGMTString()}
document.cookie=name+"="+value+expires+dom+"; path=/"};self.readCookie=function(name){var nameEQ=name+"=",ca=document.cookie.split(";"),c,i;for(i=0;i<ca.length;i++){c=ca[i];while(c.charAt(0)==" ")c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length);}
return null};self.makeMiniSlider=function(sliderContainer,prevBtn,nextBtn,callback=null){var currentPageIndex,pagesNeeded,carouselDirectionReverse=!1,currentPageOrder=1,backUp=sliderContainer.cloneNode(!0),children=backUp.children,minReviewWidth,reviewPageWidth,sliderContainerParent=null;resize();prevBtn.addEventListener("click",navLeft);nextBtn.addEventListener("click",navRight);function navLeft(){if(pagesNeeded===0||pagesNeeded===1)return;carouselDirectionReverse=!0;sliderContainer.classList.add("stjr-util-slider-container-transition");sliderContainer.style.left="100%";sliderContainerParent.style.justifyContent="flex-end"}
function navRight(){if(pagesNeeded===0||pagesNeeded===1)return;carouselDirectionReverse=!1;sliderContainer.classList.add("stjr-util-slider-container-transition");sliderContainer.style.left="-100%";sliderContainerParent.style.justifyContent="flex-start"}
function changeSlide(){var allEls=[];if(carouselDirectionReverse){allEls=Array.from(sliderContainer.querySelectorAll("[data-position]"));if(currentPageOrder==1)currentPageOrder=pagesNeeded;else currentPageOrder--}else{allEls=Array.from(sliderContainer.querySelectorAll("[data-position]"));if(currentPageOrder==pagesNeeded)currentPageOrder=1;else currentPageOrder++}
let order=1;if(carouselDirectionReverse){for(let i=currentPageOrder;i<=pagesNeeded&&i>0;i++){allEls[i-1].style.order=order;order++}
for(let i=1;i<currentPageOrder&&i>0;i++){allEls[i-1].style.order=order;order++}}
if(!carouselDirectionReverse){for(let i=currentPageOrder;i<=pagesNeeded;i++){sliderContainer.querySelector("[data-position='"+i+"']").style.order=order;order++}
for(let i=1;i<currentPageOrder;i++){sliderContainer.querySelector("[data-position='"+i+"']").style.order=order;order++}}
sliderContainer.classList.remove("stjr-util-slider-container-transition");sliderContainer.style.left="0";sliderContainer.style.justifyContent="flex-start"}
function resize(){window.removeEventListener("resize",resize);sliderContainerParent=sliderContainer.parentElement;sliderContainerParent.style.display="flex";sliderContainerParent.style.justifyContent="flex-start";var sliderContainerParentWrapper=sliderContainerParent.parentElement;var parentWidth=sliderContainerParent.offsetWidth>0?sliderContainerParent.offsetWidth:document.body.offsetWidth;var minReviewWidth=sliderContainer.children[0].offsetWidth>0?sliderContainer.children[0].offsetWidth:120;currentPageIndex=0;sliderContainer.style.left="0%";var srcReviews=children;reviewPageWidth=sliderContainer.offsetWidth>0?sliderContainer.offsetWidth:document.body.offsetWidth;console.log('reviewPageWidth',reviewPageWidth)
if(reviewPageWidth<minReviewWidth)minReviewWidth=reviewPageWidth;var reviewsPerPage=parseInt(parentWidth/minReviewWidth);pagesNeeded=Math.ceil(srcReviews.length/reviewsPerPage);if(pagesNeeded===0||pagesNeeded===1){prevBtn.style.display="none";nextBtn.style.display="none"}else{prevBtn.style.display="flex";nextBtn.style.display="flex"}
parentWidth=sliderContainerParent.offsetWidth>0?sliderContainerParent.offsetWidth:document.body.offsetWidth;currentPageIndex=0;var pagesHtml="";var reviewIndex=0;sliderContainer.innerHTML="";console.log('reviewsPerPage',reviewsPerPage)
for(var pageIndex=0;pageIndex<pagesNeeded;pageIndex++){pagesHtml+=`<div class="stjr-util-slider__item-wrapper" data-position="${pageIndex + 1}" style="width:${parentWidth}px;order:${pageIndex + 1}; ${children.length < reviewsPerPage && pageIndex == 0 ? "justify-content:start;" : ""}">`;var reviewCount=0;var duplicateCount=0;while(reviewCount<reviewsPerPage){if(children[reviewIndex]){pagesHtml+=children[reviewIndex].outerHTML}else if(pageIndex>0){if(children[duplicateCount])pagesHtml+=children[duplicateCount].outerHTML;else{duplicateCount=0;pagesHtml+=children[duplicateCount].outerHTML}
duplicateCount++}
reviewCount++;reviewIndex++}
pagesHtml+=`</div>`}
sliderContainer.innerHTML=pagesHtml;var maxHeight=-1;sliderContainer.style.minHeight="800px";sliderContainer.style.position="relative";sliderContainer.style.display="flex";for(var el of sliderContainer.children)maxHeight=maxHeight>el.offsetHeight?maxHeight:el.offsetHeight;sliderContainer.dataset.initHeight=maxHeight+0;sliderContainer.style.minHeight=(maxHeight>0?maxHeight:100)+0+"px";sliderContainer.addEventListener("transitionend",()=>{changeSlide()});window.addEventListener("resize",resize);sliderContainerParentWrapper.style.opacity=1;if(callback)callback();}};self.maxZIndex=function(){return[...document.querySelectorAll("body *")].map((elt)=>parseFloat(getComputedStyle(elt).zIndex)).reduce((z,highest=Number.MIN_SAFE_INTEGER)=>(isNaN(z)||z<highest?highest:z))};self.ErrorHandler=function(res){if(typeof res==="object"&&res.status&&res.status=="error"){var resDataArr=[];for(var itemName in res){if(itemName!=="code"&&itemName!=="message"&&itemName!=="status"){resDataArr.push(JSON.stringify(res[itemName]))}}
console.log(`%cSitejabber widgets | ${res.code} | ${res.message ? res.message : "Error"} ${resDataArr.length > 0 ? "| " + resDataArr.join(" | ") : ""}`,"color:#ef6a23")}else{console.log(`%cSitejabber widgets | ${res}`,"color:#ef6a23")}
var evnt=new Event("STJRV2.ErrorHandler");document.querySelector("body").dispatchEvent(evnt)};self.consolidateOnPageProductMicroData=function(){var schemaJsonStructure=document.querySelector("#stjr-product-schema-json");if(!schemaJsonStructure){return}
var onPageProductSchema=document.querySelector('[itemtype$="schema.org/Product"]');var schemaJsonData=null;var schemaJsonStr=schemaJsonStructure.innerText.replace(/(\r\n|\n|\r|\t)/gm," ");try{schemaJsonData=JSON.parse(schemaJsonStr)}catch(e){console.log("Error parsing json schema")}
var itemTypes={author:"https://schema.org/Person",aggregateRating:"https://schema.org/AggregateRating",offers:"https://schema.org/Offer",review:"https://schema.org/Review",reviewRating:"https://schema.org/Rating",};if(!schemaJsonStructure||!onPageProductSchema||!schemaJsonData){return}
function updateMicroDataProperty(propertyObject,parentPropEl=null){for(var key in propertyObject){var propertyName=key;var property=propertyObject[propertyName];var microDataField=null;var similarMicroDataFields=parentPropEl.querySelectorAll(`[itemprop="${propertyName}"]`);if(similarMicroDataFields.length>0){Array.from(similarMicroDataFields).forEach((el,i)=>{if(el.parentElement.closest("[itemscope]")==parentPropEl){microDataField=el}})}
if(propertyName.indexOf("@")!==0){if(typeof property=="object"){if(!Array.isArray(property)){if(!microDataField){if(parentPropEl){parentPropEl.insertAdjacentHTML("beforeend",`<div style="display:hidden;" itemprop="${propertyName}" itemscope itemtype="${itemTypes[propertyName] ? itemTypes[propertyName] : "https://schema.org/" + propertyName}"></div>`)}else{parentPropEl.insertAdjacentHTML("beforeend",`<div itemprop="${propertyName}"></div>`)}}else{}}
if(Array.isArray(property)){if(parentPropEl){Array.from(property).forEach(function(val){parentPropEl.insertAdjacentHTML("beforeend",`<meta itemprop="${propertyName}" content="${self.htmlEntities(val)}"/>`)})}}else{updateMicroDataProperty(property,document.querySelector(`[itemprop="${propertyName}"]`))}}
if(typeof property=="string"){if(parentPropEl){if(microDataField){microDataField.setAttribute("content",property)}else{parentPropEl.insertAdjacentHTML("beforeend",`<meta itemprop="${propertyName}" content="${self.htmlEntities(property)}"/>`)}}}}}}
updateMicroDataProperty(schemaJsonData,onPageProductSchema);var ItemConditionMeta=onPageProductSchema.querySelector('[itemtype="http://schema.org/OfferItemCondition"]');if(ItemConditionMeta&&ItemConditionMeta.content&&!/DamagedCondition|NewCondition|RefurbishedCondition|UsedCondition/.test(ItemConditionMeta.content)){ItemConditionMeta.content="NewCondition"}
schemaJsonStructure.remove()};self.consolidateOnPageJsonSchema=function(){var schemaJsonStructure=document.querySelector("#stjr-product-schema-json");if(!schemaJsonStructure){return}
var onPageProductSchemas=document.querySelectorAll('script:not(#stjr-product-schema-json)[type="application/ld+json"]');var schemaJsonData=null;var isConsolidated=!1;var schemaJsonStr=schemaJsonStructure.innerText.replace(/(\r\n|\n|\r|\t)/gm," ");try{schemaJsonData=JSON.parse(schemaJsonStr)}catch(e){console.log("Error parsing json schema")}
if(!schemaJsonData){return}
Array.from(onPageProductSchemas).forEach((el)=>{updateJsonSchema(el,schemaJsonData)});function updateJsonSchema(schemaEl,schemaJsonData){var el=schemaEl;var jsonData=null;var jsonStr=el.innerText.replace(/(\r\n|\n|\r|\t)/gm," ");var productProperty=null;try{jsonData=JSON.parse(jsonStr)}catch(e){console.log("Error parsing json schema")}
if(jsonData&&jsonData["@context"]&&/schema\.org$|schema\.org\/$/.test(jsonData["@context"])&&jsonData["@graph"]&&Array.isArray(jsonData["@graph"])){Array.from(jsonData["@graph"]).forEach((graph,idx)=>{if(graph&&graph["@type"]&&graph["@type"]=="Product"){if(!productProperty){productProperty=graph}else{jsonData["@graph"][idx]=null}}});jsonData["@graph"]=jsonData["@graph"].filter((graph)=>!!graph)}
if(jsonData&&jsonData["@context"]&&/schema\.org$|schema\.org\/$/.test(jsonData["@context"])&&jsonData["@type"]&&jsonData["@type"]=="Product"){productProperty=jsonData}
if(productProperty){if(schemaJsonData.review){productProperty.review=schemaJsonData.review}
if(schemaJsonData.aggregateRating){productProperty.aggregateRating=schemaJsonData.aggregateRating}
if(schemaJsonData.description){productProperty.description=schemaJsonData.description}
if(productProperty&&productProperty.offers&&productProperty.offers.itemCondition){productProperty.offers.itemCondition="NewCondition"}
el.innerText=JSON.stringify(jsonData);isConsolidated=!0}}
if(isConsolidated){schemaJsonStructure.remove()}};self.consolidateOnPageOrganizationJsonSchema=function(){var schemaJsonStructure=document.querySelector("#stjr-organization-schema-json");if(!schemaJsonStructure){return}
var onPageOrgSchemas=document.querySelectorAll('script:not(#stjr-organization-schema-json)[type="application/ld+json"]');var schemaJsonData=null;var isConsolidated=!1;var schemaJsonStr=schemaJsonStructure.innerText.replace(/(\r\n|\n|\r|\t)/gm," ");try{schemaJsonData=JSON.parse(schemaJsonStr)}catch(e){console.log("Error parsing json schema")}
if(!schemaJsonData){return}
Array.from(onPageOrgSchemas).forEach((el)=>{updateJsonSchema(el,schemaJsonData)});function updateJsonSchema(schemaEl,schemaJsonData){var el=schemaEl;var jsonData=null;var jsonStr=el.innerText.replace(/(\r\n|\n|\r|\t)/gm," ");var organizationProperty=null;try{jsonData=JSON.parse(jsonStr)}catch(e){console.log("Error parsing json schema")}
if(jsonData&&jsonData["@context"]&&/schema\.org$|schema\.org\/$/.test(jsonData["@context"])&&jsonData["@graph"]&&Array.isArray(jsonData["@graph"])){Array.from(jsonData["@graph"]).forEach((graph,idx)=>{if(graph&&graph["@type"]&&graph["@type"]=="Organization"){if(!organizationProperty){organizationProperty=graph}else{jsonData["@graph"][idx]=null}}});jsonData["@graph"]=jsonData["@graph"].filter((graph)=>!!graph)}
if(jsonData&&jsonData["@context"]&&/schema\.org$|schema\.org\/$/.test(jsonData["@context"])&&jsonData["@type"]&&jsonData["@type"]=="Organization"){organizationProperty=jsonData}
if(organizationProperty){if(schemaJsonData.review){organizationProperty.review=schemaJsonData.review}
if(schemaJsonData.aggregateRating){organizationProperty.aggregateRating=schemaJsonData.aggregateRating}
el.innerText=JSON.stringify(jsonData);isConsolidated=!0}}
if(isConsolidated){schemaJsonStructure.remove()}};self.htmlEntities=function(str){return String(str).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};self.widgetViewRegister=function(displayUrl="fragrancex.com",widgetName="instant_feedback",queryParams={}){var url=self.getBase()+"/widget-view-register/"+displayUrl+"/"+widgetName;var params=queryParams;params.page_url=window.location.href;var viewMatrix=null;var displayConfirmed=0;if(widgetName=="instant_feedback"){var tempEl=document.querySelector(".stjr-review-checkout-widget");if(tempEl){viewMatrix=tempEl.getBoundingClientRect();displayConfirmed=viewMatrix.width&&viewMatrix.height?!0:!1}}
params.view_matrix=viewMatrix?JSON.stringify(viewMatrix):null;params.display_confirmed=displayConfirmed;var query=self.getQueryString(Object.assign({},params),null);self.jsonP(url+"?"+query)};if(!self.hasLoadedStyleSheet())self.loadStyleSheets((self.isAbsolute()?CDNBase:base)+"/css/");return self});STJRV2.ReviewsWidget=(function(){return this})();if(window.STJR){STJR.setConfig=function(args){STJRV2.setConfig(args)}}else{window.STJR={};STJR.setConfig=function(args){STJRV2.setConfig(args)}}
if((window?.Shopify?.Checkout?.step=='thank_you'||/thank_you/.test(location.href)||window?.Shopify?.Checkout?.isOrderStatusPage)&&!document.querySelector(".stjr-instant-feedback")){STJRV2.widgetViewRegister("fragrancex.com","no_instant_feedback")}
var event=new Event("STJRV2.loaded");document.querySelector("body").dispatchEvent(event);(function(root,factory){root.SJTRUtils=factory(root,root.document)})(typeof global!=='undefined'?global:typeof window!=='undefined'?window:this,(function(window,document){'use strict';if(window.SJTRUtils)
return window.SJTRUtils;var gActiveAnimation;var gCallbackHalf;var self={};Math.easeInOutCubic=function(t,b,c,d){if((t/=d/2)<1)
return c/2*t*t*t+b;return c/2*((t-=2)*t*t+2)+b};self.stop=function(){gActiveAnimation=!1};self.scrollTo=function(params){var element=typeof params.element!=='undefined'?params.element:window;var to=params.to;var duration=typeof params.duration!=='undefined'?params.duration:1000;var callback=typeof params.callback!=='undefined'?params.callback:null;var easing=typeof params.easing!=='undefined'?params.easing:Math.easeInOutCubic;var start=typeof params.start!=='undefined'?params.start:(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0);var change=to-start;var currentTime=0;var increment=16;gActiveAnimation=!0;gCallbackHalf=!1;var animateScroll=function(){if(gActiveAnimation){currentTime+=increment;element.scrollTo(0,easing(currentTime,start,change,duration));if(currentTime<duration){if(currentTime<(duration/2)&&callback)
if(!gCallbackHalf){gCallbackHalf=!0;callback(!0)}
setTimeout(animateScroll,increment)}else if(callback)
callback(!1);}else if(currentTime<duration&&callback)
callback(!1);};animateScroll()};self.scrollToElement=function(element,callback,_height){if(element.offsetHeight==0)return;var mh=Math.max(document.documentElement.clientHeight,window.innerHeight||0);var h=0;if(_height)
h=_height;var offsetTop=0;element.style.scrollBehavior='smooth';element.scrollTo(0,0);while(element){offsetTop+=element.offsetTop;element=element.offsetParent}
self.scrollTo({to:offsetTop+h,callback:callback})};self.convertToPlainText=function(html){var tempDivEl=document.createElement("div");tempDivEl.innerHTML=html;return tempDivEl.textContent||tempDivEl.innerText||""}
self.getParam=function(name,url=window.location.href){name=name.replace(/[\[\]]/g,'\\$&');var regex=new RegExp('[?&]'+name+'(=([^&#]*)|&|#|$)'),results=regex.exec(url);if(!results)return null;if(!results[2])return'';return decodeURIComponent(results[2].replace(/\+/g,' '))}
return self}));STJRV2.Tracking=(function(){var done=!1;return{trackConversionOrder:function(){function extractDomain(url){var domain;if(url.indexOf("://")>-1)domain=url.split("/")[2];else domain=url.split("/")[0];domain=domain.split(":")[0];return domain}
var SjFbPixelId=STJRV2.getParameterByName(window.location,"SjFbPixelId");if(SjFbPixelId)STJRV2.createCookie("SjFbPixelId",SjFbPixelId,30);if((typeof sitejabberTrackConversionData==="undefined"&&(typeof Shopify==="undefined"||typeof Shopify.checkout==="undefined"))||done)return;var appKey,orderId,params=null,currency="",total="";if(typeof Shopify!=="undefined"){appKey=STJRV2.getParameterByName(null,"app_key");orderId=Shopify.checkout.order_id;currency=Shopify.checkout.currency;total=Shopify.checkout.total_price}else if(typeof sitejabberTrackConversionData!=="undefined"){appKey=sitejabberTrackConversionData.appKey;orderId=sitejabberTrackConversionData.orderId;currency=sitejabberTrackConversionData.currency?sitejabberTrackConversionData.currency:"";total=sitejabberTrackConversionData.total?sitejabberTrackConversionData.total:"";params="";params+="currency="+currency+"&";params+="subtotal="+(sitejabberTrackConversionData.subtotal?sitejabberTrackConversionData.subtotal:"")+"&";params+="taxes="+(sitejabberTrackConversionData.taxes?sitejabberTrackConversionData.taxes:"")+"&";params+="total="+total+"&";params=params.substring(0,params.length-1)}
if(appKey&&orderId){var domain=window.location.hostname.match(/biz\.sitejabber\.com/)?window.location.hostname:scriptUrl.match(/biz\.sitejabber\.com/)?extractDomain(scriptUrl):"biz.sitejabber.com",base="https://"+domain,url=base+"/save-store-sale/"+appKey+"/"+orderId+"/"+Math.ceil(Math.random()*1000000),xmlHttp=new XMLHttpRequest();xmlHttp.open("POST",url,!0);xmlHttp.withCredentials=!0;xmlHttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");xmlHttp.send(params);SjFbPixelId=STJRV2.readCookie("SjFbPixelId");if(SjFbPixelId){var oImg=document.createElement("img");oImg.setAttribute("src","https://www.facebook.com/tr?id="+SjFbPixelId+"&ev=Purchase&cd[value]="+total+"&cd[currency]="+currency+"&noscript=1");oImg.setAttribute("height","1");oImg.setAttribute("width","1");oImg.setAttribute("style","display:none");document.body.appendChild(oImg)}
done=!0}},}})();if(typeof STJR!=="undefined"){if(typeof STJRV2.Tracking=="function"){new STJRV2.Tracking().trackConversionOrder()}
if(typeof STJRV2.Tracking=="object"){STJRV2.Tracking.trackConversionOrder()}}
STJRV2.ReviewWindowWidget=(function(){var that,widgetInitClassName="stjr-review-window",widgetName="ReviewWindowWidget",widgetInitRoutePath="widget-review-window",options={},query="",id=widgetName,timer,widgetNumber,additionalOptions,widgetClassSelector=null,isPreviewMode=!1,star=0,isAbsolute=null;that=this;var init=function(opts){widgetNumber=STJRV2.getNextWidgetNumber();var url=`${STJRV2.subBaseToCDN()}/${widgetInitRoutePath}/fragrancex.com/${widgetNumber}`;var otherOptions=STJRV2.getConfig();id="stjr-widget"+widgetNumber;options=Object.assign({},otherOptions,opts);isPreviewMode=typeof options.test!="undefined"?options.test:!1;widgetClassSelector="."+widgetName;query=STJRV2.getQueryString(Object.assign({},options),null);var initErrorCallback=null;STJRV2.ReviewsWidget["receiveCallback_"+widgetNumber]=function(resp){STJRV2.setResponse("response"+resp.callback,resp)};STJRV2.setResponse("response"+widgetNumber,null);STJRV2.jsonP(url+"?"+query,widgetNumber,function(script){render(widgetNumber)},initErrorCallback);var backDrop=document.getElementById("reviewWindowWidgetBackDropInner");var bodyContainer=document.getElementsByTagName("body")[0];var maxZIndex=STJRV2.maxZIndex();maxZIndex=maxZIndex?parseInt(maxZIndex)+5:5;if(backDrop==null){backDrop=document.createElement("div");backDrop.id="reviewWindowWidgetBackDropInner";bodyContainer.appendChild(backDrop);document.getElementById("reviewWindowWidgetBackDropInner").innerHTML='<div class="stjr-review-window-widget-loading-backdrop js-stjr-review-window-widget-loading-backdrop" style="z-index:'+maxZIndex+';"><span class="stjr-work-indicator js-loading"></span></div>';bodyContainer.classList.add("stjr-body__review-window-widget--active");document.querySelector(".js-stjr-review-window-widget-loading-backdrop").addEventListener("click",toggleWindow)}
var cont=document.querySelector(widgetClassSelector);if(cont==null){cont=document.createElement("div");cont.classList.add(widgetName);cont.style.position="relative";cont.style.zIndex=maxZIndex+3;document.getElementsByTagName("body")[0].appendChild(cont);cont=document.querySelector(widgetClassSelector)}
bodyContainer.classList.add("stjr-body__review-window-widget--active");fadeIn(document.querySelector(".js-stjr-review-window-widget-loading-backdrop"),null,!1,"flex");document.querySelector(widgetClassSelector).innerHTML='<div class="stjr-review-window-widget-main-container js-stjr-review-window-widget-main-container" style="z-index:'+(maxZIndex+5)+'; position:relative;"></div>'};var render=function(){var sj_responses=STJRV2.getResponse("response"+widgetNumber);if(!STJRV2.hasLoadedStyleSheet()||!sj_responses){window.setTimeout(render.bind(this,widgetNumber),500);return}
if(sj_responses.loaded)return;sj_responses.loaded=!0;STJRV2.setResponse("response"+widgetNumber,sj_responses);var element=document.querySelector(widgetClassSelector);if(!element){return}
element.innerHTML=sj_responses.html;var windowWidget=element;var maxZIndex=STJRV2.maxZIndex();windowWidget.style.display="none";windowWidget.zIndex=maxZIndex?parseInt(maxZIndex)+10:10;fadeIn(windowWidget);var miniCarousel=document.querySelector(widgetClassSelector+" .js-stjr-review-window-widget__window__inner-window__review-content__photos-carousel");document.querySelector(".js-stjr-review-window-widget__window__ctrl-btn--close").addEventListener("click",toggleWindow);initHeroSlider();if(miniCarousel){var prevBtn=miniCarousel.querySelector(".js-stjr-review-window-widget__window__inner-window__review-content__photos-carousel__btn__prev");var nextBtn=miniCarousel.querySelector(".js-stjr-review-window-widget__window__inner-window__review-content__photos-carousel__btn__next");var sliderContainer=miniCarousel.querySelector(".js-stjr-review-window-widget__window__inner-window__review-content__photos-carousel__slider__container");setTimeout(()=>{STJRV2.makeMiniSlider(sliderContainer,prevBtn,nextBtn,()=>{var photosContainers=document.querySelectorAll(".stjr-review-window-widget__window__inner-window__review-content__photos-carousel__photo");var photosContainersParent=document.querySelector(".js-stjr-review-window-widget__window__inner-window__review-content__photos-carousel");photosContainers.forEach((el)=>{el.addEventListener("click",function(ev){ev.preventDefault();ev.stopPropagation();var thisEl=ev.target;var parent=thisEl;if(!parent.classList.contains("stjr-review-window-widget__window__inner-window__review-content__photos-carousel__photo")){parent=thisEl.closest(".stjr-review-window-widget__window__inner-window__review-content__photos-carousel__photo")}
var reviewIdsArr=[...photosContainers].map((el)=>{return el.getAttribute("data-review-id")});var reviewId=parent.getAttribute("data-review-id");var type=parent.getAttribute("data-type");var productReviewId=parent.getAttribute("data-product-review-id");var productId=parent.getAttribute("data-product-id");fadeOut(windowWidget,null,null,"none",()=>{STJRV2.ReviewWindowWidget.set({id:"reviewWindowWidget",url:options.url,test:options.test,review_ids:reviewIdsArr.join("|"),review_id:reviewId,product_review_id:productReviewId,product_id:productId,type:type})})})});photosContainersParent.style.opacity=1})},3000)}
var helpfulRows=document.querySelectorAll(widgetClassSelector+" .js-helpful-button");for(var i=0;i<helpfulRows.length;i++){helpfulVote(helpfulRows[i])}
var helpfulRowsNo=document.querySelectorAll(widgetClassSelector+" .js-helpful-no-button");for(var i=0;i<helpfulRows.length;i++){helpfulVoteNo(helpfulRowsNo[i])}
STJRV2.markVoted(Array.from(document.querySelectorAll(widgetClassSelector+" .stjr-review-helpful")))};var toggleWindow=function(){var bodyContainer=document.getElementsByTagName("body")[0];var windowWidget=document.querySelector(widgetClassSelector+" .js-stjr-review-window-widget");bodyContainer.classList.remove("stjr-body__review-window-widget--active");fadeOut(document.querySelector(".js-stjr-review-window-widget-loading-backdrop"));if(windowWidget)fadeOut(windowWidget);};var loadReviews=function(page,first){that=this;page=page;STJRV2.ReviewsWidget["reviewsCallback_"+page]=function(resp){sj_responses=resp;renderReviews(first)};var url=STJRV2.subBaseToCDN()+"/widget-review-window-list/fragrancex.com/"+page;var adds=additionalOptions;if(filterRating!=undefined&&filterRating!="")adds+="&filter_rating="+filterRating;if(sortRating!=undefined&&sortRating!="")adds+="&sort_by="+sortRating;if(searchKeywordText!=undefined&&searchKeywordText!="")adds+="&search_keyword="+searchKeywordText;if(adds!="")url+="?"+adds.substr(1);STJRV2.jsonP(url,function(script){scriptElement=script})};var renderReviews=function(first){var sj_responses=STJRV2.getResponse("productReviewPage"+page);if(typeof sj_responses!="object")return;var reviewList=document.querySelector(widgetClassSelector+" .stjr-reviews-list-container");if(reviewList!=undefined){if(sj_responses.empty){reviewListEmpty=!0}else{function setReviewList(reviewList){reviewList.innerHTML=sj_responses.html;var links=document.querySelectorAll(widgetClassSelector+" .stjr-reviews-list-container .stjr-review-page-pagination__link, "+widgetClassSelector+" .stjr-reviews-list-container .stjr-review-page-pagination__next .stjr-review-page-pagination__link, "+widgetClassSelector+" .stjr-reviews-list-container .stjr-review-page-pagination__previous .stjr-review-page-pagination__link");for(var i=0;i<links.length;i++)links[i].addEventListener("click",pageClick);var link=document.querySelector(widgetClassSelector+" .stjr-product-review-button-see-all-reviews");link.addEventListener("click",clearFilterClick);var helpfulRows=document.querySelectorAll(widgetClassSelector+" .stjr-reviews-list-container .stjr-review-helpful .js-helpful-button");for(var i=0;i<helpfulRows.length;i++){helpfulVote(helpfulRows[i])}
var helpfulRowsNo=document.querySelectorAll(widgetClassSelector+" .stjr-reviews-list-container .stjr-review-helpful .js-helpful-no-button");for(var i=0;i<helpfulRows.length;i++){helpfulVoteNo(helpfulRowsNo[i])}
if(lightbox)lightbox.load();}
if(!first)
SJTRUtils.scrollToElement(reviewList,function(half){if(!half)return;setReviewList(reviewList)},-120);else setReviewList(reviewList)}}};var helpfulVote=function(element){element.addEventListener("click",helpfulVoteClick)};var helpfulVoteNo=function(element){element.addEventListener("click",helpfulVoteNoClick)};var helpfulVoteClick=function(e){var parent=e.target.closest("[data-url]");if(parent.querySelector(".js-loading").classList.contains("active"))return;var btn=parent.querySelector(".js-helpful-button");var noBtn=parent.querySelector(".js-helpful-no-button");var voteNum=btn.classList.contains("active")?0:1;var voteIdStr=parent.dataset.vote_id?"&vote_id="+parent.dataset.vote_id:"";if(btn.classList.contains("active")){parent.classList.remove("active");btn.classList.remove("active");parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Was this review helpful?")}else{parent.classList.add("active");btn.classList.add("active");parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Thanks for your feedback!")}
var el=parent;var url=el.getAttribute("data-url")+"/p?"+voteIdStr;var objectId=el.getAttribute("data-object");var typeId=el.getAttribute("data-type");var name=el.getAttribute("id");var value=STJRV2.readCookie(name);var posVoteCounter=parent.querySelector(".js-pos-vote-count");var negVoteCounter=parent.querySelector(".js-neg-vote-count");var posVotes=parseInt(posVoteCounter.innerText?posVoteCounter.innerText:0)+(voteNum?1:-1);var negVotes=parseInt(negVoteCounter.innerText?negVoteCounter.innerText:0)-(noBtn.classList.contains("active")?voteNum:0);posVoteCounter.innerText=posVotes;negVoteCounter.innerText=negVotes;noBtn.classList.remove("active");if(isPreviewMode)return;if(!value||!RegExp("^(("+objectId+")\\|(pos)\\|(\\d+)\\|("+posVoteCounter+")\\|("+negVoteCounter+"))$").test(value)){parent.querySelector(".js-loading").classList.add("active");STJRV2.ReviewsWidget["voteCallback_"+objectId]=function(resp){parent.dataset.vote_id=resp.vote_id;STJRV2.createVoteCookies(name,objectId,resp.vote_id,"pos",posVotes,negVotes,voteNum);parent.querySelector(".js-loading").classList.remove("active")};STJRV2.jsonP(url,function(script){scriptElement=script})}else{parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Thanks for your feedback!")}};var helpfulVoteNoClick=function(e){var parent=e.target.closest("[data-url]");if(parent.querySelector(".js-loading").classList.contains("active"))return;var btn=parent.querySelector(".js-helpful-no-button");var yesBtn=parent.querySelector(".js-helpful-button");var voteNum=btn.classList.contains("active")?0:-1;var voteIdStr=parent.dataset.vote_id?"&vote_id="+parent.dataset.vote_id:"";if(btn.classList.contains("active")){parent.classList.remove("active");btn.classList.remove("active");parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Was this review helpful?")}else{parent.classList.add("active");btn.classList.add("active");parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Thanks for your feedback!")}
var el=parent;var url=el.getAttribute("data-url")+"/n?"+voteIdStr;var objectId=el.getAttribute("data-object");var typeId=el.getAttribute("data-type");var name=el.getAttribute("id");var value=STJRV2.readCookie(name);var posVoteCounter=parent.querySelector(".js-pos-vote-count");var negVoteCounter=parent.querySelector(".js-neg-vote-count");var posVotes=parseInt(posVoteCounter.innerText?posVoteCounter.innerText:0)+(yesBtn.classList.contains("active")?voteNum:0);var negVotes=parseInt(negVoteCounter.innerText?negVoteCounter.innerText:0)+(voteNum<0?1:-1);posVoteCounter.innerText=posVotes;negVoteCounter.innerText=negVotes;yesBtn.classList.remove("active");if(isPreviewMode)return;if(isPreviewMode)return;if(!value||!RegExp("^(("+objectId+")\\|(neg)\\|(\\d+)\\|("+posVoteCounter+")\\|("+negVoteCounter+"))$").test(value)){parent.querySelector(".js-loading").classList.add("active");STJRV2.ReviewsWidget["voteCallback_"+objectId]=function(resp){parent.dataset.vote_id=resp.vote_id;STJRV2.createVoteCookies(name,objectId,resp.vote_id,"neg",posVotes,negVotes,voteNum);parent.querySelector(".js-loading").classList.remove("active")};STJRV2.jsonP(url,function(script){scriptElement=script})}else{parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Thanks for your feedback!")}};var initHeroSlider=function(container,prevBtn,nextBtn){var container=document.querySelector(widgetClassSelector+" .js-stjr-review-window-widget__window__inner-window__hero-img");var images=[];if(container){images=container.querySelectorAll(".js-stjr-review-window-widget__window__inner-window__hero-img__img")}
var prevBtn=document.querySelector(".js-stjr-review-window-widget__window__ctrl-btn--prev");var nextBtn=document.querySelector(".js-stjr-review-window-widget__window__ctrl-btn--next");if(nextBtn)
nextBtn.addEventListener("click",(ev)=>{var activeImages=container.querySelector(".js-stjr-review-window-widget__window__inner-window__hero-img__img.active");activeImages.classList.remove("active");if(activeImages.nextElementSibling){activeImages.nextElementSibling.classList.add("active")}else if(images[0]){images[0].classList.add("active")}});if(prevBtn)
prevBtn.addEventListener("click",(ev)=>{var activeImages=container.querySelector(".js-stjr-review-window-widget__window__inner-window__hero-img__img.active");activeImages.classList.remove("active");if(activeImages.previousElementSibling){activeImages.previousElementSibling.classList.add("active")}else if(images[images.length-1]){images[images.length-1].classList.add("active")}})};var fadeIn=function(el,classStr,addClass,display){if(el.style.display===display||el.style.display==="block"){return}
el.style.opacity=0;if(classStr){if(addClass){el.classList.add(classStr)}else{el.classList.remove(classStr)}}else{if(el.style.display!==display&&!el.style.display!=="block")el.style.display=display||"block"}(function fade(){var val=parseFloat(el.style.opacity);if(!((val+=0.1)>1)){el.style.opacity=val;requestAnimationFrame(fade)}})()};var fadeOut=function(el,classStr,addClass,display,callback){el.style.opacity=1;(function fade(){if((el.style.opacity-=0.1)<0){if(classStr){if(addClass){el.classList.add(classStr)}else{el.classList.remove(classStr)}}else{el.style.display=display||"none"}
if(callback)callback();}else{requestAnimationFrame(fade)}})()};return{reset:function(element){element.innerHTML="";element.classList.remove("stjr-init");const regex=new RegExp(/stjr-callback-\d/,"g");if(element.className.match(regex))element.className=element.className.replace(regex,"");timer=setInterval(init,1000)},set:function(options){init(options)},}})();STJRV2.Product=(function(){var that=this,cache={},productsInit=0,customFormats={"yummybazaar.com":"","ctyb.myshopify.com":""},scriptElement=null;var getHash=function(str){var hash=0,i,chr;if(str.length===0)return hash;for(i=0;i<str.length;i++){chr=str.charCodeAt(i);hash=(hash<<5)-hash+chr;hash|=0}
return hash};var _getQueryString=function(key,val){var k,tmp=[];if(val===!0)val="1";else if(val===!1)val="0";if(val!==null){if(typeof val==="object"){for(k in val)if(val[k]!==null)tmp.push(_getQueryString(key+"["+k+"]",val[k]));return tmp.join("")}else if(typeof val!=="function"&&typeof val!=="undefined")return encodeURIComponent(key)+"="+encodeURIComponent(val)+"&";else return""}else return""};var handleResponseCall=function(widgetNumber){var sj_responses=STJRV2.getResponse("response"+widgetNumber);if(!sj_responses){window.setTimeout(handleResponseCall.bind(this,widgetNumber),500);return}
productsInit=!0};var initProducts=function(){var productData=STJRV2.Product.getProductVars(null);if(!Object.keys(productData).length)return!1;var query=STJRV2.Product.getQueryString(productData,0),k=getHash(query);if(cache[k])return!1;var widgetNumber=STJRV2.getNextWidgetNumber(),url=STJRV2.subBaseToCDN()+"/widget-init-products/fragrancex.com/"+widgetNumber;cache[k]=1;STJRV2.Product["callback_"+widgetNumber]=function(resp){STJRV2.setResponse("response"+resp.callback,resp)};STJRV2.jsonP(url+"?"+query);handleResponseCall();return!0};setInterval(function(){if(!initProducts())productsInit=!0},1000);return{getProductVars:function(element,essentials=!1){var data=[],jsonObjects=document.querySelectorAll('script[id^="ProductJson-"]'),reviewPage=document.querySelector(".stjr-product-review-page"),jsonObject=null;if(jsonObjects.length>0&&reviewPage){var tempJsons=document.querySelectorAll(`script[id^="ProductJson-${reviewPage.dataset.productId}"],script[id^="ProductJson-${reviewPage.dataset.groupValue}"]`);jsonObject=tempJsons.length>0?tempJsons[0]:jsonObjects[0]}else if(jsonObjects.length){jsonObject=jsonObjects[0]}
if(!jsonObject&&typeof theme!=="undefined"&&theme.productSingleObject)jsonObject=theme.productSingleObject;var json=jsonObject?JSON.parse(jsonObject.innerHTML):{};if(!element&&(!json||Object.keys(json).length===0))return data;else if(!element)element={dataset:{}};var reqOrigin=window.location.host;var userCustomFormat=customFormats.hasOwnProperty(reqOrigin);var testIdPrefix=/sitejabber/.test(window.location.origin)?"STJR-FAKE-":"Pid-";data.product_id=element.dataset.productId=element.dataset.productId||json.id||testIdPrefix+Math.floor(Math.random()*999999999);data.variant_id=element.dataset.variantId=element.dataset.variantId||json.variant_id||null;data.test=element.dataset.test||!1;if(!essentials){data.title=element.dataset.title||json.title;data.description=element.dataset.description||json.description;data.brand=element.dataset.vendor||json.vendor;data.sku=element.dataset.sku||json.sku;data.item_group=element.dataset.itemGroup||json.item_group;data.mpn=element.dataset.mpn=json.mpn||null;data.gtn=element.dataset.gtn=json.gtn||null;data.price=element.dataset.price||json.price;data.categories=element.dataset.tags||json.tags;data.images=element.dataset.images||json.images||json.image;data.product_link=element.dataset.productLink||location.href;data.variants=[];if(!userCustomFormat&&json.variants&&json.variants.length){json.variants.forEach(function(variant){data.variants.push({id:variant.id,title:variant.title,sku:variant.sku,mpn:variant.mpn||null,gtn:variant.gtn||null,price:variant.price,images:variant.images||variant.image||[],product_link:variant.product_link?location.origin+variant.product_link.replace(new RegExp("^"+location.origin,"gm"),""):location.href,})})}}
if(data.variants&&data.variants.length>0){data.item_group=data.product_id;var selectedVariantId=SJTRUtils.getParam("variant")||(document.querySelector('select[name="id"], input[name^=id]:checked, select[name^=id], input[name=id], hidden[name^=id]')!==null?document.querySelector('select[name="id"], input[name^=id]:checked, select[name^=id], input[name=id], hidden[name^=id]').value:null)||(typeof window.Shopify=="object"&&document.querySelector('[id^="ProductJson-"]')!==null?document.querySelector('[id^="ProductJson-"]').getAttribute("id").replace("ProductJson-",""):null)||data.variant_id||(reviewPage&&reviewPage.dataset.productId?reviewPage.dataset.productId:null)||null;if(selectedVariantId){if(selectedVariantId){var foundVariant=data.variants.filter((item)=>{return item.id==selectedVariantId||item.sku==selectedVariantId});if(foundVariant.length>0){data.variant_id=selectedVariantId;data.variants=foundVariant}}else{data.variants=[];if(!data.variant_id)data.variant_id=data.product_id}
element.dataset.variantId=data.variant_id;element.dataset.itemGroup=data.item_group;if(!element.dataset.group&&element.dataset.groupValue){element.dataset.group="item_group";element.dataset.groupValue=data.product_id}}}
if(data.description&&data.description.length>256)data.description=SJTRUtils.convertToPlainText(data.description).slice(0,256);return data},getQueryString:function(productData,index){var ret="",key;for(key in productData)ret+=_getQueryString(key+(typeof index=="number"?"["+index+"]":""),productData[key]);return ret},ready:function(){return productsInit===!0},reset:function(){cache={};productsInit=!1},}})();STJRV2.ProductRatingWidget=(function(){var that,isOut,isPreviewMode,scrollOffset=0;that=this;this.name="ProductRatingWidget";var render=function(widgetNumber){var sj_responses=STJRV2.getResponse("response"+widgetNumber);if(!STJRV2.hasLoadedStyleSheet()||!sj_responses){window.setTimeout(render.bind(this,widgetNumber),500);return}
if(sj_responses.loaded)return;sj_responses.loaded=!0;sj_responses.products=[];STJRV2.setResponse("response"+widgetNumber,sj_responses);var i=0,pid,reviewPage=document.querySelector(".stjr-product-review-page");for(pid in sj_responses.html){var elements=document.querySelectorAll(".stjr-product-rating.stjr-callback-"+widgetNumber+'[data-product-id="'+pid+'"]');elements.forEach(function(element){element.innerHTML=sj_responses.html[pid];elWidgetId=that.name+"-"+widgetNumber+"-"+i++;element.setAttribute("id",elWidgetId);var el=element.querySelector(".stjr-product-rating-widget"),o=element.querySelector(".stjr-product-rating-widget__num-reviews"),stars=element.querySelector(".stjr-product-rating-widget__stars"),histHoverHelper=element.querySelector(".stjr-product-rating-histogram__hover-helper"),hg=element.querySelector(".stjr-product-rating-histogram-container"),r5=element.querySelector(".stjr-product-rating-histogram .stjr-product-review-histogram-bar--rating_5 + .stjr-product-review-histogram-bar__num-reviews"),r4=element.querySelector(".stjr-product-rating-histogram .stjr-product-review-histogram-bar--rating_4 + .stjr-product-review-histogram-bar__num-reviews"),r3=element.querySelector(".stjr-product-rating-histogram .stjr-product-review-histogram-bar--rating_3 + .stjr-product-review-histogram-bar__num-reviews"),r2=element.querySelector(".stjr-product-rating-histogram .stjr-product-review-histogram-bar--rating_2 + .stjr-product-review-histogram-bar__num-reviews"),r1=element.querySelector(".stjr-product-rating-histogram .stjr-product-review-histogram-bar--rating_1 + .stjr-product-review-histogram-bar__num-reviews"),ra=element.querySelector(".stjr-product-rating-histogram .stjr-product-rating-button-see-all-reviews"),wl=element.querySelector(".stjr-product-rating-button-write-link");if(o==null)return;scrollOffset=-el.getAttribute("data-scroll-offset");o.setAttribute("data-widget-id",elWidgetId);if(hg)hg.setAttribute("data-widget-id",elWidgetId);if(r1)r1.setAttribute("data-widget-id",elWidgetId);if(r2)r2.setAttribute("data-widget-id",elWidgetId);if(r3)r3.setAttribute("data-widget-id",elWidgetId);if(r4)r4.setAttribute("data-widget-id",elWidgetId);if(r5)r5.setAttribute("data-widget-id",elWidgetId);if(ra)ra.setAttribute("data-widget-id",elWidgetId);function histHoverHelperUtil(){var o=element.querySelector(".stjr-product-rating-widget__num-reviews"),stars=element.querySelector(".stjr-product-rating-widget__stars"),histHoverHelper=element.querySelector(".stjr-product-rating-histogram__hover-helper"),wl=element.querySelector(".stjr-product-rating-button-write-link");if(isPreviewMode||(reviewPage&&reviewPage.dataset.productId&&element.dataset.productId&&reviewPage.dataset.productId.trim()==element.dataset.productId.trim())){o.addEventListener("click",ratingClick);o.style.cursor="pointer";if(wl){wl.style.display="block";var linkA=wl.querySelector("a");if(linkA){linkA.addEventListener('click',function(ev){ev.preventDefault()})}}
if(histHoverHelper){histHoverHelper.style.cursor="pointer";histHoverHelper.addEventListener("click",ratingClick)}
stars.addEventListener("click",ratingClick);stars.style.cursor="pointer"}else{o.style.cursor="default";if(wl)wl.style.display="none"}}
document.querySelector("body").addEventListener("productReviewRendered",histHoverHelperUtil);if(isPreviewMode||(reviewPage&&reviewPage.dataset.productId&&element.dataset.productId&&reviewPage.dataset.productId.trim()==element.dataset.productId.trim())){o.addEventListener("click",ratingClick);o.style.cursor="pointer";if(wl)wl.style.display="block";if(histHoverHelper){histHoverHelper.style.cursor="pointer";histHoverHelper.addEventListener("click",ratingClick)}
stars.addEventListener("click",ratingClick);stars.style.cursor="pointer";o.addEventListener("mouseover",ratingOver);o.addEventListener("mouseout",ratingOut);if(hg)hg.addEventListener("mouseover",histogramOver);if(hg)hg.addEventListener("mouseout",histogramOut);if(r1)r1.addEventListener("click",rating1Click);if(r2)r2.addEventListener("click",rating2Click);if(r3)r3.addEventListener("click",rating3Click);if(r4)r4.addEventListener("click",rating4Click);if(r5)r5.addEventListener("click",rating5Click);if(ra)ra.addEventListener("click",ratingAllClick);if(wl)wl.addEventListener("click",writeLink);}else{o.style.cursor="default";if(wl)wl.style.display="none"}});window.addEventListener("resize",updateActiveHistogramPosition)}};var histogramOver=function(e){var widgetId=this.getAttribute("data-widget-id");that["isOut"+widgetId]=!1};var histogramOut=function(e){var widgetId=this.getAttribute("data-widget-id");that["isOut"+widgetId]=!0};var ratingOver=function(e){var thisEl=e.currentTarget;var reviewPage=document.querySelector(".stjr-product-review-page");var widgetId=this.getAttribute("data-widget-id"),h=document.querySelector("#"+widgetId+" .stjr-product-rating-histogram-container");if(h){h.style.display="block";h.classList.add("active");that["isOut"+widgetId]=!1;var hfooter=h.querySelector(".stjr-product-rating-histogram-container__footer");var numReviews=h.querySelectorAll(".stjr-product-review-histogram-bar__num-reviews");if(hfooter){hfooter.style.display=!reviewPage.clientWidth?"none":"block";Array.from(numReviews).forEach((el)=>{el.style.pointerEvents=!reviewPage.clientWidth?'none':'all'})}
updateActiveHistogramPosition()}};var updateActiveHistogramPosition=function(el){var h=document.querySelector(".stjr-product-rating-widget-container .stjr-product-rating-histogram-container.active");if(!h)return;var parent=h.closest(".stjr-product-rating-widget-container"),thisEl=parent.querySelector(".stjr-product-rating-widget__num-reviews"),triangle=parent.querySelector(".stjr-product-rating-histogram__triangle");if(h){var histogram=h.querySelector(".stjr-product-rating-histogram");histogram.style.left=`${thisEl.offsetLeft + thisEl.offsetWidth / 3 - 20}px`;triangle.style.left=`${thisEl.offsetLeft + thisEl.offsetWidth / 3}px`;histogramClRect=histogram.getBoundingClientRect();if(window.outerWidth<histogramClRect.x+histogramClRect.width){var diff=window.outerWidth-(histogramClRect.x+histogramClRect.width);histogram.style.left=histogram.offsetLeft+diff-50+"px"}}};var ratingOut=function(e){var widgetId=this.getAttribute("data-widget-id");that["isOut"+widgetId]=!0;that["timer"+widgetId]=setInterval(function(){if(that["isOut"+widgetId]){var h=document.querySelector("#"+widgetId+" .stjr-product-rating-histogram-container");if(h){h.style.display="none";h.classList.remove("active");clearInterval(that["timer"+widgetId])}}},100)};var scrollToReviewPageWidget=function(e){var reviewPage=document.querySelector(".stjr-product-review-page");if(!reviewPage.clientWidth){return}
if(reviewPage)SJTRUtils.scrollToElement(reviewPage,null,scrollOffset);};var ratingClick=function(e){if(!STJRV2.isEventTrusted(e))return;var reviewPage=document.querySelector(".stjr-product-review-page");if(!reviewPage.clientWidth){return}
scrollToReviewPageWidget()};var rating1Click=function(e){if(!STJRV2.isEventTrusted(e))return;var reviewPage=document.querySelector(".stjr-product-review-page");if(!reviewPage.clientWidth){return}
var widgetId=this.getAttribute("data-widget-id"),r=document.querySelector(".stjr-product-review-page-widget .stjr-product-review-histogram .stjr-product-review-histogram-bar--rating_1 + .stjr-product-review-histogram-bar__num-reviews");that["isOut"+widgetId]=!0;scrollToReviewPageWidget();if(r)r.click();};var rating2Click=function(e){if(!STJRV2.isEventTrusted(e))return;var reviewPage=document.querySelector(".stjr-product-review-page");if(!reviewPage.clientWidth){return}
var widgetId=this.getAttribute("data-widget-id"),r=document.querySelector(".stjr-product-review-page-widget .stjr-product-review-histogram .stjr-product-review-histogram-bar--rating_2 + .stjr-product-review-histogram-bar__num-reviews");that["isOut"+widgetId]=!0;scrollToReviewPageWidget();if(r)r.click();};var rating3Click=function(e){if(!STJRV2.isEventTrusted(e))return;var reviewPage=document.querySelector(".stjr-product-review-page");if(!reviewPage.clientWidth){return}
var widgetId=this.getAttribute("data-widget-id"),r=document.querySelector(".stjr-product-review-page-widget .stjr-product-review-histogram .stjr-product-review-histogram-bar--rating_3 + .stjr-product-review-histogram-bar__num-reviews");that["isOut"+widgetId]=!0;scrollToReviewPageWidget();if(r)r.click();};var rating4Click=function(e){if(!STJRV2.isEventTrusted(e))return;var reviewPage=document.querySelector(".stjr-product-review-page");if(!reviewPage.clientWidth){return}
var widgetId=this.getAttribute("data-widget-id");r=document.querySelector(".stjr-product-review-page-widget .stjr-product-review-histogram .stjr-product-review-histogram-bar--rating_4 + .stjr-product-review-histogram-bar__num-reviews");that["isOut"+widgetId]=!0;scrollToReviewPageWidget();if(r)r.click();};var rating5Click=function(e){if(!STJRV2.isEventTrusted(e))return;var reviewPage=document.querySelector(".stjr-product-review-page");if(!reviewPage.clientWidth){return}
var widgetId=this.getAttribute("data-widget-id"),r=document.querySelector(".stjr-product-review-page-widget .stjr-product-review-histogram .stjr-product-review-histogram-bar--rating_5 + .stjr-product-review-histogram-bar__num-reviews");that["isOut"+widgetId]=!0;scrollToReviewPageWidget();if(r)r.click();};var ratingAllClick=function(e){if(!STJRV2.isEventTrusted(e))return;var reviewPage=document.querySelector(".stjr-product-review-page");if(!reviewPage.clientWidth){return}
var widgetId=this.getAttribute("data-widget-id"),r=document.querySelector(".stjr-product-review-page-widget .stjr-product-review-button-see-all-reviews");that["isOut"+widgetId]=!0;scrollToReviewPageWidget();if(r)r.click();};var writeLink=function(e){if(!STJRV2.isEventTrusted(e))return;var reviewPage=document.querySelector(".stjr-product-review-page");if(!reviewPage.clientWidth){return}
var event=new Event("writeLinkClicked"),reviewPage=document.querySelector(".stjr-product-review-page-widget .stjr-reviews-page-write-review");document.querySelector("body").dispatchEvent(event);if(reviewPage)SJTRUtils.scrollToElement(reviewPage,null,scrollOffset);};setInterval(function(){if(!STJRV2.Product.ready())return;elements=document.querySelectorAll(".stjr-product-rating:not(.stjr-init)");if(!elements.length)return;var query="",widgetNumber=STJRV2.getNextWidgetNumber(),url=STJRV2.subBaseToCDN()+"/widget-product-rating/fragrancex.com/"+widgetNumber,index=0;STJRV2.ProductRatingWidget["receiveCallback_"+widgetNumber]=function(resp){STJRV2.setResponse("response"+resp.callback,resp)};Array.from(elements).slice(0,30).forEach(function(element){var productData=STJRV2.Product.getProductVars(element,!0),attrOptions=STJRV2.getAttrObj(element),otherOptions=STJRV2.getConfig(),options=Object.assign({},otherOptions,attrOptions);isPreviewMode=typeof options.test!="undefined"?options.test:!1;query+=STJRV2.Product.getQueryString(Object.assign({},productData,options),index++);element.classList.add("stjr-init","stjr-callback-"+widgetNumber)});STJRV2.jsonP(url+"?"+query,widgetNumber,function(script){render(widgetNumber)})},1000);return{reset:function(element){element.innerHTML="";element.classList.remove("stjr-init");const regex=new RegExp(/stjr-callback-\d/,"g");if(element.className.match(regex))element.className=element.className.replace(regex,"");},}})();STJRV2.ProductReviewPageWidget=(function(){var that=this,options,id,lightbox=!1,enableWriteReview=!0,reviewListEmpty=!1,questionListEmpty=!1,isPreviewMode=!1,query="",widgetNumber,scriptElement=null,widgetClassSelector=null,customFilterOptions={},productData,timer;var init=function(){if(!STJRV2.Product.ready())return;var element=document.querySelector(".stjr-product-review-page:not(.stjr-init)");if(!element)return;widgetNumber=STJRV2.getNextWidgetNumber();var url=STJRV2.subBaseToCDN()+"/widget-product-review-page/fragrancex.com/"+widgetNumber,attrOptions=STJRV2.getAttrObj(element),otherOptions=STJRV2.getConfig(),widgetName="ProductReviewPageWidget";productData=STJRV2.Product.getProductVars(element,!0);element.classList.add("stjr-init","stjr-callback-"+widgetNumber,widgetName+"-"+widgetNumber);widgetClassSelector="."+widgetName+"-"+widgetNumber;id="stjr-widget"+widgetNumber;options=Object.assign({},otherOptions,attrOptions);isPreviewMode=typeof options.test!="undefined"?options.test:!1;query=STJRV2.Product.getQueryString(Object.assign({},productData,options),null);if(!options.product_id&&!options.sku&&((productData&&productData.product_id)||productData.sku)){options.product_id=productData.product_id?productData.product_id:null;options.sku=productData.sku?productData.sku:null}
var initErrorCallback=options.test?()=>{STJRV2.renderNoProductsMessage(widgetClassSelector)}:null;STJRV2.setResponse("response"+widgetNumber,null);STJRV2.ReviewsWidget["receiveCallback_"+widgetNumber]=function(resp){STJRV2.setResponse("response"+resp.callback,resp)};STJRV2.jsonP(url+"?"+query,widgetNumber,function(script){render(widgetNumber)},initErrorCallback)};var render=function(){var sj_responses=STJRV2.getResponse("response"+widgetNumber);if(!STJRV2.hasLoadedStyleSheet()||!sj_responses){window.setTimeout(render.bind(this,widgetNumber),500);return}
if(sj_responses.loaded)return;sj_responses.loaded=!0;STJRV2.setResponse("response"+widgetNumber,sj_responses);var element=document.querySelector(".stjr-product-review-page.stjr-callback-"+widgetNumber);if(!element)return;element.innerHTML=sj_responses.html;STJRV2.consolidateOnPageProductMicroData();STJRV2.consolidateOnPageJsonSchema();loadReviews(1,!0);loadQuestions(1,!0);update();window.removeEventListener("resize",update);window.addEventListener("resize",update);var widgetContainer=document.querySelector(widgetClassSelector+" .js-stjr-product-review-page-widget");if(widgetContainer&&widgetContainer.offsetWidth===0){window.removeEventListener("scroll",update);window.addEventListener("scroll",update)}
var reviewsTab=document.querySelector(widgetClassSelector+" .stjr-product-review-page-widget-header__tab-reviews"),qaTab=document.querySelector(widgetClassSelector+" .stjr-product-review-page-widget-header__tab-qa"),pageWidget=document.querySelectorAll(widgetClassSelector+" .stjr-product-review-page-widget"),o=document.querySelectorAll(widgetClassSelector+" .stjr-product-review-page-widget-header__write-review-button .stjr-sj-button-write-review"),qs=document.querySelectorAll(widgetClassSelector+" .stjr-sj-button-write-question"),btnSubmit=document.querySelector(widgetClassSelector+" .stjr-button--write-question"),btnBack=document.querySelector(widgetClassSelector+" .stjr-button--back-questions"),btnConfirm=document.querySelector(widgetClassSelector+" .stjr-button--confirm-question-ok"),contentInput=document.querySelector(widgetClassSelector+" #stjr-question-form__field--content"),nameInput=document.querySelector(widgetClassSelector+" #stjr-question-form__field--name"),emailInput=document.querySelector(widgetClassSelector+" #stjr-question-form__field--email"),btnASubmit=document.querySelector(widgetClassSelector+" .stjr-button--write-answer"),btnABack=document.querySelector(widgetClassSelector+" .stjr-button--backa-questions"),btnAConfirm=document.querySelector(widgetClassSelector+" .stjr-button--confirm-answer-ok"),contentAInput=document.querySelector(widgetClassSelector+" #stjr-answer-form__field--content"),nameAInput=document.querySelector(widgetClassSelector+" #stjr-answer-form__field--name"),emailAInput=document.querySelector(widgetClassSelector+" #stjr-answer-form__field--email"),searchReviewsInput=document.querySelector(widgetClassSelector+" #stjr-review-form__field--search-keyword"),filterBy=document.querySelector(widgetClassSelector+" #stjr-product-review-page-widget-filter__field-filter-by"),sortBy=document.querySelector(widgetClassSelector+" #stjr-product-review-page-widget-filter__field-sort-by"),rowFilter5=document.querySelector(widgetClassSelector+" .stjr-product-review-histogram-row-clickable_5"),rowFilter4=document.querySelector(widgetClassSelector+" .stjr-product-review-histogram-row-clickable_4"),rowFilter3=document.querySelector(widgetClassSelector+" .stjr-product-review-histogram-row-clickable_3"),rowFilter2=document.querySelector(widgetClassSelector+" .stjr-product-review-histogram-row-clickable_2"),rowFilter1=document.querySelector(widgetClassSelector+" .stjr-product-review-histogram-row-clickable_1"),sortByDropdown=document.querySelector(widgetClassSelector+" #stjr-product-review-page-widget-filter__field-sort-by"),seeAllLink=document.querySelector(widgetClassSelector+" .stjr-product-review-page-widget-header__num-reviews__link");filterByDropdown=document.querySelector(widgetClassSelector+" #stjr-product-review-page-widget-filter__field-filter-by");if(pageWidget.length<1)return;enableWriteReview=o.length<1?!1:!0;STJRV2.loadStyleSheet((STJRV2.isAbsolute()?"https://static.sitejabber.com/":STJRV2.getBase())+"/js/lightboxjs/lightboxjs.min"+(STJRV2.isAbsolute()?".1660302347":"")+".css");STJRV2.loadScript("/js/lightboxjs/lightboxjs.min"+(STJRV2.isAbsolute()?".1660302347":"")+".js",function(){lightbox=new Lightbox();lightbox.load()});var writeReviewOptions=Object.assign({},productData,options);writeReviewOptions.id="stjr-reviews-page-write-review-";STJRV2.ProductWriteReviewWidget.init(writeReviewOptions);var event=new Event("productReviewRendered");document.querySelector("body").dispatchEvent(event);o.forEach((el)=>{el.addEventListener("click",writeReviewButtonClick)});qs.forEach((el)=>{el.addEventListener("click",writeQuestionButtonClick)});if(reviewsTab){reviewsTab.addEventListener("click",reviewsTabClick);qaTab.addEventListener("click",qaTabClick)}
if(seeAllLink){seeAllLink.addEventListener("click",scrollToReviewPageWidget)}
btnSubmit.addEventListener("click",submitQuestion);btnBack.addEventListener("click",backButton);btnConfirm.addEventListener("click",confirmButton);contentInput.addEventListener("focus",validatorClear);nameInput.addEventListener("focus",validatorClear);emailInput.addEventListener("focus",validatorClear);btnASubmit.addEventListener("click",submitAnswer);btnABack.addEventListener("click",backAButton);btnAConfirm.addEventListener("click",confirmAButton);contentAInput.addEventListener("focus",validatorClear);nameAInput.addEventListener("focus",validatorClear);emailAInput.addEventListener("focus",validatorClear);if(searchReviewsInput)searchReviewsInput.addEventListener("keyup",searchKeyword);if(rowFilter5)rowFilter5.addEventListener("click",filterByRow);if(rowFilter4)rowFilter4.addEventListener("click",filterByRow);if(rowFilter3)rowFilter3.addEventListener("click",filterByRow);if(rowFilter2)rowFilter2.addEventListener("click",filterByRow);if(rowFilter1)rowFilter1.addEventListener("click",filterByRow);sortByDropdown.addEventListener("click",dropdown);filterByDropdown.addEventListener("click",dropdown);document.querySelector("body").addEventListener("backButton",function(){if(reviewListEmpty)return;var writeReviewDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-page-write-review"),reviewListDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-page-reviews");if(writeReviewDiv==null)return;writeReviewDiv.style.display="none";reviewListDiv.style.display="block"});document.querySelector("body").addEventListener("confirmButton",function(){var writeReviewDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-page-write-review");var reviewListDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-page-reviews");if(writeReviewDiv==null)return;if(reviewListEmpty&&enableWriteReview){writeReviewDiv.style.display="block";reviewListDiv.style.display="none"}else{writeReviewDiv.style.display="none";reviewListDiv.style.display="block"}});document.querySelector("body").addEventListener("writeReviewLoaded",function(){var h1=document.querySelector(widgetClassSelector+" .stjr-product-write-review-widget-info .stjr-h1");if(reviewListEmpty&&enableWriteReview){if(h1)h1.innerHTML="Be the first to review this product";var btnBack=document.querySelector(widgetClassSelector+" .stjr-button--back-reviews");if(btnBack)btnBack.style.display="none";var btnConfirm=document.querySelector(widgetClassSelector+" .stjr-button--confirm-ok");if(btnConfirm)btnConfirm.style.display="none";var head1=document.querySelector(".stjr-product-review-page-widget-header-container-inner");if(head1)head1.style.display="none";var head2=document.querySelector(".stjr-product-review-page-widget-filter");if(head2)head2.style.display="none"}});document.querySelector("body").addEventListener("writeLinkClicked",function(){var writeReviewDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-page-write-review"),reviewListDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-page-reviews");if(writeReviewDiv==null)return;writeReviewDiv.style.display="block";reviewListDiv.style.display="none"});function checkScroll(){var hist=document.querySelector(widgetClassSelector+" .stjr-product-review-histogram");if(!hist||hist.className.indexOf("stjr-product-review-histogram-scrolled")>=0)return;var rect=hist.getBoundingClientRect(),elemTop=rect.top,elemBottom=rect.bottom;if(elemTop>=0&&elemBottom<=window.innerHeight){hist.className=hist.className+" stjr-product-review-histogram-scrolled";setTimeout(function(){var bar5=document.querySelector(widgetClassSelector+" .stjr-product-review-page-widget-header-container .stjr-product-review-histogram-bar--rating_5 .stjr-product-review-histogram-bar-complete"),bar4=document.querySelector(widgetClassSelector+" .stjr-product-review-page-widget-header-container .stjr-product-review-histogram-bar--rating_4 .stjr-product-review-histogram-bar-complete"),bar3=document.querySelector(widgetClassSelector+" .stjr-product-review-page-widget-header-container .stjr-product-review-histogram-bar--rating_3 .stjr-product-review-histogram-bar-complete"),bar2=document.querySelector(widgetClassSelector+" .stjr-product-review-page-widget-header-container .stjr-product-review-histogram-bar--rating_2 .stjr-product-review-histogram-bar-complete"),bar1=document.querySelector(widgetClassSelector+" .stjr-product-review-page-widget-header-container .stjr-product-review-histogram-bar--rating_1 .stjr-product-review-histogram-bar-complete");bar5.className=bar5.className+" stjr-product-review-histogram-bar-complete-animate";bar4.className=bar4.className+" stjr-product-review-histogram-bar-complete-animate";bar3.className=bar3.className+" stjr-product-review-histogram-bar-complete-animate";bar2.className=bar2.className+" stjr-product-review-histogram-bar-complete-animate";bar1.className=bar1.className+" stjr-product-review-histogram-bar-complete-animate"},1000)}}
window.onscroll=checkScroll;checkScroll();var headerContainerCarousel=document.querySelector(widgetClassSelector+" .js-stjr-product-review-page-widget__photos-carousel");renderReviews(1,!0);renderQuestions(1,!0)};var loadReviews=function(page=1,first=!1){that=this;STJRV2.ReviewsWidget["reviewsCallback_"+page]=function(resp){STJRV2.setResponse("reviewPage"+page,resp);renderReviews(page,first)};var url=STJRV2.subBaseToCDN()+"/widget-product-review-page-list/fragrancex.com/"+page;var filterOptions=STJRV2.Product.getQueryString(customFilterOptions,null);if(query!="")url+="?"+query;if(filterOptions!="")url+=filterOptions;STJRV2.jsonP(url,function(script){})};var scrollToReviewPageWidget=function(e){var reviewPageFilter=document.querySelector(".stjr-product-review-page .stjr-product-review-page-widget-filter");var reviewPageReviews=document.querySelector(".stjr-product-review-page .stjr-reviews-page-reviews");if((reviewPageFilter||!reviewPageFilter.clientWidth)&&(!reviewPageReviews||!reviewPageReviews.clientWidth)){return}
if(reviewPageFilter||reviewPageReviews)SJTRUtils.scrollToElement(reviewPageFilter?reviewPageFilter:reviewPageReviews,null);};var loadQuestions=function(page,first){that=this;STJRV2.ReviewsWidget["questionsCallback_"+page]=function(resp){STJRV2.setResponse("productQuestionPage"+page,resp);renderQuestions(page,first)};var url=STJRV2.subBaseToCDN()+"/widget-product-question-page-list/fragrancex.com/"+page;if(query!="")url+="?"+query;STJRV2.jsonP(url,function(script){scriptElement=script})};var renderReviews=function(page=1,first=!0){var that=this,sj_responses=STJRV2.getResponse("reviewPage"+page);if(typeof sj_responses!="object")return;function setReviewList(reviewList){reviewList.innerHTML=sj_responses.html;var links=document.querySelectorAll(widgetClassSelector+" .stjr-reviews-list-container .stjr-review-page-pagination__link, "+widgetClassSelector+" .stjr-reviews-list-container .stjr-review-page-pagination__next .stjr-review-page-pagination__link, "+widgetClassSelector+" .stjr-reviews-list-container .stjr-review-page-pagination__previous .stjr-review-page-pagination__link"),i;STJRV2.markVoted(Array.from(document.querySelectorAll(widgetClassSelector+" .stjr-review-helpful")));for(i=0;i<links.length;i++)links[i].addEventListener("click",pageClick);var link=document.querySelector(widgetClassSelector+" .stjr-product-review-button-see-all-reviews");link.addEventListener("click",clearFilterClick);var helpfulRows=document.querySelectorAll(widgetClassSelector+" .stjr-reviews-list-container .stjr-review-helpful .js-helpful-button");for(i=0;i<helpfulRows.length;i++)helpfulVote(helpfulRows[i]);var helpfulRowsNo=document.querySelectorAll(widgetClassSelector+" .stjr-reviews-list-container .stjr-review-helpful .js-helpful-no-button");for(i=0;i<helpfulRows.length;i++)helpfulVoteNo(helpfulRowsNo[i]);var photosContainers=document.querySelectorAll(".js-stjr-product-review-page-widget-review__review-photo--on-the-side");photosContainers.forEach((el)=>{el.addEventListener("click",function(ev){ev.preventDefault();ev.stopPropagation();var thisEl=ev.target,parent=thisEl;if(!parent.classList.contains("js-stjr-product-review-page-widget-review__review-photo--on-the-side"))parent=thisEl.closest(".js-stjr-product-review-page-widget-review__review-photo--on-the-side");var reviewIdsArr=[...photosContainers].map((el)=>{return el.getAttribute("data-review-id")}),reviewId=parent.getAttribute("data-review-id"),productReviewId=parent.getAttribute("data-product-review-id"),productId=parent.getAttribute("data-product-id");STJRV2.ReviewWindowWidget.set({id:"reviewWindowWidget",url:options.url,test:options.test,review_ids:reviewIdsArr.join("|"),review_id:reviewId,product_review_id:productReviewId,product_id:productId,})})});if(lightbox)lightbox.load();}
var reviewList=document.querySelector(".stjr-product-review-page.stjr-callback-"+widgetNumber+" .stjr-reviews-list-container");if(reviewList!=undefined){if(sj_responses.empty){reviewListEmpty=!0;if(enableWriteReview)writeReviewButtonClick();}
if(!first&&STJRV2.partInViewport(document.querySelector(widgetClassSelector),200))
SJTRUtils.scrollToElement(reviewList,function(half){if(!half)return;setReviewList(reviewList)},-120);else setReviewList(reviewList)}};var renderQuestions=function(page,first){var that=this,sj_responses=STJRV2.getResponse("productQuestionPage"+page);if(typeof sj_responses!="object")return;function setQuestionList(reviewList){questionList.innerHTML=sj_responses.html;var links=document.querySelectorAll(widgetClassSelector+" .stjr-questions-list-container .stjr-review-page-pagination__link"),i;for(i=0;i<links.length;i++)links[i].addEventListener("click",pageQClick);var answerButtons=document.querySelectorAll(widgetClassSelector+" .stjr-questions-list-container .stjr-product-review-page-widget-question__button-answer");for(i=0;i<answerButtons.length;i++)answerButtons[i].addEventListener("click",answerButtonClick);var viewAnswersButtons=document.querySelectorAll(widgetClassSelector+" .stjr-questions-list-container .stjr-product-review-page-widget-question__button-show-more-answers");for(i=0;i<viewAnswersButtons.length;i++)viewAnswersButtons[i].addEventListener("click",viewAnswersButtonClick);var helpfulRows=document.querySelectorAll(widgetClassSelector+" .stjr-questions-list-container .stjr-review-helpful .js-helpful-button");for(i=0;i<helpfulRows.length;i++)helpfulVote(helpfulRows[i]);var helpfulRowsNo=document.querySelectorAll(widgetClassSelector+" .stjr-questions-list-container .stjr-review-helpful .js-helpful-no-button");for(i=0;i<helpfulRows.length;i++)helpfulVoteNo(helpfulRowsNo[i]);}
var questionList=document.querySelector(".stjr-product-review-page.stjr-callback-"+widgetNumber+" .stjr-questions-list-container");if(questionList!=undefined){if(sj_responses.empty){var h1=document.querySelector(widgetClassSelector+" .stjr-question-form .stjr-h1");if(h1)h1.innerHTML="Be the first to ask a question about this product";questionListEmpty=!0;var btnBack=document.querySelector(widgetClassSelector+" .stjr-button--back-questions");btnBack.style.display="none";var btnConfirm=document.querySelector(widgetClassSelector+" .stjr-button--confirm-question-ok");btnConfirm.style.display="none"}else if(!first&&STJRV2.partInViewport(document.querySelector(widgetClassSelector),200))
SJTRUtils.scrollToElement(questionList,function(half){if(!half)return;setQuestionList(questionList)}-120);else setQuestionList(questionList);STJRV2.markVoted(Array.from(document.querySelectorAll(widgetClassSelector+" .stjr-review-helpful")))}};var pageClick=function(e){e.preventDefault();e.stopPropagation();if(!STJRV2.isEventTrusted(e))return;var o=e.currentTarget;if(o.tagName=="SPAN")o=o.querySelector("a");if(o&&o.href){var matches=o.href.match(/page=(\d+)/);page=matches?parseInt(matches[1]):null}
if(!page||isNaN(page))page=1;loadReviews(page);return!1};var pageQClick=function(e){e.preventDefault();e.stopPropagation();var o=e.currentTarget;if(o.tagName=="SPAN")o=o.querySelector("a");var page=parseInt(o.href.substr(o.href.indexOf("?page=")+6));if(isNaN(page))page=parseInt(o.href.substr(o.href.indexOf("&page=")+6));if(isNaN(page))page=1;loadQuestions(page);return!1};var setFilterBy=function(rating){customFilterOptions.filter_rating=rating;var link=document.querySelector(widgetClassSelector+" .stjr-product-review-button-see-all-reviews");if(rating>0)link.style.display="block";else link.style.display="none";var rowSelected=document.querySelector(widgetClassSelector+" .stjr-product-review-histogram-row-selected");if(rowSelected)rowSelected.className=rowSelected.className.replace("stjr-product-review-histogram-row-selected","");var target=document.querySelector(widgetClassSelector+" .stjr-product-review-histogram-row-clickable_"+rating);if(target)target.className+=" stjr-product-review-histogram-row-selected";var filterByDropdown=document.querySelector(widgetClassSelector+" #stjr-product-review-page-widget-filter__field-filter-by"),el=filterByDropdown.querySelector(".stjr-dropdown-selected-content span");target=filterByDropdown.querySelector('button[data-value="'+(rating==""?"0":rating)+'"]');el.textContent=target.textContent;el=filterByDropdown.querySelector(".stjr-dropdown-option-active");el.className=el.className.replace("stjr-dropdown-option-active","");target.parentElement.className+=" stjr-dropdown-option-active";var event=new Event("backButton");document.querySelector("body").dispatchEvent(event);reviewsTabClick();loadReviews(1)};var setSortBy=function(sort){customFilterOptions.sort_by=sort;loadReviews(1)};var filterByRow=function(e){var target=e.currentTarget;var rating=parseInt(target.dataset.rating);setFilterBy(rating);e.preventDefault();return!1};var clearFilterClick=function(e){setFilterBy("");e.preventDefault();return!1};var helpfulVote=function(element){element.addEventListener("click",helpfulVoteClick)};var helpfulVoteNo=function(element){element.addEventListener("click",helpfulVoteNoClick)};var helpfulVoteClick=function(e){var parent=e.target.closest("[data-url]");if(parent.querySelector(".js-loading").classList.contains("active"))return;var btn=parent.querySelector(".js-helpful-button"),noBtn=parent.querySelector(".js-helpful-no-button"),voteNum=btn.classList.contains("active")?0:1,voteIdStr=parent.dataset.vote_id?"&vote_id="+parent.dataset.vote_id:"";if(btn.classList.contains("active")){parent.classList.remove("active");btn.classList.remove("active");parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Was this review helpful?")}else{parent.classList.add("active");btn.classList.add("active");parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Thanks for your feedback!")}
var el=parent,url=el.getAttribute("data-url")+"/p?"+voteIdStr,objectId=el.getAttribute("data-object"),typeId=el.getAttribute("data-type"),name=el.getAttribute("id"),value=STJRV2.readCookie(name),posVoteCounter=parent.querySelector(".js-pos-vote-count"),negVoteCounter=parent.querySelector(".js-neg-vote-count");var posVotes=parseInt(posVoteCounter.innerText?posVoteCounter.innerText:0)+(voteNum?1:-1);var negVotes=parseInt(negVoteCounter.innerText?negVoteCounter.innerText:0)-(noBtn.classList.contains("active")?voteNum:0);posVoteCounter.innerText=posVotes;negVoteCounter.innerText=negVotes;if(isPreviewMode==!0)return;if(!value||!RegExp("^(("+objectId+")\\|(pos)\\|(\\d+)\\|("+posVoteCounter+")\\|("+negVoteCounter+"))$").test(value)){parent.querySelector(".js-loading").classList.add("active");STJRV2.ReviewsWidget["voteCallback_"+objectId]=function(resp){parent.dataset.vote_id=resp.vote_id;STJRV2.createVoteCookies(name,objectId,resp.vote_id,"pos",posVotes,negVotes,voteNum);parent.querySelector(".js-loading").classList.remove("active")};STJRV2.jsonP(url,function(data){})}else parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Thanks for your feedback!")};var helpfulVoteNoClick=function(e){var parent=e.target.closest("[data-url]");if(parent.querySelector(".js-loading").classList.contains("active"))return;var btn=parent.querySelector(".js-helpful-no-button"),yesBtn=parent.querySelector(".js-helpful-button"),voteNum=btn.classList.contains("active")?0:-1,voteIdStr=parent.dataset.vote_id?"&vote_id="+parent.dataset.vote_id:"";if(btn.classList.contains("active")){parent.classList.remove("active");btn.classList.remove("active");parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Was this review helpful?")}else{parent.classList.add("active");btn.classList.add("active");parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Thanks for your feedback!")}
var el=parent,url=el.getAttribute("data-url")+"/n?"+voteIdStr,objectId=el.getAttribute("data-object"),typeId=el.getAttribute("data-type"),name=el.getAttribute("id"),value=STJRV2.readCookie(name),posVoteCounter=parent.querySelector(".js-pos-vote-count"),negVoteCounter=parent.querySelector(".js-neg-vote-count");var posVotes=parseInt(posVoteCounter.innerText?posVoteCounter.innerText:0)+(yesBtn.classList.contains("active")?voteNum:0);var negVotes=parseInt(negVoteCounter.innerText?negVoteCounter.innerText:0)+(voteNum<0?1:-1);posVoteCounter.innerText=posVotes;negVoteCounter.innerText=negVotes;yesBtn.classList.remove("active");if(isPreviewMode==!0)return;if(!value||!RegExp("^(("+objectId+")\\|(neg)\\|(\\d+)\\|("+posVoteCounter+")\\|("+negVoteCounter+"))$").test(value)){parent.querySelector(".js-loading").classList.add("active");STJRV2.ReviewsWidget["voteCallback_"+objectId]=function(resp){parent.dataset.vote_id=resp.vote_id;STJRV2.createVoteCookies(name,objectId,resp.vote_id,"neg",posVotes,negVotes,voteNum);parent.querySelector(".js-loading").classList.remove("active")};STJRV2.jsonP(url,function(script){scriptElement=script})}else parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Thanks for your feedback!")};var reviewsTabClick=function(){var reviewsTab=document.querySelector(widgetClassSelector+" .stjr-product-review-page-widget-header__tab-reviews"),qaTab=document.querySelector(widgetClassSelector+" .stjr-product-review-page-widget-header__tab-qa"),reviewList=document.querySelector(widgetClassSelector+" .stjr-reviews-page-reviews"),qaList=document.querySelector(widgetClassSelector+" .stjr-reviews-page-questions"),o=document.querySelector(widgetClassSelector+" .stjr-product-review-page-widget-header__write-review-button .stjr-sj-button-write-review"),qs=document.querySelectorAll(widgetClassSelector+" .stjr-sj-button-write-question"),writeReviewDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-page-write-review"),writeQuestionDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-page-write-question"),writeAnswerDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-page-write-answer"),tabBorder1=document.querySelector(widgetClassSelector+" .stjr-product-review-page-widget-header__tab-reviews-border-qa-active"),tabBorder2=document.querySelector(widgetClassSelector+" .stjr-product-review-page-widget-header__tab-qa-border-qa-active");if(!reviewsTab||reviewsTab.className=="stjr-product-review-page-widget-header__tab-reviews stjr-product-review-page-widget-header__tab-active")return;tabBorder1.className=tabBorder1.className.replace("stjr-product-review-page-widget-header__tab-reviews-border-qa-active","stjr-product-review-page-widget-header__tab-reviews-border-review-active");tabBorder2.className=tabBorder2.className.replace("stjr-product-review-page-widget-header__tab-qa-border-qa-active","stjr-product-review-page-widget-header__tab-qa-border-review-active");reviewsTab.className="stjr-product-review-page-widget-header__tab-reviews stjr-product-review-page-widget-header__tab-active";qaTab.className="stjr-product-review-page-widget-header__tab-qa";qaList.style.display="none";if(reviewListEmpty&&enableWriteReview){reviewList.style.display="none";writeReviewDiv.style.display="block"}else{reviewList.style.display="block";writeReviewDiv.style.display="none"}
writeQuestionDiv.style.display="none";writeAnswerDiv.style.display="none"};var qaTabClick=function(){var reviewsTab=document.querySelector(widgetClassSelector+" .stjr-product-review-page-widget-header__tab-reviews"),qaTab=document.querySelector(widgetClassSelector+" .stjr-product-review-page-widget-header__tab-qa"),reviewList=document.querySelector(widgetClassSelector+" .stjr-reviews-page-reviews"),qaList=document.querySelector(widgetClassSelector+" .stjr-reviews-page-questions"),o=document.querySelector(widgetClassSelector+" .stjr-product-review-page-widget-header__write-review-button .stjr-sj-button-write-review"),qs=document.querySelectorAll(widgetClassSelector+" .stjr-sj-button-write-question"),writeReviewDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-page-write-review"),writeQuestionDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-page-write-question"),tabBorder1=document.querySelector(widgetClassSelector+" .stjr-product-review-page-widget-header__tab-reviews-border-review-active"),tabBorder2=document.querySelector(widgetClassSelector+" .stjr-product-review-page-widget-header__tab-qa-border-review-active");if(qaTab.className=="stjr-product-review-page-widget-header__tab-qa stjr-product-review-page-widget-header__tab-active")return;tabBorder1.className=tabBorder1.className.replace("stjr-product-review-page-widget-header__tab-reviews-border-review-active","stjr-product-review-page-widget-header__tab-reviews-border-qa-active");tabBorder2.className=tabBorder2.className.replace("stjr-product-review-page-widget-header__tab-qa-border-review-active","stjr-product-review-page-widget-header__tab-qa-border-qa-active");reviewsTab.className="stjr-product-review-page-widget-header__tab-reviews";qaTab.className="stjr-product-review-page-widget-header__tab-qa stjr-product-review-page-widget-header__tab-active";reviewList.style.display="none";writeReviewDiv.style.display="none";if(questionListEmpty){qaList.style.display="none";writeQuestionDiv.style.display="block"}else{qaList.style.display="block";writeQuestionDiv.style.display="none"}};var searchKeyword=function(e){var keyword=e.target.value;customFilterOptions.search_keyword=keyword?keyword:null;if(!STJRV2.isEventTrusted(e)||e.code!=="Enter")return;loadReviews(1)};var dropdownClose=function(e){document.querySelector("body").removeEventListener("click",dropdownClose);uls=document.querySelectorAll(".stjr-dropdown-interactive .stjr-dropdown-inner ul");for(var i=0;i<uls.length;i++)uls[i].style.display="none"};var dropdown=function(e){e.preventDefault();e.stopPropagation();if(e.target.closest(".stjr-dropdown-option-disabled")){return}
var ul=this.querySelector("ul");if(!ul)return;var cur=ul.style.display;dropdownClose();var target=e.target;if(target.pathLength)target=target.parentElement.parentElement;if(target.className&&target.className.baseVal&&target.className.baseVal.indexOf("stjr-dropdown-up-down-caret")>=0)target=target.parentElement;if(target.className.indexOf("stjr-dropdown-text-content")>=0)target=target.parentElement;if(target.className.indexOf("stjr-dropdown-selected-content")>=0){if(cur=="block")ul.style.display="none";else{ul.style.display="block";document.querySelector("body").addEventListener("click",dropdownClose)}}else{ul.style.display="none";var el=this.querySelector(".stjr-dropdown-selected-content span");el.textContent=target.textContent;el=this.querySelector(".stjr-dropdown-option-active");el.className=el.className.replace("stjr-dropdown-option-active","");target.parentElement.className+=" stjr-dropdown-option-active";var val=target.dataset.value;if(this.id.indexOf("sort-by")>=0)setSortBy(val);else if(this.id.indexOf("filter-by")>=0)setFilterBy(val);}};var writeReviewButtonClick=function(e){var writeReviewDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-page-write-review"),reviewListDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-page-reviews"),writeQuestionDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-page-write-question"),reviewsTab=document.querySelector(widgetClassSelector+" .stjr-product-review-page-widget-header__tab-reviews");if(writeReviewDiv==null)return;if(reviewsTab)reviewsTabClick();writeReviewDiv.style.display="block";reviewListDiv.style.display="none";if(writeQuestionDiv)writeQuestionDiv.style.display="none";if(!reviewListEmpty)SJTRUtils.scrollToElement(writeReviewDiv);};var writeQuestionButtonClick=function(e){var writeQuestionDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-page-write-question"),questionListDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-page-questions"),writeAnswerDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-page-write-answer"),qaTab=document.querySelector(widgetClassSelector+" .stjr-product-review-page-widget-header__tab-qa");if(writeQuestionDiv==null)return;if(qaTab)qaTabClick();writeAnswerDiv.style.display="none";writeQuestionDiv.style.display="block";questionListDiv.style.display="none";SJTRUtils.scrollToElement(writeQuestionDiv)};var viewAnswersButtonClick=function(e){var answers=this.parentElement.parentElement.querySelector(".stjr-product-review-page-widget-question__answers .stjr-product-review-page-widget-answer__more");answers.style.display="block";this.parentElement.remove()};var answerButtonClick=function(e){var writeAnswerDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-page-write-answer"),questionListDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-page-questions"),questionContent=document.querySelector(widgetClassSelector+" .stjr-reviews-page-write-answer__question-content"),questionId=document.querySelector(widgetClassSelector+" #stjr-answer-form__field--id");if(writeAnswerDiv==null)return;writeAnswerDiv.style.display="block";questionListDiv.style.display="none";questionId.value=e.target.dataset.question;questionContent.innerHTML=e.target.dataset.content;e.preventDefault();SJTRUtils.scrollToElement(writeAnswerDiv);return!1};var backButton=function(e){e.preventDefault();if(questionListEmpty)return;var writeQuestionDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-page-write-question"),questionListDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-page-questions");if(writeQuestionDiv==null)return;writeQuestionDiv.style.display="none";questionListDiv.style.display="block"};var backAButton=function(e){e.preventDefault();var writeAnswerDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-page-write-answer"),questionListDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-page-questions");if(writeAnswerDiv==null)return;writeAnswerDiv.style.display="none";questionListDiv.style.display="block"};var confirmButton=function(e){e.preventDefault();var writeQuestionDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-page-write-question"),writeQuestionDiv2=document.querySelector(widgetClassSelector+" .stjr-question-form"),confirmDiv=document.querySelector(widgetClassSelector+" .stjr-question-confirmation"),questionListDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-page-questions");if(confirmDiv==null)return;writeQuestionDiv2.style.display="block";confirmDiv.style.display="none";if(questionListEmpty){questionListDiv.style.display="none";writeQuestionDiv.style.display="block"}else{questionListDiv.style.display="block";writeQuestionDiv.style.display="none"}};var confirmAButton=function(e){e.preventDefault();var writeAnswerDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-page-write-answer"),writeAnswerDiv2=document.querySelector(widgetClassSelector+" .stjr-answer-form"),confirmDiv=document.querySelector(widgetClassSelector+" .stjr-answer-confirmation"),questionListDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-page-questions");if(confirmDiv==null)return;writeAnswerDiv.style.display="none";writeAnswerDiv2.style.display="block";confirmDiv.style.display="none";questionListDiv.style.display="block"};var validatorClear=function(e){e.target.className="";var fieldsError=e.target.parentElement.querySelectorAll("div.stjr-validator-error");for(var i=0;i<fieldsError.length;i++)fieldsError[i].style.display="none"};var submitQuestion=function(e){e.preventDefault();var contentInput=document.querySelector("#stjr-question-form__field--content"),nameInput=document.querySelector("#stjr-question-form__field--name"),emailInput=document.querySelector("#stjr-question-form__field--email"),contentError,nameError,emailError,bError=!1;if(contentInput.value.replace(" ","").length==0){contentError=document.querySelector("#stjr-question-form__field--content-error");contentError.style.display="block";contentInput.className="stjr-validator-error";bError=!0}
if(contentInput.value.replace(" ","").length>150){contentError=document.querySelector("#stjr-question-form__field--content-max-error");contentError.style.display="block";contentInput.className="stjr-validator-error";bError=!0}
if(contentInput.value.replace(" ","").length>0&&contentInput.value.replace(" ","").length<10){contentError=document.querySelector("#stjr-question-form__field--content-min-error");contentError.style.display="block";contentInput.className="stjr-validator-error";bError=!0}
nameInput.value=nameInput.value.replace(/ +(?= )/g,"");var names=nameInput.value.split(" ");if(nameInput.value.replace(" ","").length==0||names.length<2||names[0].replace(" ","").length==0||names[1].replace(" ","").length==0){nameError=document.querySelector("#stjr-question-form__field--name-error");nameError.style.display="block";nameInput.className="stjr-validator-error";bError=!0}
if(!/^[a-zA-Z-]+\s[a-zA-Z-\s]+$/i.test(nameInput.value)){nameError=document.querySelector("#stjr-question-form__field--name-error-2");nameError.style.display="block";nameInput.className="stjr-validator-error";bError=!0}
if(emailInput.value.replace(" ","").length==0){emailError=document.querySelector("#stjr-question-form__field--email-error");emailError.style.display="block";emailInput.className="stjr-validator-error";bError=!0}
if(bError)return!1;function submitOk(data){var writeQuestionDiv=document.querySelector(widgetClassSelector+" .stjr-question-form"),confirmDiv=document.querySelector(widgetClassSelector+" .stjr-question-confirmation");writeQuestionDiv.style.display="none";confirmDiv.style.display="block"}
var submitBtn=document.querySelector(widgetClassSelector+" .stjr-button--write-question"),backBtn=document.querySelector(widgetClassSelector+" .stjr-button--back-questions"),loading=document.querySelector(widgetClassSelector+" .stjr-button--qregistration-loading"),backBtnDisplay=backBtn.style.display;submitBtn.style.display="none";backBtn.style.display="none";loading.style.display="inline-block";if(isPreviewMode==!0){var submitBtn=document.querySelector(widgetClassSelector+" .stjr-button--write-question"),backBtn=document.querySelector(widgetClassSelector+" .stjr-button--back-questions"),loading=document.querySelector(widgetClassSelector+" .stjr-button--qregistration-loading");submitBtn.style.display="inline-block";backBtn.style.display=backBtnDisplay;loading.style.display="none";submitOk();return}
STJRV2.ReviewsWidget["submitQCallback_"+widgetNumber]=function(data){var submitBtn=document.querySelector(widgetClassSelector+" .stjr-button--write-question"),backBtn=document.querySelector(widgetClassSelector+" .stjr-button--back-questions"),loading=document.querySelector(widgetClassSelector+" .stjr-button--qregistration-loading");submitBtn.style.display="inline-block";backBtn.style.display=backBtnDisplay;loading.style.display="none";if(data&&data.status=="ERROR"){alert(data.message);return!1}
submitOk(data)};var url=STJRV2.getBase()+"/widget-product-write-question-submit/fragrancex.com/"+widgetNumber,adds="content="+encodeURIComponent(contentInput.value)+"&"+"name="+encodeURIComponent(nameInput.value)+"&"+"email="+encodeURIComponent(emailInput.value);if(productData&&productData.product_id)adds+="&sku="+(productData.sku?productData.sku:productData.product_id);STJRV2.jsonP(url+"?"+adds,function(script){scriptElement=script});return!1};var submitAnswer=function(e){e.preventDefault();var contentInput=document.querySelector("#stjr-answer-form__field--content"),nameInput=document.querySelector("#stjr-answer-form__field--name"),emailInput=document.querySelector("#stjr-answer-form__field--email"),qidInput=document.querySelector("#stjr-answer-form__field--id"),contentError,nameError,emailError,bError=!1;if(contentInput.value.replace(" ","").length==0){contentError=document.querySelector("#stjr-answer-form__field--content-error");contentError.style.display="block";contentInput.className="stjr-validator-error";bError=!0}
if(contentInput.value.replace(" ","").length>0&&contentInput.value.replace(" ","").length<10){contentError=document.querySelector("#stjr-answer-form__field--content-min-error");contentError.style.display="block";contentInput.className="stjr-validator-error";bError=!0}
nameInput.value=nameInput.value.replace(/ +(?= )/g,"");var names=nameInput.value.split(" ");if(nameInput.value.replace(" ","").length==0||names.length<2||names[0].replace(" ","").length==0||names[1].replace(" ","").length==0){nameError=document.querySelector("#stjr-answer-form__field--name-error");nameError.style.display="block";nameInput.className="stjr-validator-error";bError=!0}
if(!/^[a-zA-Z-]+\s[a-zA-Z-\s]+$/i.test(nameInput.value)){nameError=document.querySelector("#stjr-answer-form__field--name-error-2");nameError.style.display="block";nameInput.className="stjr-validator-error";bError=!0}
if(emailInput.value.replace(" ","").length==0){emailError=document.querySelector("#stjr-answer-form__field--email-error");emailError.style.display="block";emailInput.className="stjr-validator-error";bError=!0}
if(bError)return!1;function submitOk(data){var writeAnswerDiv=document.querySelector(widgetClassSelector+" .stjr-answer-form"),confirmDiv=document.querySelector(widgetClassSelector+" .stjr-answer-confirmation");writeAnswerDiv.style.display="none";confirmDiv.style.display="block"}
var submitBtn=document.querySelector(widgetClassSelector+" .stjr-button--write-answer"),backBtn=document.querySelector(widgetClassSelector+" .stjr-button--backa-questions"),loading=document.querySelector(widgetClassSelector+" .stjr-button--aregistration-loading"),backBtnDisplay=backBtn.style.display;submitBtn.style.display="none";backBtn.style.display="none";loading.style.display="inline-block";if(isPreviewMode==!0){var submitBtn=document.querySelector(widgetClassSelector+" .stjr-button--write-answer"),backBtn=document.querySelector(widgetClassSelector+" .stjr-button--backa-questions"),loading=document.querySelector(widgetClassSelector+" .stjr-button--aregistration-loading");submitBtn.style.display="inline-block";backBtn.style.display=backBtnDisplay;loading.style.display="none";submitOk();return}
STJRV2.ReviewsWidget["submitACallback_"+widgetNumber]=function(data){var submitBtn=document.querySelector(widgetClassSelector+" .stjr-button--write-answer"),backBtn=document.querySelector(widgetClassSelector+" .stjr-button--backa-questions"),loading=document.querySelector(widgetClassSelector+" .stjr-button--aregistration-loading");submitBtn.style.display="inline-block";backBtn.style.display=backBtnDisplay;loading.style.display="none";if(data&&data.status=="ERROR"){alert(data.message);return!1}
submitOk(data)};var url=STJRV2.getBase()+"/widget-product-write-answer-submit/fragrancex.com/"+widgetNumber,adds=query+"&qid="+qidInput.value+"&content="+encodeURIComponent(contentInput.value)+"&";adds+="name="+encodeURIComponent(nameInput.value)+"&";adds+="email="+encodeURIComponent(emailInput.value);if(productData&&productData.product_id)adds+="&sku="+productData.sku?productData.sku:productData.product_id;STJRV2.jsonP(url+"?"+adds,function(script){scriptElement=script});return!1};var update=function(e){var widgetContainer=document.querySelector(widgetClassSelector+" .js-stjr-product-review-page-widget");if((widgetContainer&&widgetContainer.offsetWidth<768&&widgetContainer.offsetWidth!==0)||(widgetContainer&&widgetContainer.offsetWidth===0&&document.body.offsetWidth<768)){widgetContainer.classList.add("stjr-widget--mobile");widgetContainer.classList.remove("stjr-widget--xl")}else if(widgetContainer){if(widgetContainer.offsetWidth>1200&&document.querySelector("body").offsetWidth==widgetContainer.offsetWidth)widgetContainer.classList.add("stjr-widget--xl");else widgetContainer.classList.remove("stjr-widget--xl");widgetContainer.classList.remove("stjr-widget--mobile")}};timer=setInterval(init,1000);return{reset:function(element){element.innerHTML="";element.classList.remove("stjr-init");const regex=new RegExp(/stjr-callback-\d/,"g");if(element.className.match(regex))element.className=element.className.replace(regex,"");timer=setInterval(init,1000)},}})();STJRV2.ProductWriteReviewWidget=function(){var that,additionalOptions,star=0,isPreviewMode=!1,id,widgetNumber,widgetClassSelector=null;that=this;var _init=function(opts){widgetNumber=STJRV2.getNextWidgetNumber();id='stjr-widget'+widgetNumber;STJRV2.ReviewsWidget['receiveCallback_'+widgetNumber]=function(resp){STJRV2.setResponse('response'+resp.callback,resp)};var url=STJRV2.subBaseToCDN()+'/widget-product-write-review/fragrancex.com/'+widgetNumber;isPreviewMode=typeof opts.test!='undefined'?opts.test:!1;additionalOptions='',options={},query='';options=Object.assign({},opts);query=STJRV2.Product.getQueryString(Object.assign({},options),null);additionalOptions=query;STJRV2.jsonP(url+"?"+query,widgetNumber,function(script){render()});var cont=document.getElementById(opts.id+'Inner');if(cont==null){opts.id='reviewsWidget';cont=document.createElement('div');cont.id=opts.id+'Inner';document.getElementsByTagName('body')[0].appendChild(cont)}
document.getElementById(opts.id+'Inner').innerHTML='<div class="stjr-product-write-review-widget"></div>';widgetClassSelector='.stjr-product-write-review-widget'};var render=function(){var sj_responses=STJRV2.getResponse('response'+widgetNumber);if(!sj_responses){window.setTimeout(render.bind(this,widgetNumber),500);return}
if(sj_responses.loaded)
return;sj_responses.loaded=!0;var element=document.querySelector(".stjr-product-write-review-widget");if(!element)
return;element.innerHTML=sj_responses.html;var o=document.querySelector(".stjr-product-write-review-widget .stjr-review-form__stars"),btn=document.querySelector(".stjr-product-write-review-widget .stjr-button--write-review"),btnBack=document.querySelector(".stjr-product-write-review-widget .stjr-button--back-reviews"),btnConfirm=document.querySelector(".stjr-product-write-review-widget .stjr-button--confirm-ok"),titleInput=document.querySelector(".stjr-product-write-review-widget #stjr-review-form__field--title"),contentInput=document.querySelector(".stjr-product-write-review-widget #stjr-review-form__field--content"),orderIdInput=document.querySelector(".stjr-product-write-review-widget #stjr-review-form__field--order-id"),nameInput=document.querySelector(".stjr-product-write-review-widget #stjr-review-form__field--name"),emailInput=document.querySelector(".stjr-product-write-review-widget #stjr-review-form__field--email"),customInputs=document.querySelectorAll(".stjr-product-write-review-widget .stjr-review-form__field--custom"),btnUpload=document.querySelector(".stjr-product-write-review-widget .stjr-button--upload-photo-review"),photoBoxes=document.querySelector(".stjr-product-write-review-widget .stjr-review-form__photo-boxes .stjr-review-form__photo-box");if(o==null)
return;STJRV2.loadStyleSheet((STJRV2.isAbsolute()?"https://static.sitejabber.com/":STJRV2.getBase())+"/js/noty/noty"+(STJRV2.isAbsolute()?".min.1631207691":"")+".css");STJRV2.loadScript("/js/notifications"+(STJRV2.isAbsolute()?".min.1631207691":"")+".js");STJRV2.loadScript("/js/fileuploader"+(STJRV2.isAbsolute()?".min.1631207691":"")+".js",function(){var tout=null,uploader=new qq.FileUploader({element:btnUpload,action:btnUpload.dataset.url,allowedExtensions:["jpg","gif","png"],sizeLimit:5242880,uploadMessage:"Upload photo",onComplete:function(id,fileName,response){var pbp=document.querySelector("#dvProgressPlaque"),pb=document.querySelector("#dvProgressBar");pbp.remove();pb.remove();if(tout)clearTimeout(tout);displayNotification(response.message,response.status);tout=setTimeout(function(){var nm=document.querySelector("#noty_layout__top");if(nm!=null)nm.remove();tout=null},4000);function deleteButtonClick(e){e.target.parentElement.parentElement.remove();e.preventDefault();return}
if(response.status=="OK"){var newHtml='<div class="stjr-review-form__photo-box"><div class="stjr-review-form__photo-box-delete-container"><i class="custom-icon-window-close"></i>';newHtml+='</div><img src="'+response.thumb+"?"+Math.random()+'" data-key="'+response.key+'" width="96" /><input type="text" placeholder="caption" class="stjr-review-form__photo-caption" /></div>';photoBoxes.insertAdjacentHTML("beforeBegin",newHtml);var ps=document.querySelectorAll(widgetClassSelector+" .stjr-review-form__photo-boxes .stjr-review-form__photo-box");if(ps.length>=2){photoBox=ps[ps.length-2];photoBox.querySelector("i").addEventListener("click",deleteButtonClick)}}
return!0},onSubmit:function(id,fileName){return Promise.resolve().then(function(){var nm=document.querySelector("#noty_layout__top");if(nm!=null)nm.remove();var body=document.querySelector("body"),newHtml='<div id="dvProgressPlaque" style="opacity:0.3;filter:Alpha(Opacity=30);background-color:#000000;width:100%;height:'+String(body.clientHeight)+'px;position:fixed;top:0;bottom:0;;left:0;z-index:900;"></div>';body.insertAdjacentHTML("afterEnd",newHtml);var pghtml='<div id="dvProgressBar" style="z-index:2000;width:150px;height:40px;padding:10px;background-color:#ffffff;'+'border:5px solid #666666;position:fixed;top:50%;left:50%;margin-top:-20px;margin-left:-75px;">'+'<div id="dvProgressBarLabel">Progress:0%</div><div id="dvProgressBarBar" style="width:0;margin-top:10px;background-color:#0000dd;height:10px;"></div></div>';body.insertAdjacentHTML("afterEnd",pghtml)})},onProgress:function(id,fileName,loaded,total){var pbl=document.querySelector("#dvProgressBarLabel"),pbb=document.querySelector("#dvProgressBarBar"),perc=Math.round((100*loaded)/total,2);pbl.innerHTML="Progress:"+String(perc)+"%";pbb.style.width=String(perc)+"%"},onError:function(code){if(tout)clearTimeout(tout);var nm=document.querySelector("#noty_layout__top");if(nm!=null)nm.remove();if(code=="sizeError")displayNotification("Please upload a file no larger than 5M.","error");else if(code=="typeError")displayNotification("Please upload a JPG, GIF, or PNG file.","error");else displayNotification("An error has occured while uploading the photo. Please try again.","error");tout=setTimeout(function(){var nm=document.querySelector("#noty_layout__top");if(nm!=null)nm.remove();tout=null},4000)},})});var i;for(i=0;i<customInputs.length;i++){inputs=document.querySelectorAll(".stjr-review-form__field--custom-"+i+" input,.stjr-review-form__field--custom-"+i+" textarea");for(var j=0;j<inputs.length;j++){var input=inputs[j];input.addEventListener('focus',validatorClear)}}
o.addEventListener('mousemove',mousemove);o.addEventListener('mouseleave',leave);o.addEventListener('click',click);btn.addEventListener('click',submitReview);btnBack.addEventListener('click',backButton);btnConfirm.addEventListener('click',confirmButton);titleInput.addEventListener('focus',validatorClear);contentInput.addEventListener('focus',validatorClear);if(orderIdInput)
orderIdInput.addEventListener('focus',validatorClear);nameInput.addEventListener('focus',validatorClear);emailInput.addEventListener('focus',validatorClear);var st=document.querySelectorAll(widgetClassSelector+" .stars--widgets--medium .star--medium");for(i=0;i<star;i++){if(st[i]==undefined)
continue;if(st[i].className.indexOf('custom-icon-star2-empty')>=0)
st[i].className=st[i].className.replace(/\bcustom-icon-star2-empty\b/g,"custom-icon-star2-full");}
var event=new Event('writeReviewLoaded');document.querySelector('body').dispatchEvent(event);return this};var backButton=function(e){e.preventDefault();var event=new Event('backButton');document.querySelector('body').dispatchEvent(event)};var confirmButton=function(e){e.preventDefault();var writeReviewDiv=document.querySelector(widgetClassSelector+' .stjr-review-form'),confirmDiv=document.querySelector(widgetClassSelector+' .stjr-review-confirmation');writeReviewDiv.style.display="block";confirmDiv.style.display="none";var event=new Event('confirmButton');document.querySelector('body').dispatchEvent(event)};var mousemove=function(e){var p=document.querySelector(widgetClassSelector+" .stars--widgets--medium").getBoundingClientRect(),st=document.querySelectorAll(widgetClassSelector+" .stars--widgets--medium .star--medium");if(!st.length)
return;var starLength=st[0].offsetWidth,t=Math.max(Math.min(Math.ceil((e.clientX-p.left)/starLength),5),1),i;for(i=0;i<t;i++){if(st[i]==undefined)
continue;if(st[i].className.indexOf('custom-icon-star2-empty')>=0)
st[i].className=st[i].className.replace(/\bcustom-icon-star2-empty\b/g,"custom-icon-star2-full");}
for(i=t;i<5;i++){if(st[i]==undefined)
continue;if(st[i].className.indexOf('custom-icon-star2-full')>=0)
st[i].className=st[i].className.replace(/\bcustom-icon-star2-full\b/g,"custom-icon-star2-empty");}};var leave=function(){var st=document.querySelectorAll(widgetClassSelector+" .stars--widgets--medium .star--medium");for(var i=star;i<5;i++){if(st[i]==undefined)
continue;if(st[i].className.indexOf('custom-icon-star2-full')>=0)
st[i].className=st[i].className.replace(/\bcustom-icon-star2-full\b/g,"custom-icon-star2-empty");}};var click=function(e){var pageX;if(e.type=='touchstart')
pageX=e.originalEvent.touches[0].pageX;else pageX=e.clientX;if(pageX==undefined)
return;var p=document.querySelector(widgetClassSelector+" .stars--widgets--medium").getBoundingClientRect(),st=document.querySelectorAll(widgetClassSelector+" .stars--widgets--medium .star--medium");if(!st.length)
return;var starLength=st[0].offsetWidth,i;star=Math.max(Math.min(Math.ceil((pageX-p.left)/starLength),5),1);for(i=0;i<star;i++){if(st[i]==undefined)
continue;if(st[i].className.indexOf('custom-icon-star2-full')>=0)
st[i].className=st[i].className.replace(/\bcustom-icon-star2-full\b/g,"custom-icon-star2");}
for(i=star;i<5;i++){if(st[i]==undefined)
continue;st[i].className=st[i].className.replace(/\bcustom-icon-star2(-full|-empty)?\b/g,"custom-icon-star2-empty")}
var ratingError=document.querySelector(widgetClassSelector+" #stjr-review-form__field--rating-error");ratingError.style.display="none"};var validatorClear=function(e){e.target.className='';var fieldErrors=e.target.parentElement.querySelectorAll(widgetClassSelector+' .stjr-validator-error');fieldErrors.forEach(el=>{el.style.display="none"})};var submitReview=function(e){e.preventDefault();var titleInput=document.querySelector(widgetClassSelector+" #stjr-review-form__field--title"),contentInput=document.querySelector(widgetClassSelector+" #stjr-review-form__field--content"),orderIdInput=document.querySelector(widgetClassSelector+" #stjr-review-form__field--order-id"),nameInput=document.querySelector(widgetClassSelector+" #stjr-review-form__field--name"),emailInput=document.querySelector(widgetClassSelector+" #stjr-review-form__field--email"),photosKeyInput=document.querySelector(widgetClassSelector+" #stjr-review-form__field--photos-key"),customInputs=document.querySelectorAll(widgetClassSelector+" .stjr-review-form__field--custom"),ratingError,titleError,contentError,orderIdError,nameError,emailError,input,bError=!1;if(star==0){ratingError=document.querySelector(widgetClassSelector+" #stjr-review-form__field--rating-error");ratingError.style.display="block";bError=!0}
if(titleInput.value.replace(/(^\s+|\s+$)/g,'').length==0){titleError=document.querySelector(widgetClassSelector+" #stjr-review-form__field--title-error");titleError.style.display="block";titleInput.className="stjr-validator-error";bError=!0}
if(contentInput.value.replace(/(^\s+|\s+$)/g,'').length==0){contentError=document.querySelector(widgetClassSelector+" #stjr-review-form__field--content-error");contentError.style.display="block";contentInput.className="stjr-validator-error";bError=!0}
var i,j;for(i=0;i<customInputs.length;i++){inputs=document.querySelectorAll(widgetClassSelector+" .stjr-review-form__field--custom-"+i+" input,.stjr-review-form__field--custom-"+i+" textarea");var bEmpty=!0;for(j=0;j<inputs.length;j++){input=inputs[j];if(input.type=='checkbox'){if(input.checked)
bEmpty=!1}else if(input.type=='radio'){if(input.checked)
bEmpty=!1}else if(input.value.replace(/(^\s+|\s+$)/g,'').length!=0)
bEmpty=!1}
if(bEmpty){var divError=document.querySelector(widgetClassSelector+" .stjr-review-form__field--custom-"+i+" div.stjr-validator-error");if(!divError)
continue;divError.style.display="block";input.className="stjr-validator-error";bError=!0}}
if(orderIdInput&&orderIdInput.hasAttribute('required')&&orderIdInput.value.replace(/(^\s+|\s+$)/g,'').length==0){orderIdError=document.querySelector(widgetClassSelector+" #stjr-review-form__field--order-id-error");orderIdError.style.display="block";orderIdInput.className="stjr-validator-error";bError=!0}
nameInput.value=nameInput.value.replace(/ +(?= )/g,'');var names=nameInput.value.split(' '),errorA=!1;if(nameInput.value.replace(/(^\s+|\s+$)/g,'').length==0||names.length<2||names[0].replace(/(^\s+|\s+$)/g,'').length==0||names[1].replace(/(^\s+|\s+$)/g,'').length==0){nameError=document.querySelector(widgetClassSelector+" #stjr-review-form__field--name-error");nameError.style.display="block";nameInput.className="stjr-validator-error";bError=!0;errorA=!0}
if(!errorA&&!/^[a-zA-Z-]+\s[a-zA-Z-\s]+$/i.test(nameInput.value)){nameError=document.querySelector(widgetClassSelector+" #stjr-review-form__field--name-error-2");nameError.style.display="block";nameInput.className="stjr-validator-error";bError=!0}
if((emailInput.value.replace(/(^\s+|\s+$)/g,'').length==0)||!/\S+@\S+\.\S+/.test(emailInput.value)){emailError=document.querySelector(widgetClassSelector+" #stjr-review-form__field--email-error");emailError.style.display="block";emailInput.className="stjr-validator-error";bError=!0}
if(bError)
return!1;function submitOk(data){var writeReviewDiv=document.querySelector(widgetClassSelector+' .stjr-review-form'),confirmDiv=document.querySelector(widgetClassSelector+' .stjr-review-confirmation');writeReviewDiv.style.display="none";confirmDiv.style.display="block";var event=new CustomEvent('submitOk',{data:data});document.querySelector('body').dispatchEvent(event)}
var submitBtn=document.querySelector(widgetClassSelector+' .stjr-button--write-review'),backBtn=document.querySelector(widgetClassSelector+' .stjr-button--back-reviews'),loading=document.querySelector(widgetClassSelector+' .stjr-button--registration-loading'),backBtnDisplay=backBtn.style.display;submitBtn.style.display="none";backBtn.style.display="none";loading.style.display="inline-block";if(isPreviewMode==!0){var submitBtn=document.querySelector(widgetClassSelector+' .stjr-button--write-review'),backBtn=document.querySelector(widgetClassSelector+' .stjr-button--back-reviews'),loading=document.querySelector(widgetClassSelector+' .stjr-button--registration-loading');submitBtn.style.display="inline-block";backBtn.style.display=backBtnDisplay;loading.style.display="none";submitOk();return}
STJRV2.ReviewsWidget['submitCallback_'+widgetNumber]=function(data){var submitBtn=document.querySelector(widgetClassSelector+' .stjr-button--write-review'),backBtn=document.querySelector(widgetClassSelector+' .stjr-button--back-reviews'),loading=document.querySelector(widgetClassSelector+' .stjr-button--registration-loading');submitBtn.style.display="inline-block";backBtn.style.display=backBtnDisplay;loading.style.display="none";var reviewPage=document.querySelector('.stjr-product-review-page-widget-filter');if(reviewPage)
SJTRUtils.scrollToElement(reviewPage,null);if(data&&data.status=='ERROR'){alert(data.message);return!1}
submitOk(data)};var url=STJRV2.getBase()+'/widget-product-write-review-submit/fragrancex.com/'+widgetNumber,adds=additionalOptions+'&rtitle='+encodeURIComponent(titleInput.value)+'&';adds+='content='+encodeURIComponent(contentInput.value)+'&';if(orderIdInput)
adds+='order_id='+encodeURIComponent(orderIdInput.value)+'&';adds+='name='+encodeURIComponent(nameInput.value)+'&';adds+='email='+encodeURIComponent(emailInput.value)+'&';adds+='rating='+star+'&';if(photosKeyInput)
adds+='photos_key='+encodeURIComponent(photosKeyInput.value);var photoBoxes=document.querySelectorAll('.stjr-review-form__photo-boxes .stjr-review-form__photo-box');for(i=0;i<photoBoxes.length-1;i++){var photoBox=photoBoxes[i],img=photoBox.querySelector("img");if(img==null)
continue;input=photoBox.querySelector("input");adds+='&upimages[]='+encodeURIComponent(img.dataset.key+'|'+input.value)}
for(i=0;i<customInputs.length;i++){inputs=document.querySelectorAll(widgetClassSelector+" .stjr-review-form__field--custom-"+i+" input,.stjr-review-form__field--custom-"+i+" textarea");for(j=0;j<inputs.length;j++){input=inputs[j];if(input.type=='checkbox'||input.type=='radio'){if(input.checked)
adds+='&'+input.name+'='+encodeURIComponent(input.value);}else adds+='&'+input.name+'='+encodeURIComponent(input.value)}}
STJRV2.jsonP(url+'?'+adds);return!1};return{init:function(options){_init(options)},reset:function(element){element.innerHTML='';element.classList.remove('stjr-init');const regex=new RegExp(/stjr-callback-\d/,'g');if(element.className.match(regex))
element.className=element.className.replace(regex,'');}}}();STJRV2.InstantFeedbackWidget=(function(){var that=this,char_msg,chars_msg,customFilterOptions={},id,isAbsolute=null,isPreviewMode=!1,lightbox=!1,customTrigger=!1,onDialogCloseCallbacks=[],options,productData,query="",questionListEmpty=!1,reviewListEmpty=!1,rtl=!1,scriptElement=null,star=0,starPrompt=!1,thank_you_msg,timer,widgetClassSelector=null,minChars=null,minCharsProduct=0,npsOptions=null,review_content=null,review_email=null,review_title=null,firstorderQuestionYesNo=null,consent=null,custom_questions=null,product_inputs=null,displayNameInput=null,widgetNumber;var init=function(){var element=document.querySelector(".stjr-instant-feedback:not(.stjr-init)");if(!element)return;widgetNumber=STJRV2.getNextWidgetNumber();var url=STJRV2.getBase()+"/widget-checkout/fragrancex.com/"+widgetNumber,attrOptions=STJRV2.getAttrObj(element),otherOptions=STJRV2.getConfig(),widgetName="InstantFeedbackWidget";element.classList.add("stjr-init","stjr-callback-"+widgetNumber,widgetName+"-"+widgetNumber);widgetClassSelector="."+widgetName+"-"+widgetNumber;id="stjr-widget"+widgetNumber;options=Object.assign({},otherOptions,attrOptions);customTrigger=typeof options.custom_trigger!="undefined"?options.custom_trigger:!1;isPreviewMode=typeof options.test!="undefined"?options.test:!1;if(!Object.values(options).length){STJRV2.ErrorHandler({status:"error",code:"403",message:"No order info configured on the page.",request:null});return}
productData={};query=STJRV2.Product.getQueryString(Object.assign({},options,productData),null);var initErrorCallback=null;STJRV2.setResponse("response"+widgetNumber,null);STJRV2.ReviewsWidget["receiveCallback_"+widgetNumber]=function(resp){thank_you_msg=resp.thank_you;chars_msg=resp.chars_left;char_msg=resp.char_left;STJRV2.setResponse("response"+resp.callback,resp)};STJRV2.jsonP(url+"?"+query,widgetNumber,function(script){if(!customTrigger){render(widgetNumber)}},initErrorCallback);clearInterval(timer)};var customRenderCall=function(){if(customTrigger){render(widgetNumber);customTrigger=!1}};var render=function(){var sj_responses=STJRV2.getResponse("response"+widgetNumber);if(!STJRV2.hasLoadedStyleSheet()||!sj_responses){window.setTimeout(render.bind(this,widgetNumber),500);return}
if(sj_responses.loaded)return;sj_responses.loaded=!0;STJRV2.setResponse("response"+widgetNumber,sj_responses);var element=document.querySelector(widgetClassSelector);if(!element)return;var cont=element;var floatContainer=cont.querySelector(".stjr-review-checkout-widget__floating");if(cont&&!options.test&&floatContainer&&cont.parentNode.tagName!=="BODY"&&cont.parentNode.parentNode.tagName!=="BODY"){var tempHtml=cont.outerHTML;cont.remove();document.getElementsByTagName("body")[0].insertAdjacentHTML("beforeend",tempHtml);element=document.querySelector(widgetClassSelector)}
var IFWidgetShown=new Event("STJRV2.instantFeedbackWidgetRender");document.querySelector("body").dispatchEvent(IFWidgetShown);element.innerHTML=sj_responses.html;var btnDialog=document.querySelector(widgetClassSelector+" .stjr-sj-button--dialog"),btnWrite=document.querySelector(widgetClassSelector+" .stjr-sj-button--write"),closeBtn=document.querySelector(widgetClassSelector+" .stjr-review-checkout-widget-body__close"),followUp=document.querySelector(widgetClassSelector+" .stjr-review-form__field--follow-up"),logo=document.querySelector(widgetClassSelector+" .stjr-review-checkout-widget-footer__link"),starsObj=document.querySelector(widgetClassSelector+" .stjr-review-checkout-widget-body__stars"),starInput=document.querySelector(widgetClassSelector+" .stjr-review-checkout-widget-body__stars .stars--widgets--medium"),starLinks=document.querySelectorAll(widgetClassSelector+" .stjr-review-checkout-widget-body__stars__link"),starRadios=document.querySelectorAll(widgetClassSelector+" .stars  input[type=radio]"),starCustoms=document.querySelectorAll(widgetClassSelector+" .stjr-review-checkout-widget-body__stars--custom");firstorderQuestionYesNo=document.querySelector(widgetClassSelector+" .stjr-review-form__field--firstorder-question-yes-no");minChars=document.querySelector(widgetClassSelector+" #stjr-review-checkout-widget-min-chars");minCharsProduct=document.querySelector(widgetClassSelector+" #stjr-review-checkout-widget-min-chars-product");npsOptions=document.querySelectorAll(widgetClassSelector+" .stjr-review-form__field__nps__option");review_content=document.querySelector(widgetClassSelector+" #stjr-review-form__field--content");review_email=document.querySelector(widgetClassSelector+" #stjr-review-form__field--email");review_title=document.querySelector(widgetClassSelector+" #stjr-review-form__field--title");review_title=document.querySelector(widgetClassSelector+" #stjr-review-form__field--title");date_of_experience=document.querySelector(widgetClassSelector+" #stjr-review-form__field--date-of-experience");consent=document.querySelector(widgetClassSelector+" #stjr-review-form__field--consent");custom_questions=document.querySelectorAll(widgetClassSelector+" .stjr-review-checkout-widget-review__custom");product_inputs=document.querySelectorAll(widgetClassSelector+" .stjr-review-checkout-widget-review__product__input");displayNameInput=document.querySelector(widgetClassSelector+" #stjr-review-form__field--name-display");if(minChars!==null&&typeof minChars==="object")minChars=minChars.value;if(minCharsProduct!==null&&typeof minCharsProduct==="object")minCharsProduct=minCharsProduct.value;if(btnWrite!==null){btnWrite.addEventListener("input",submitReviewClick);btnWrite.addEventListener("click",submitReviewClick);if(logo){logo.addEventListener("click",logoClick)}
review_content.addEventListener("click",inputClick);review_content.addEventListener("focus",inputClick);review_content.addEventListener("keyup",charCounter);review_content.addEventListener("keyup",reviewCounter);review_email.addEventListener("click",inputClick);review_email.addEventListener("focus",inputClick);for(var i=0;i<starLinks.length;i++)starLinks[i].addEventListener("click",starsLinkClick);if(starInput)starInput.setAttribute("title","");if(starsObj){Array.from(starsObj.querySelectorAll('input[type="radio"]')).forEach(function(el){el.addEventListener("change",starsClick)})}
for(var i=0;i<starCustoms.length;i++){starCustoms[i].addEventListener("click",starsCustomClick)}}
if(review_title!==null){review_title.addEventListener("click",inputClick);review_title.addEventListener("focus",inputClick);review_title.addEventListener("keyup",reviewCounter)}
if(date_of_experience!==null){date_of_experience.addEventListener("click",inputClick);date_of_experience.addEventListener("focus",inputClick)}
if(btnDialog!==null){btnDialog.addEventListener("click",buttonDialogClick)}
if(consent!==null)consent.addEventListener("click",inputClick);if(custom_questions!==null)for(var i=0;i<custom_questions.length;i++)custom_questions[i].addEventListener("click",inputClick);if(followUp!==null)followUp.addEventListener("click",followClick);if(firstorderQuestionYesNo!==null)firstorderQuestionYesNo.querySelectorAll('input').forEach(function(el){el.addEventListener("change",firstorderQuestionYesNoChange)});if(npsOptions!==null)for(var i=0;i<npsOptions.length;i++)npsOptions[i].addEventListener("change",npsOptionClick);if(displayNameInput){displayNameInput.addEventListener("click",inputClick);displayNameInput.addEventListener("focus",inputClick)}
if(product_inputs!==null)
Array.from(product_inputs).forEach(function(el){el.addEventListener("change",inputClick);el.addEventListener("click",inputClick);el.addEventListener("focus",inputClick);el.addEventListener("keyup",inputClick);if(el.type=="textarea"){el.addEventListener("keyup",charCounterProduct)}});Array.from(starRadios).forEach(function(el){el.addEventListener("change",starRadioChange)});setTabIndexes();if(closeBtn!==null){closeBtn.addEventListener("click",closeClick);closeBtn.addEventListener("keyup",closeClick);if(!options.test){document.getElementsByTagName("body")[0].classList.add("stjr-review-checkout-widget__body--active");document.querySelector(".stjr-review-checkout-widget-body").querySelector('[tabindex="1"]').focus()}
document.querySelector(".stjr-review-checkout-widget-body").addEventListener("blur",function(e){if(document.getElementsByTagName("body")[0].classList.contains("stjr-review-checkout-widget__body--active")){document.querySelector(".stjr-review-checkout-widget-body").focus()}})}
if(followUp)
document.addEventListener("STJR_customer_data",function(e){var emailInput=document.querySelector(widgetClassSelector+" #stjr-review-form__field--email"),nameInput=document.querySelector(widgetClassSelector+" #stjr-review-form__field--name"),orderDateInput=document.querySelector(widgetClassSelector+" #stjr-review-checkout-widget-order-date");orderIdInput=document.querySelector(widgetClassSelector+" #stjr-review-checkout-widget-order-id");if(orderDateInput&&e.detail.order_date)orderDateInput.value=e.detail.order_date;if(orderIdInput&&e.detail.order_id)orderIdInput.value=e.detail.order_id;if(emailInput&&e.detail.user&&e.detail.user.email)emailInput.value=e.detail.user.email;if(nameInput&&e.detail.user)nameInput.value=((e.detail.user.first_name?e.detail.user.first_name:"")+" "+(e.detail.user.last_name?e.detail.user.last_name:"")).trim();},{once:!0});starPrompt=!1;var st=document.querySelectorAll(widgetClassSelector+" .stars--widgets--medium .star--medium");for(var i=0;i<star;i++){if(st[i]==undefined)continue;if(st[i].className.indexOf("custom-icon-star2-empty")>=0)st[i].className=st[i].className.replace(/\bcustom-icon-star2-empty\b/g,"custom-icon-star2-full");}
widgetMinimized=!0;if(document.querySelector(widgetClassSelector+" .stjr-review-checkout-widget__floating")||document.querySelector(widgetClassSelector+" .stjr-review-checkout-widget__box"))
try{$(document).off("focusin.modal")}catch(e){}
preventFormFocusSteal();if(document.querySelector(widgetClassSelector+" #stjr-review-checkout-widget-local")&&document.querySelector(widgetClassSelector+" #stjr-review-checkout-widget-local").value=="1")
setTimeout(function(){var alertEl=document.createElement("div"),overlayEl=document.createElement("div");alertEl.classList.add("stjr-alert");alertEl.innerHTML='<svg width="55" height="52" viewBox="0 0 55 52" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M4.53345 19.5383C7.38157 8.86313 17.1177 0.999817 28.6904 0.999817C42.4975 0.999817 53.6904 12.1927 53.6904 25.9998C53.6904 39.8069 42.4975 50.9998 28.6904 50.9998C17.8172 50.9998 8.56523 44.0583 5.12426 34.3651" stroke="#464646" stroke-width="1.5" stroke-linecap="round"/><path d="M9.41921 17.6562L4.16494 21.541L1.29126 15.6724" stroke="#464646" stroke-width="1.5" stroke-linecap="round"/><path d="M27.0311 17.6333L27.0311 27.6731L36.3431 33.2009" stroke="#464646" stroke-width="1.5" stroke-linecap="round"/></svg>'+'<div class="stjr-h1">This form has expired</div>'+"<p>Please refresh this page to submit feedback</p>"+"</div>";overlayEl.classList.add("stjr-overlay");overlayEl.classList.add("stjr-overlay--alert");document.getElementsByTagName("body")[0].appendChild(alertEl);document.getElementsByTagName("body")[0].appendChild(overlayEl)},7200000);var tempOrderIdInput=document.querySelector(widgetClassSelector+" #stjr-review-checkout-widget-order-id");STJRV2.widgetViewRegister("fragrancex.com","instant_feedback",{order_id:tempOrderIdInput?tempOrderIdInput.value:""});return this};var buttonDialogClick=function(e){e.preventDefault();document.querySelector(widgetClassSelector+" .stjr-review-checkout-widget__floating").style.display="block";document.querySelector(widgetClassSelector+" .stjr-overlay").style.display="block";return!1};var charCounter=function(){setTimeout(function(){var l=review_content.value.replace(/(^\s+|\s+$)/g,"").replace(/\s+/g,"").length,el=document.querySelector(widgetClassSelector+" .stjr-review-form__character-counter"),t="";if(l==minChars-1)t=char_msg;else if(l<minChars)t=chars_msg.replace("{0}",minChars-l);else t=thank_you_msg;el.innerHTML=t},200)};var charCounterProduct=function(e){setTimeout(function(){var l=e.target.value.replace(/(^\s+|\s+$)/g,"").replace(/\s+/g,"").length,msg_1=document.querySelector(widgetClassSelector+" #"+e.target.dataset.vn),msg_2=document.querySelector(widgetClassSelector+" #"+e.target.dataset.vn+"-2");if(l>=minCharsProduct){msg_1.style.display="none";msg_2.style.display="none"}},200)};var reviewCounter=function(e){var inScTop=0;setTimeout(function(){if((review_title==undefined||(firstorderQuestionYesNo&&firstorderQuestionYesNo.querySelector('[value="Yes"]:checked'))||review_title.value.replace(/(^\s+|\s+$)/g,"").replace(/\s+/g,"").length)&&review_content.value.replace(/(^\s+|\s+$)/g,"").replace(/\s+/g,"").length){var questionsWrappers=document.querySelectorAll(widgetClassSelector+" .stjr-review-checkout-widget__body__question-group"),box=document.querySelector(widgetClassSelector+" .stjr-review-checkout-widget__box");if(questionsWrappers[0].style.display!="block"){if(box&&STJRV2.isMobileBrowser()){inScTop=inScTop!=0?inScTop:box.offsetHeight;box.scrollTop=inScTop}
Array.from(questionsWrappers).forEach(questionsWrapper=>{questionsWrapper.style.display="block"})}
if(document.querySelector(widgetClassSelector+" .stjr-review-form__field--follow-up")==undefined){var confirmationWrapper=document.querySelector(widgetClassSelector+" #stjr-review-checkout-widget-body__confirmation");if(confirmationWrapper.style.display!="block"){if(box&&STJRV2.isMobileBrowser()){inScTop=inScTop!=0?inScTop:box.offsetHeight;box.scrollTop=inScTop}
confirmationWrapper.style.display="block"}}
e.target.focus()}},200)};var click=function(e){var pageX=undefined;if(e.type=="touchstart")pageX=e.originalEvent.touches[0].pageX;else pageX=e.clientX;if(pageX==undefined)return;var p=document.querySelector(widgetClassSelector+" .stars--widgets--medium").getBoundingClientRect(),st=document.querySelectorAll(widgetClassSelector+" .stars--widgets--medium .star--medium");if(!st.length)return;var starLength=st[0].offsetWidth;star=Math.max(Math.min(Math.ceil((pageX-p.left)/starLength),5),1);document.querySelector(widgetClassSelector+" #rating-"+star).checked=!0;var err_el=document.querySelector(widgetClassSelector+" .err-stjr-review-rating");if(err_el)err_el.parentNode.removeChild(err_el);for(var i=0;i<star;i++){if(st[i]==undefined)continue;if(st[i].className.indexOf("custom-icon-star2-full")>=0)st[i].className=st[i].className.replace(/\bcustom-icon-star2-full\b/g,"custom-icon-star2");}
for(var i=star;i<5;i++){if(st[i]==undefined)continue;st[i].className=st[i].className.replace(/\bcustom-icon-star2(-full|-empty)?\b/g,"custom-icon-star2-empty")}};var inputClick=function(e){var el=e.target;if(el.id!==null&&el.id!==""){var err_el=document.querySelectorAll(widgetClassSelector+" #"+el.id+" ~ .stjr-validator-error");for(var i=0;i<err_el.length;i++)err_el[i].style.display="none"}
if(el.dataset.vn!=undefined)document.getElementById(el.dataset.vn).style.display="none";var err_el=document.querySelectorAll(widgetClassSelector+" #stjr-review-form__field--content ~ .stjr-validator-error[style*='block']");if(!err_el.length)document.querySelector(widgetClassSelector+" .stjr-review-form__character-counter").style.opacity="1";if(e.type!="focus")el.focus();};var followClick=function(){var selector=document.querySelector(widgetClassSelector+" .stjr-review-checkout-widget-review__radio--follow-up:checked"),el=document.querySelector(widgetClassSelector+" #stjr-review-checkout-widget-body__confirmation"),box=document.querySelector(widgetClassSelector+" .stjr-review-checkout-widget__box");if(selector){if(el.style.display!="block"){el.style.display="block";if(box)
SJTRUtils.scrollTo({element:box,start:box.scrollTop,to:el.offsetTop,})}
document.querySelector(widgetClassSelector+" #stjr-review-checkout-widget-body__email").style.display=selector.value=="No"&&star>=3?"none":"block";document.querySelector(widgetClassSelector+" .stjr-review-checkout-widget-body__prompt__message").style.display=selector.value=="No"?"block":"none";if(selector.value=="Yes"){var customerConsent=new Event("STJRV2.customer_consent");document.querySelector("body").dispatchEvent(customerConsent);var customerConsent2=new Event("STJR_customer_consent");document.querySelector("body").dispatchEvent(customerConsent2)}}};var firstorderQuestionYesNoChange=function(ev){var checkedVal=firstorderQuestionYesNo.querySelector(':checked').value.toLocaleLowerCase();var bodyWrapper=document.querySelector(widgetClassSelector+" .stjr-review-checkout-widget-body");var starsFieldWrapper=document.querySelector(widgetClassSelector+" .stjr-review-checkout-widget-body__prompt__main-stars");var dateFieldWrapper=document.querySelector(widgetClassSelector+" .stjr-review-checkout-widget-body__prompt__date-of-experience");var titleFieldWrapper=document.querySelector(widgetClassSelector+" .stjr-review-checkout-widget-body__prompt__main-title");var starFieldLabel=document.querySelector(widgetClassSelector+" #stjr-question-desc-stars");var contentPromptFieldLabel=document.querySelector(widgetClassSelector+" #stjr-question-desc-review-prompt");var collectionMethodField=document.querySelector(widgetClassSelector+" #stjr-review-checkout-widget-collection-method")
starsFieldWrapper.style.display='block';if(checkedVal=='no'){titleFieldWrapper.style.display='block';dateFieldWrapper.style.display='block';collectionMethodField.value='after_fulfillment';bodyWrapper.classList.add('stjr-review-checkout-widget-body--is-first-order-no')}else{collectionMethodField.value=firstorderQuestionYesNo.getAttribute('data-default-collection');titleFieldWrapper.style.display='none';bodyWrapper.classList.remove('stjr-review-checkout-widget-body--is-first-order-no');dateFieldWrapper.style.display='none'}
minChars=firstorderQuestionYesNo.getAttribute('data-min-chars-'+checkedVal+'-label');char_msg=firstorderQuestionYesNo.getAttribute('data-counter-'+checkedVal+'-label').replace('{0}',minChars);chars_msg=firstorderQuestionYesNo.getAttribute('data-counter-'+checkedVal+'-label');starFieldLabel.innerText=firstorderQuestionYesNo.getAttribute('data-star-'+checkedVal+'-label');contentPromptFieldLabel.innerText=firstorderQuestionYesNo.getAttribute('data-content-'+checkedVal+'-label');document.querySelector(widgetClassSelector+" #stjr-is-repeat-order").value=checkedVal=='no'?1:0};var logoClick=function(e){e.preventDefault();var url=STJRV2.getBase();window.open(url);return!1};var npsOptionClick=function(e){var target=e.target,parent=target.closest("label");Array.from(npsOptions).forEach(function(el){el.classList.remove("stjr-review-form__field__nps__option--selected")});parent.classList.add("stjr-review-form__field__nps__option--selected")};var closeClick=function(e){if(e.type=="keyup"&&e.keyCode!==13){return}(el=document.querySelector(widgetClassSelector+" .stjr-review-checkout-widget__floating")||document.querySelector(widgetClassSelector+" .stjr-review-checkout-widget__box")),(elOv=document.querySelector(widgetClassSelector+" .stjr-overlay"));el.style.display="none";if(elOv)elOv.style.display="none";var surveyClosedEvent=new Event("STJRV2.survey_closed");document.querySelector("body").dispatchEvent(surveyClosedEvent);var surveyClosedEvent2=new Event("STJR_survey_closed");document.querySelector("body").dispatchEvent(surveyClosedEvent2);if(onDialogCloseCallbacks.length>0){onDialogCloseCallbacks.forEach((onDialogCloseCallback)=>{onDialogCloseCallback()})}
document.getElementsByTagName("body")[0].classList.remove("stjr-review-checkout-widget__body--active")};var starsClick=function(e){var target=e.target;var parent=target.closest("fieldset");var selected=parent.querySelector("input[type=radio]:checked");if(!selected)return;star=selected.value;document.querySelector(widgetClassSelector+" #stjr-review-form__field--rating-error").style.display="none";document.querySelector(widgetClassSelector+" #stjr-review-form__field--user-error").style.display="none";document.querySelector(widgetClassSelector+" #stjr-review-form__field--email-error").style.display="none";if(star<3&&!starPrompt){Array.from(document.querySelectorAll(widgetClassSelector+" .stjr-review-checkout-widget__body__rest")).forEach(el=>{el.style.display="none"});document.querySelector(widgetClassSelector+" .stjr-review-checkout-widget-body__stars__prompt").style.display="block";starPrompt=!0}else{Array.from(document.querySelectorAll(widgetClassSelector+" .stjr-review-checkout-widget__body__rest")).forEach(el=>{el.style.display="block"});document.querySelector(widgetClassSelector+" .stjr-review-checkout-widget-body__stars__prompt").style.display="none"}
var el=document.querySelector(widgetClassSelector+" .stjr-review-form__field--follow-up"),confirmation=document.querySelector(widgetClassSelector+" #stjr-review-checkout-widget-body__confirmation");if(el&&confirmation.style.display=="block")el.click();var box=document.querySelector(widgetClassSelector+" .stjr-review-checkout-widget__box");if(box)box.style.bottom="0"};var starRadioChange=function(e){var ev=e;var el=e.currentTarget;var parent=e.currentTarget.closest(".stars");parent.setAttribute("data-stars",el.value)};var setTabIndexes=function(e){var inputs=document.querySelectorAll(widgetClassSelector+" fieldset:not([tabindex]),"+widgetClassSelector+" input:not([type=hidden]):not([tabindex]),"+widgetClassSelector+" textarea:not([tabindex]),"+widgetClassSelector+" a:not([tabindex]),"+widgetClassSelector+" button:not([tabindex])");var tabICounter=1;Array.from(inputs).forEach(function(el){if(!el.getAttribute("tabindex")){el.setAttribute("tabindex",tabICounter);tabICounter++}});var close=document.querySelector(widgetClassSelector+" .stjr-review-checkout-widget-body__close");if(close){close.setAttribute("tabindex",tabICounter);createFocusCycle(inputs[0],close)}};var createFocusCycle=function(first,last){first.addEventListener("keydown",function(e){if(e.keyCode===9&&e.shiftKey){last.focus();e.preventDefault()}});last.addEventListener("keydown",function(e){if(e.keyCode===9){first.focus();e.preventDefault()}})};var starsLinkClick=function(e){e.preventDefault();if(e.target.href.indexOf("#yes")!==-1){Array.from(document.querySelectorAll(widgetClassSelector+" .stjr-review-checkout-widget__body__rest")).forEach(el=>{el.style.display="block"});document.querySelector(widgetClassSelector+" .stjr-review-checkout-widget-body__stars__prompt").style.display="none";if(document.querySelector(widgetClassSelector+" #stjr-review-form__field--title"))document.querySelector(widgetClassSelector+" #stjr-review-form__field--title").focus();else document.querySelector(widgetClassSelector+" #stjr-review-form__field--content").focus()}else if(e.target.href.indexOf("#no")!==-1){var el=document.querySelector(widgetClassSelector);el.style.opacity=1;(function fade(){if((el.style.opacity-=0.05)<0)el.style.display="none";else requestAnimationFrame(fade)})();var surveyDeclined=new Event("STJRV2.survey_declined");document.querySelector("body").dispatchEvent(surveyDeclined);var surveyDeclined2=new Event("STJR_survey_declined");document.querySelector("body").dispatchEvent(surveyDeclined2)}};var starsCustomClick=function(e){var target=e.target;var parent=target.closest("fieldset");var selected=parent.querySelector("input[type=radio]:checked");if(!selected)return;if(selected.dataset.vn!=undefined)document.getElementById(selected.dataset.vn).style.display="none"};var submitReviewClick=function(e){e.preventDefault();var bError=!1;if(star==0){var ratingError=document.querySelector(widgetClassSelector+" #stjr-review-form__field--rating-error");ratingError.style.display="block";bError=!0}
if(date_of_experience&&(!firstorderQuestionYesNo||(firstorderQuestionYesNo&&firstorderQuestionYesNo.querySelector('[value="No"]:checked')))){var dateError=document.querySelector(widgetClassSelector+" #stjr-review-form__field--date_of_experience-error");dateError.style.display="block";date_of_experience.className="stjr-review-checkout-widget-review__input stjr-validator-error";bError=!0}
if(review_title&&(!firstorderQuestionYesNo||(firstorderQuestionYesNo&&firstorderQuestionYesNo.querySelector('[value="No"]:checked')))&&review_title.value.replace(/(^\s+|\s+$)/g,"").length==0){var titleError=document.querySelector(widgetClassSelector+" #stjr-review-form__field--title-error");titleError.style.display="block";review_title.className="stjr-review-checkout-widget-review__input stjr-validator-error";bError=!0}
if(review_content.value.replace(/(^\s+|\s+$)/g,"").replace(/\s+/g,"").length==0){document.querySelector(widgetClassSelector+" #stjr-review-form__field--content-error").style.display="block";document.querySelector(widgetClassSelector+" .stjr-review-form__character-counter").style.opacity="0";review_content.className="stjr-review-checkout-widget-review__input stjr-validator-error";bError=!0}else if(review_content.value.replace(/(^\s+|\s+$)/g,"").replace(/\s+/g,"").length<minChars){document.querySelector(widgetClassSelector+" #stjr-review-form__field--content-error-2").style.display="block";document.querySelector(widgetClassSelector+" .stjr-review-form__character-counter").style.opacity="0";review_content.className="stjr-review-checkout-widget-review__input stjr-validator-error ";bError=!0}else if((review_content.value.replace(/(^\s+|\s+$)/g,'').match(/[@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/g)?.length||0)/review_content.value.replace(/(^\s+|\s+$)/g,'').length>=0.7){document.querySelector(widgetClassSelector+" #stjr-review-form__field--content-error-3").style.display="block";document.querySelector(widgetClassSelector+" .stjr-review-form__character-counter").style.opacity="0";review_content.className="stjr-review-checkout-widget-review__input stjr-validator-error ";bError=!0}
if(star<3&&review_email.value.replace(/(^\s+|\s+$)/g,"").length==0){var contentError=document.querySelector(widgetClassSelector+" #stjr-review-form__field--user-error");contentError.style.display="block";review_email.className="stjr-review-checkout-widget-review__input stjr-review-checkout-widget-review__input--inline stjr-validator-error";bError=!0}else if(review_email.value.length>0&&!/^[\w\.\-_\+]{1,}@[\w\.\-]{4,}/.test(review_email.value)){var contentError=document.querySelector(widgetClassSelector+" #stjr-review-form__field--email-error");contentError.style.display="block";review_email.className="stjr-review-checkout-widget-review__input stjr-review-checkout-widget-review__input--inline stjr-validator-error";bError=!0}
if(product_inputs!==null){var rating=null;for(var i=0;i<product_inputs.length;i++){var pi=product_inputs[i];if(pi.type==="radio"&&pi.value==="1"){rating=pi}
if(pi.dataset.vn.indexOf("rating")>0&&pi.type==="radio"){var parent=pi.closest("fieldset");var checked=parent.querySelector("input:checked");rating=checked?checked:pi}else{if(rating&&!rating.checked&&pi.type!=="radio"&&pi.value!=""){document.getElementById(pi.dataset.vn.replace("content","rating")).style.display="block";bError=!0}else if(rating&&rating.checked&&pi.type!=="radio"&&pi.value==""){document.getElementById(pi.dataset.vn+"-2").style.display="none";document.getElementById(pi.dataset.vn).style.display="block";bError=!0}else if(rating&&rating.checked&&pi.type!=="radio"&&pi.value.replace(/(^\s+|\s+$)/g,"").length<minCharsProduct){document.getElementById(pi.dataset.vn+"-2").style.display="block";bError=!0}}}}
if(displayNameInput&&displayNameInput.required&&!/^(?:[a-zA-Z]+\b)(?:\s[a-zA-Z]+\b)?\.?$/.test(displayNameInput.value.trim())){var disNameError=document.querySelector(widgetClassSelector+" #stjr-review-form__field--name-display-error");disNameError.style.display="block";bError=!0}
if(consent&&!consent.checked){var contentError=document.querySelector(widgetClassSelector+" #stjr-review-form__field--consent-error");contentError.style.display="block";consent.className="stjr-review-checkout-widget-review__checkbox stjr-validator-error";bError=!0}
if(bError){var fstError=document.querySelector('.stjr-validator-error[style*="block"]');if(fstError){document.querySelector(".stjr-review-checkout-widget").scrollTop=fstError.parentElement.offsetTop}
return!1}
function submitOk(){var writeReviewDiv=document.querySelector(widgetClassSelector+" .stjr-review-form"),confirmDiv=document.querySelector(widgetClassSelector+" .stjr-review-confirmation"),confirmText=document.querySelector(widgetClassSelector+" .stjr-review-confirmation__message__text"),el=document.querySelector(widgetClassSelector+" .stjr-review-checkout-widget__floating"),el2=document.querySelector(widgetClassSelector+" .stjr-review-checkout-widget__box");(confirmUserClose=document.querySelector(widgetClassSelector+" .js-confirm-user-close")),(npsInput=document.querySelector(widgetClassSelector+" .stjr-review-form__field__nps__input:checked")),(widgetBody=document.querySelector(widgetClassSelector+" .stjr-review-checkout-widget-body")),(specialReferral=document.querySelector(widgetClassSelector+" .stjr-review-confirmation__message__referral"));writeReviewDiv.style.display="none";confirmDiv.style.display="block";if(el)el.style.height="auto";if(el2)el2.style.height="auto";baseHeight=undefined;var surveySubmittedEvent=new Event("STJRV2.survey_submitted");document.querySelector("body").dispatchEvent(surveySubmittedEvent);var surveySubmittedEvent2=new Event("STJR_survey_submitted");document.querySelector("body").dispatchEvent(surveySubmittedEvent2);if(specialReferral){specialReferral.dataset.field;specialReferral.dataset.fieldMinValue;var showSpecialReferral=specialReferral.dataset.field&&specialReferral.dataset.fieldMinValue&&!isNaN(specialReferral.dataset.fieldMinValue)?npsInput&&parseInt(npsInput.value)>=parseInt(specialReferral.dataset.fieldMinValue):!0;if(showSpecialReferral){widgetBody.innerHTML=specialReferral.innerHTML;widgetBody.setAttribute("style","padding: 0px!important");document.querySelector(widgetClassSelector+" .stjr-overlay").addEventListener("click",(e)=>{el=document.querySelector(widgetClassSelector);el.style.display="none"});return}}
if((el||el2)&&!confirmUserClose)
setTimeout(function(){el=document.querySelector(widgetClassSelector);el.style.opacity=1;(function fade(){if((el.style.opacity-=0.05)<0){el.style.display="none";document.getElementsByTagName("body")[0].classList.remove("stjr-review-checkout-widget__body--active")}else requestAnimationFrame(fade)})()},3000);if(onDialogCloseCallbacks.length>0){onDialogCloseCallbacks.forEach((onDialogCloseCallback)=>{onDialogCloseCallback()})}}
var submitBtn=document.querySelector(widgetClassSelector+" .stjr-sj-button--write"),loading=document.querySelector(widgetClassSelector+" .stjr-button--registration-loading"),widgetKeyInput=document.querySelector(widgetClassSelector+" #stjr-review-checkout-widget-key"),nameInput=document.querySelector(widgetClassSelector+" #stjr-review-form__field--name"),phoneInput=document.querySelector(widgetClassSelector+" #stjr-review-form__field--phone"),businessReason=document.querySelector(widgetClassSelector+" #stjr-review-form__field--business"),productReason=document.querySelector(widgetClassSelector+" #stjr-review-form__field--product"),orderDateInput=document.querySelector(widgetClassSelector+" #stjr-review-checkout-widget-order-date"),orderIdInput=document.querySelector(widgetClassSelector+" #stjr-review-checkout-widget-order-id"),delay=document.querySelector(widgetClassSelector+" #stjr-review-checkout-widget-delay"),collectionMethod=document.querySelector(widgetClassSelector+" #stjr-review-checkout-widget-collection-method"),language=document.querySelector(widgetClassSelector+" #stjr-review-checkout-widget-language"),local=document.querySelector(widgetClassSelector+" #stjr-review-checkout-widget-local"),followUp=document.querySelector(widgetClassSelector+" .stjr-review-checkout-widget-review__radio--follow-up:checked"),pids=document.querySelector(widgetClassSelector+" .stjr-review-checkout-widget-review__pids__input");submitBtn.style.display="none";loading.style.display="inline-block";if(isPreviewMode){setTimeout(submitOk,1000);return!1}
STJRV2.ReviewsWidget["submitCallback_"+widgetNumber]=function(data){if(data&&data.status=="ERROR"){var submitBtn=document.querySelector(widgetClassSelector+" .stjr-sj-button--write");var loading=document.querySelector(widgetClassSelector+" .stjr-button--registration-loading");submitBtn.style.display="inline-block";loading.style.display="none";alert(data.message);return!1}
submitOk()};var url=STJRV2.getBase()+"/widget-review-tab-submit/fragrancex.com/"+widgetNumber;var adds="?date_of_experience="+(date_of_experience?encodeURIComponent(date_of_experience.value):"")+"&";adds+="title="+(review_title?encodeURIComponent(review_title.value):"")+"&";adds+="order_date="+encodeURIComponent(orderDateInput.value)+"&";adds+="order_id="+encodeURIComponent(orderIdInput.value)+"&";adds+="content="+encodeURIComponent(review_content.value)+"&";adds+="name="+encodeURIComponent(nameInput.value)+"&";adds+="email="+encodeURIComponent(review_email.value)+"&";adds+="phone="+encodeURIComponent(phoneInput.value)+"&";if(businessReason)adds+="business_reason="+encodeURIComponent(businessReason.value)+"&";if(productReason)adds+="product_reason="+encodeURIComponent(productReason.value)+"&";for(var i=0;i<custom_questions.length;i++){if(custom_questions[i].type&&custom_questions[i].type=="radio"){if(custom_questions[i].checked){adds+=custom_questions[i].name+"="+encodeURIComponent(custom_questions[i].value)+"&"}}else if(custom_questions[i].value){adds+=custom_questions[i].name+"="+encodeURIComponent(custom_questions[i].value)+"&"}}
for(var i=0;i<product_inputs.length;i++){if(product_inputs[i].type&&product_inputs[i].type=="radio"){if(product_inputs[i].checked){adds+=product_inputs[i].name+"="+encodeURIComponent(product_inputs[i].value)+"&"}}else if(product_inputs[i].value){adds+=product_inputs[i].name+"="+encodeURIComponent(product_inputs[i].value)+"&"}}
if(collectionMethod)adds+="collection_method="+encodeURIComponent(collectionMethod.value)+"&";if(delay&&/^[0-9]+$/.test(delay.value))adds+="delay="+encodeURIComponent(delay.value)+"&";if(language)adds+="language="+encodeURIComponent(language.value)+"&";if(local)adds+="local="+encodeURIComponent(local.value)+"&";if(followUp)adds+="followup="+encodeURIComponent(followUp.value)+"&";if(displayNameInput)adds+="display_name="+encodeURIComponent(displayNameInput.value)+"&";adds+="rating="+star+"&";adds+="widget_key="+encodeURIComponent(widgetKeyInput.value)+"&";adds+="pids="+encodeURIComponent(pids.value)+"&";adds+="is_repeat_order="+encodeURIComponent(document.querySelector(widgetClassSelector+" #stjr-is-repeat-order").value)+"&";STJRV2.jsonP(url+adds,function(script){scriptElement=script});return!1};var preventFormFocusSteal=function(){var focusableEls=document.querySelectorAll("#stjr-widget"+widgetNumber+" .stjr-review-form textarea, #stjr-widget"+widgetNumber+" .stjr-review-form input");focusableEls.forEach((el)=>{el.addEventListener("focus",(ev)=>{ev.stopPropagation();if(ev.relatedTarget&&!/stjr/.test(ev.relatedTarget.className)&&!/sjtp/.test(ev.relatedTarget.className)){var thirdParty=ev.relatedTarget;var cbIndex=onDialogCloseCallbacks.length;thirdParty.classList.add("js-sjtp-third-party-is-it-a-parent-"+cbIndex);if(ev.currentTarget.closest(".js-sjtp-third-party-is-it-a-parent-"+cbIndex))return;thirdParty.classList.add("js-sjtp-third-party-prevent-focus-steal-"+cbIndex);var thirdPartyOriginalDisplay=thirdParty.style.display;thirdParty.style.display="none";onDialogCloseCallbacks[cbIndex]=function(){thirdParty.style.display=thirdPartyOriginalDisplay;thirdParty.classList.remove("js-sjtp-third-party-prevent-focus-steal-"+cbIndex);thirdParty.classList.remove("js-sjtp-third-party-is-it-a-parent-"+cbIndex)};ev.currentTarget.focus()}})})};var widgetLoadedEvent=new Event("STJR.instantFeedbackWidgetLoaded");var widgetLoadedEventV2=new Event("STJRV2.instantFeedbackWidgetLoaded");document.querySelector("body").dispatchEvent(widgetLoadedEvent);document.querySelector("body").dispatchEvent(widgetLoadedEventV2);timer=setInterval(init,100);return{reset:function(element){element.innerHTML="";element.classList.remove("stjr-init");const regex=new RegExp(/stjr-callback-\d/,"g");if(element.className.match(regex))element.className=element.className.replace(regex,"");timer=setInterval(init,100)},showView:function(){setTimeout(customRenderCall,0)},}})();STJRV2.ReviewLinkWidget=(function(){var that,options,widgetName,isPreviewMode=!1,query="",id,timer,widgetNumber,widgetClassSelector=null;that=this;var init=function(opts){var element=document.querySelector(".stjr-review-link:not(.stjr-init)");if(!element)return;widgetNumber=STJRV2.getNextWidgetNumber();var url=STJRV2.subBaseToCDN()+'/widget-link/fragrancex.com/'+widgetNumber,attrOptions=STJRV2.getAttrObj(element),otherOptions=STJRV2.getConfig();id="stjr-widget"+widgetNumber;widgetName="ReviewLinkWidget";options=Object.assign({},otherOptions,attrOptions);isPreviewMode=typeof options.test!="undefined"?options.test:!1;element.classList.add("stjr-init","stjr-callback-"+widgetNumber,widgetName+"-"+widgetNumber);widgetClassSelector="."+widgetName+"-"+widgetNumber;query=STJRV2.getQueryString(Object.assign({},options),null);var initErrorCallback=options.test?()=>{STJRV2.renderNoProductsMessage(widgetClassSelector)}:null;STJRV2.setResponse('response'+widgetNumber,null);STJRV2.ReviewsWidget['receiveCallback_'+widgetNumber]=function(resp){STJRV2.setResponse('response'+resp.callback,resp)};STJRV2.jsonP(url+'?'+query,widgetNumber,function(script){render(widgetNumber)},initErrorCallback);clearInterval(timer)};var render=function(){var sj_responses=STJRV2.getResponse("response"+widgetNumber);if(!STJRV2.hasLoadedStyleSheet()||!sj_responses){window.setTimeout(render.bind(this,widgetNumber),500);return}
if(sj_responses.loaded)return;sj_responses.loaded=!0;STJRV2.setResponse("response"+widgetNumber,sj_responses);var element=document.querySelector(widgetClassSelector);if(!element)return;element.innerHTML=sj_responses.html;var link=document.querySelector(widgetClassSelector+" .stjr-container .js-stjr-review-link");if(link==null)return;var url=STJRV2.getBase()+"/online-business-review"+"?url="+encodeURIComponent(link.rel);link.href=url;var logo=document.querySelector(widgetClassSelector+" .stjr-review-link-widget-footer a");if(logo==null)return;logo.addEventListener("click",logoClick);return this};var logoClick=function(e){e.preventDefault();var url=STJRV2.getBase();window.open(url);return!1};timer=setInterval(init,1000);return{reset:function(element){element.innerHTML="";element.classList.remove("stjr-init");const regex=new RegExp(/stjr-callback-\d/,"g");if(element.className.match(regex))element.className=element.className.replace(regex,"");timer=setInterval(init,1000)},}})();STJRV2.ReviewButtonWidget=function(){var that,additionalOptions,star=0,options,widgetName,isAbsolute=null,isPreviewMode=!1,query="",id,timer,widgetNumber,widgetClassSelector=null;that=this;var init=function(opts){var element=document.querySelector(".stjr-review-button:not(.stjr-init)");if(!element)return;widgetNumber=STJRV2.getNextWidgetNumber();var url=STJRV2.subBaseToCDN()+'/widget-button/fragrancex.com/'+widgetNumber,attrOptions=STJRV2.getAttrObj(element),otherOptions=STJRV2.getConfig();id="stjr-widget"+widgetNumber;widgetName='ReviewButtonWidget';options=Object.assign({},otherOptions,attrOptions);isPreviewMode=typeof options.test!="undefined"?options.test:!1;element.classList.add("stjr-init","stjr-callback-"+widgetNumber,widgetName+"-"+widgetNumber);widgetClassSelector="."+widgetName+"-"+widgetNumber;query=STJRV2.getQueryString(Object.assign({},options),null);var initErrorCallback=options.test?()=>{STJRV2.renderNoProductsMessage(widgetClassSelector)}:null;STJRV2.ReviewsWidget['receiveCallback_'+widgetNumber]=function(resp){STJRV2.setResponse('response'+resp.callback,resp)};STJRV2.setResponse('response'+widgetNumber,null);STJRV2.jsonP(url+'?'+query,widgetNumber,function(script){render(widgetNumber)},initErrorCallback);clearInterval(timer)};var render=function(){var sj_responses=STJRV2.getResponse("response"+widgetNumber);if(!STJRV2.hasLoadedStyleSheet()||!sj_responses){window.setTimeout(render.bind(this,widgetNumber),500);return}
if(sj_responses.loaded)return;sj_responses.loaded=!0;STJRV2.setResponse("response"+widgetNumber,sj_responses);var element=document.querySelector(widgetClassSelector);if(!element)return;element.innerHTML=sj_responses.html;var btn=document.querySelector(widgetClassSelector+" .js-stjr-sj-button");var title=document.querySelector(widgetClassSelector+" .stjr-review-button-widget-body__title");var logo=document.querySelector(widgetClassSelector+" .stjr-review-button-widget-footer a");if(btn==null)
return;btn.addEventListener('click',buttonClick);title.addEventListener('click',titleClick);logo.addEventListener('click',logoClick)};var buttonClick=function(){var hash=document.querySelector(widgetClassSelector+" .stjr-hash").innerHTML;var url=STJRV2.getBase()+'/online-business-review'+"?url="+encodeURIComponent(hash);window.open(url)};var titleClick=function(){var hash=document.querySelector(widgetClassSelector+" .stjr-hash").innerHTML.split('_');var url=STJRV2.getBase()+'/reviews/'+hash[0];window.open(url)};var logoClick=function(e){e.preventDefault();var url=STJRV2.getBase();window.open(url);return!1};timer=setInterval(init,1000);return{reset:function(element){element.innerHTML="";element.classList.remove("stjr-init");const regex=new RegExp(/stjr-callback-\d/,"g");if(element.className.match(regex))element.className=element.className.replace(regex,"");timer=setInterval(init,1000)},}}();STJRV2.AwardBadgeWidget=(function(){var that,additionalOptions,star=0,options,widgetName,isAbsolute=null,isPreviewMode=!1,query="",id,timer,widgetNumber,widgetClassSelector=null;that=this;var init=function(opts,singleEl=null){if(singleEl==null){var elements=document.querySelectorAll(".stjr-award-badge:not(.stjr-init)");if(elements.length==0)return;Array.from(elements).forEach((el)=>{init(opts,el)});return}
var element=singleEl;widgetNumber=STJRV2.getNextWidgetNumber();var url=STJRV2.subBaseToCDN()+"/widget-award-badge/fragrancex.com/"+widgetNumber;(attrOptions=STJRV2.getAttrObj(element)),(otherOptions=STJRV2.getConfig());id="stjr-widget"+widgetNumber;widgetName="AwardBadgeWidget";options=Object.assign({},otherOptions,attrOptions);isPreviewMode=typeof options.test!="undefined"?options.test:!1;element.classList.add("stjr-init","stjr-callback-"+widgetNumber,widgetName+"-"+widgetNumber);widgetClassSelector="."+widgetName+"-"+widgetNumber;query=STJRV2.getQueryString(Object.assign({},options),null);var initErrorCallback=options.test?()=>{STJRV2.renderNoProductsMessage(options.id)}:null;STJRV2.ReviewsWidget["receiveCallback_"+widgetNumber]=function(resp){STJRV2.setResponse("response"+resp.callback,resp)};STJRV2.setResponse("response"+widgetNumber,null);STJRV2.jsonP(url+"?"+query,widgetNumber,function(script){render(widgetNumber)},initErrorCallback);clearInterval(timer)};var render=function(singleWidgetNumber){var sj_responses=STJRV2.getResponse("response"+singleWidgetNumber);var widgetClassSelector="."+widgetName+"-"+singleWidgetNumber;if(!STJRV2.hasLoadedStyleSheet()||!sj_responses){window.setTimeout(render.bind(this,singleWidgetNumber),500);return}
if(sj_responses.loaded)return;sj_responses.loaded=!0;STJRV2.setResponse("response"+singleWidgetNumber,sj_responses);var element=document.querySelector(widgetClassSelector);if(!element)return;element.innerHTML=sj_responses.html};timer=setInterval(init,1000);return{reset:function(element){element.innerHTML="";element.classList.remove("stjr-init");const regex=new RegExp(/stjr-callback-\d/,"g");if(element.className.match(regex))element.className=element.className.replace(regex,"");timer=setInterval(init,1000)},}})();STJRV2.ReviewBadgeWidget=(function(){var that,additionalOptions,star=0,options,widgetName,isAbsolute=null,isPreviewMode=!1,query="",id,timer,widgetNumber,widgetClassSelector=null;that=this;var init=function(opts,singleEl=null){if(singleEl==null){var elements=document.querySelectorAll(".stjr-badge:not(.stjr-init)");if(elements.length==0)return;Array.from(elements).forEach((el)=>{init(opts,el)});return}
var element=singleEl;widgetNumber=STJRV2.getNextWidgetNumber();var url=STJRV2.subBaseToCDN()+"/widget-review-badge/fragrancex.com/"+widgetNumber;(attrOptions=STJRV2.getAttrObj(element)),(otherOptions=STJRV2.getConfig());id="stjr-widget"+widgetNumber;widgetName="BadgeWidget";options=Object.assign({},otherOptions,attrOptions);isPreviewMode=typeof options.test!="undefined"?options.test:!1;element.classList.add("stjr-init","stjr-callback-"+widgetNumber,widgetName+"-"+widgetNumber);widgetClassSelector="."+widgetName+"-"+widgetNumber;query=STJRV2.getQueryString(Object.assign({},options),null);var initErrorCallback=options.test?()=>{STJRV2.renderNoProductsMessage(options.id)}:null;STJRV2.ReviewsWidget["receiveCallback_"+widgetNumber]=function(resp){STJRV2.setResponse("response"+resp.callback,resp)};STJRV2.setResponse("response"+widgetNumber,null);STJRV2.jsonP(url+"?"+query,widgetNumber,function(script){render(widgetNumber)},initErrorCallback);clearInterval(timer)};var render=function(singleWidgetNumber){var sj_responses=STJRV2.getResponse("response"+singleWidgetNumber);var widgetClassSelector="."+widgetName+"-"+singleWidgetNumber;if(!STJRV2.hasLoadedStyleSheet()||!sj_responses){window.setTimeout(render.bind(this,singleWidgetNumber),500);return}
if(sj_responses.loaded)return;sj_responses.loaded=!0;STJRV2.setResponse("response"+singleWidgetNumber,sj_responses);var element=document.querySelector(widgetClassSelector);if(!element)return;element.innerHTML=sj_responses.html;var btns=document.querySelectorAll(widgetClassSelector+" .js-stjr-sj-button");if(btns.length<1)return;for(var i=0;i<btns.length;i++){btns[i].addEventListener("click",buttonClick)}};var buttonClick=function(e){var hash=e.target.closest('.stjr-badge').querySelector(".stjr-hash").innerText;var url=STJRV2.getBase()+"/reviews/"+encodeURIComponent(hash);window.open(url)};timer=setInterval(init,1000);return{reset:function(element){element.innerHTML="";element.classList.remove("stjr-init");const regex=new RegExp(/stjr-callback-\d/,"g");if(element.className.match(regex))element.className=element.className.replace(regex,"");timer=setInterval(init,1000)},}})();STJRV2.ReviewTabWidget=(function(){var that,widgetInitClassName="stjr-review-tab",widgetName="ReviewTabWidget",widgetInitRoutePath="widget-review-tab",options={},query="",id=widgetName,timer,widgetNumber,additionalOptions,widgetClassSelector=null,isPreviewMode=!1,initErrorCallback=null,star=0,page=1,optionsLength=100,optionsMinTrail=20,optionsEllipsisText="... ",optionsMoreText="read more",optionsLessText="less",reviewAlreadyWritten=!1,isDialog=!0,isPreviewMode=!1;that=this;var init=function(){var element=document.querySelector(`.${widgetInitClassName}:not(.stjr-init)`);if(!element)return;widgetNumber=STJRV2.getNextWidgetNumber();var url=`${STJRV2.subBaseToCDN()}/${widgetInitRoutePath}/fragrancex.com/${widgetNumber}`;(attrOptions=STJRV2.getAttrObj(element)),(otherOptions=STJRV2.getConfig());id="stjr-widget"+widgetNumber;options=Object.assign({},otherOptions,attrOptions);isPreviewMode=typeof options.test!="undefined"?options.test:!1;element.classList.add("stjr-init","stjr-callback-"+widgetNumber,widgetName+"-"+widgetNumber);widgetClassSelector="."+widgetName+"-"+widgetNumber;query=STJRV2.getQueryString(Object.assign({},options),null);var initErrorCallback=null;STJRV2.ReviewsWidget["receiveCallback_"+widgetNumber]=function(resp){STJRV2.setResponse("response"+resp.callback,resp)};STJRV2.setResponse("response"+widgetNumber,null);STJRV2.jsonP(url+"?"+query,widgetNumber,function(script){render(widgetNumber)},initErrorCallback);var cont=document.querySelector(widgetClassSelector);if(cont==null){options.id="reviewTabWidget";cont=document.createElement("div");cont.id=options.id+"Inner";cont.class=`.${widgetInitClassName}-inner`;document.getElementsByTagName("body")[0].appendChild(cont)}
if(cont&&!options.test&&cont.parentNode.tagName!=="BODY"&&cont.parentNode.parentNode.tagName!=="BODY"){var tempHtml=cont.outerHTML;cont.remove();document.getElementsByTagName("body")[0].insertAdjacentHTML("beforeend",tempHtml)}
loadReviews(1);clearInterval(timer)};var render=function(){var sj_responses=STJRV2.getResponse("response"+widgetNumber);if(!STJRV2.hasLoadedStyleSheet()||!sj_responses){window.setTimeout(render.bind(this,widgetNumber),500);return}
if(sj_responses.loaded)return;sj_responses.loaded=!0;STJRV2.setResponse("response"+widgetNumber,sj_responses);var element=document.querySelector(widgetClassSelector);if(!element){return}
element.innerHTML=sj_responses.html;renderReviews();var btn=document.querySelector(widgetClassSelector+" #stjr-reviews-tab__button");var close=document.querySelector(widgetClassSelector+" .stjr-reviews-tab-header .stjr-reviews-tab-header__close");var writeReviewBtn=document.querySelector(widgetClassSelector+" .stjr-reviews-tab-write-review__button");var reviewListBtn=document.querySelector(widgetClassSelector+" .stjr-reviews-tab-review-list__button");var starsObj=document.querySelector(widgetClassSelector+" .stjr-review-form__field .stars--widgets");var titleInput=document.querySelector(widgetClassSelector+" #stjr-reviews-tab-form__field--title");var dateOfExperienceInput=document.querySelector(widgetClassSelector+" #stjr-reviews-tab-form__field--date_of_experience");var contentInput=document.querySelector(widgetClassSelector+" #stjr-reviews-tab-form__field--content");var registrationBtn=document.querySelector(widgetClassSelector+" .stjr-button--registration");var registrationOkBtn=document.querySelector(widgetClassSelector+" .stjr-button--registration-ok");var orderIdInput=document.querySelector(widgetClassSelector+" #stjr-reviews-tab-form__field--order-id");var nameInput=document.querySelector(widgetClassSelector+" #stjr-registration-form__field--name");var emailInput=document.querySelector(widgetClassSelector+" #stjr-registration-form__field--email");var logo=document.querySelector(widgetClassSelector+" .stjr-reviews-tab-footer .stjr-reviews-tab-attribution a");var floatContainer=document.querySelector(widgetClassSelector+" .stjr-reviews-tab-modal");if(btn==null)return;if(floatContainer){var maxZIndex=STJRV2.maxZIndex();maxZIndex=maxZIndex?parseInt(maxZIndex)+5:5;var computedZ=window.getComputedStyle(floatContainer);computedZ=computedZ.zIndex?computedZ.zIndex:0;if(maxZIndex>computedZ)floatContainer.style.zIndex=maxZIndex}
var isMobile=window.getComputedStyle(document.querySelector(widgetClassSelector+" .stjr-review-form .stars--widgets--medium")).marginLeft!="0px";document.querySelector(widgetClassSelector+" .stjr-review-form .stjr-review-form__tip").innerHTML=isMobile?"Tap stars to rate":"Click stars to rate";if(isMobile)document.querySelector(widgetClassSelector+" .stjr-review-form .stjr-review-form__tip").style.paddingTop="23px";btn.addEventListener("click",buttonClick);if(close)close.addEventListener("click",closeClick);writeReviewBtn.addEventListener("click",writeReviewClick);reviewListBtn.addEventListener("click",reviewListClick);starsObj.addEventListener("mousemove",starsMove);starsObj.addEventListener("mouseleave",starsLeave);starsObj.addEventListener("click",starsClick);titleInput.addEventListener("keyup",checkReview);contentInput.addEventListener("keyup",checkReview);registrationBtn.addEventListener("click",submitReviewClick);registrationOkBtn.addEventListener("click",registrationOkClick);titleInput.addEventListener("focus",validatorClear);dateOfExperienceInput.addEventListener("focus",validatorClear);contentInput.addEventListener("focus",validatorClear);if(orderIdInput)orderIdInput.addEventListener("focus",validatorClear);nameInput.addEventListener("focus",validatorClear);emailInput.addEventListener("focus",validatorClear);logo.addEventListener("click",logoClick);window.onclick=closeClick};var loadReviews=function(page){that=this;page=page;STJRV2.ReviewsWidget["reviewsTabCallback_"+page]=function(resp){STJRV2.setResponse("reviewTab"+page,resp);renderReviews()};var url=STJRV2.subBaseToCDN()+"/widget-review-tab-list/fragrancex.com/"+page;if(query!='')
url+='?'+query;STJRV2.jsonP(url,function(script){scriptElement=script})};var reviewListScrollToTop=function(scrollDuration,callback){var reviewList=document.querySelector(widgetClassSelector+" .stjr-reviews-tab-reviews");if(callback){callback(!0)}
if(reviewList){reviewList.scrollBy({top:-reviewList.scrollHeight,behavior:"smooth"})}};var renderReviews=function(){var sj_responses=STJRV2.getResponse("reviewTab"+page);if(typeof sj_responses!="object")return;var reviewList=document.querySelector(widgetClassSelector+" .stjr-reviews-list-container");if(reviewList!=undefined){document.querySelector(widgetClassSelector+"  .js-stjr-reviews-tab-reviews__loading").classList.remove("active");reviewListScrollToTop(1000,function(half){if(!half)return;reviewList.innerHTML="";reviewList.innerHTML=sj_responses.html;var writeFirstReviewBtn=document.querySelector(widgetClassSelector+" .stjr-button--write-first-review");if(writeFirstReviewBtn)writeFirstReviewBtn.addEventListener("click",writeReviewClick);var links=document.querySelectorAll(widgetClassSelector+" a.stjr-review-tab-pagination__link__link, "+widgetClassSelector+" a.stjr-review-tab-pagination__link");for(var i=0;i<links.length;i++){links[i].addEventListener("click",pageClick)}
var reviewRows=document.querySelectorAll(widgetClassSelector+" .stjr-reviews-list-container .stjr-review-row .stjr-review__content");for(var i=0;i<reviewRows.length;i++)truncateText(reviewRows[i]);var commentRows=document.querySelectorAll(widgetClassSelector+" .stjr-reviews-list-container .stjr-review-row .stjr-review-comment__row .stjr-review-comment__content");for(var i=0;i<commentRows.length;i++)truncateText(commentRows[i]);var helpfulRows=document.querySelectorAll(widgetClassSelector+" .stjr-reviews-list-container .stjr-review-helpful .js-helpful-button");for(var i=0;i<helpfulRows.length;i++){helpfulVote(helpfulRows[i])}
var helpfulRowsNo=document.querySelectorAll(widgetClassSelector+" .stjr-reviews-list-container .stjr-review-helpful .js-helpful-no-button");for(var i=0;i<helpfulRows.length;i++){helpfulVoteNo(helpfulRowsNo[i])}
STJRV2.markVoted(Array.from(document.querySelectorAll(widgetClassSelector+" .stjr-review-helpful")))})}};var helpfulVote=function(element){element.addEventListener("click",helpfulVoteClick)};var helpfulVoteNo=function(element){element.addEventListener("click",helpfulVoteNoClick)};var helpfulVoteClick=function(e){var parent=e.target.closest("[data-url]");if(parent.querySelector(".js-loading").classList.contains("active"))return;var btn=parent.querySelector(".js-helpful-button");var noBtn=parent.querySelector(".js-helpful-no-button");var voteNum=btn.classList.contains("active")?0:1;var voteIdStr=parent.dataset.vote_id?"&vote_id="+parent.dataset.vote_id:"";if(btn.classList.contains("active")){parent.classList.remove("active");btn.classList.remove("active");parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Was this review helpful?")}else{parent.classList.add("active");btn.classList.add("active");parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Thanks for your feedback!")}
var url=parent.getAttribute("data-url")+"?vote_num="+voteNum+voteIdStr;var reviewId=parent.getAttribute("data-review");var name="helpfulvote-"+reviewId;var value=STJRV2.readCookie(name);var posVoteCounter=parent.querySelector(".js-pos-vote-count");var negVoteCounter=parent.querySelector(".js-neg-vote-count");var posVotes=parseInt(posVoteCounter.innerText?posVoteCounter.innerText:0)+(voteNum?1:-1);var negVotes=parseInt(negVoteCounter.innerText?negVoteCounter.innerText:0)-(noBtn.classList.contains("active")?voteNum:0);posVoteCounter.innerText=posVotes;negVoteCounter.innerText=negVotes;noBtn.classList.remove("active");if(isPreviewMode)return;if(!value||!RegExp("^(("+reviewId+")\\|(pos)\\|(\\d+)\\|("+posVoteCounter+")\\|("+negVoteCounter+"))$").test(value)){parent.querySelector(".js-loading").classList.add("active");STJRV2.ReviewsWidget["voteCallback_"+reviewId]=function(resp){parent.dataset.vote_id=resp.vote_id;STJRV2.createVoteCookies(name,reviewId,resp.vote_id,"pos",posVotes,negVotes,voteNum);parent.querySelector(".js-loading").classList.remove("active")};STJRV2.jsonP(url,function(script){scriptElement=script})}else{parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Thanks for your feedback!")}};var helpfulVoteNoClick=function(e){var parent=e.target.closest("[data-url]");if(parent.querySelector(".js-loading").classList.contains("active"))return;var btn=parent.querySelector(".js-helpful-no-button");var yesBtn=parent.querySelector(".js-helpful-button");var voteNum=btn.classList.contains("active")?0:-1;var voteIdStr=parent.dataset.vote_id?"&vote_id="+parent.dataset.vote_id:"";if(btn.classList.contains("active")){parent.classList.remove("active");btn.classList.remove("active");parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Was this review helpful?")}else{parent.classList.add("active");btn.classList.add("active");parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Thanks for your feedback!")}
var url=parent.getAttribute("data-url")+"?vote_type=not_helpful&vote_num="+voteNum+voteIdStr;var reviewId=parent.getAttribute("data-review");var name="helpfulvote-"+reviewId;var value=STJRV2.readCookie(name);var posVoteCounter=parent.querySelector(".js-pos-vote-count");var negVoteCounter=parent.querySelector(".js-neg-vote-count");var posVotes=parseInt(posVoteCounter.innerText?posVoteCounter.innerText:0)+(yesBtn.classList.contains("active")?voteNum:0);var negVotes=parseInt(negVoteCounter.innerText?negVoteCounter.innerText:0)+(voteNum<0?1:-1);posVoteCounter.innerText=posVotes;negVoteCounter.innerText=negVotes;yesBtn.classList.remove("active");if(isPreviewMode)return;if(!value||!RegExp("^(("+reviewId+")\\|(neg)\\|(\\d+)\\|("+posVoteCounter+")\\|("+negVoteCounter+"))$").test(value)){parent.querySelector(".js-loading").classList.add("active");STJRV2.ReviewsWidget["voteCallback_"+reviewId]=function(resp){parent.dataset.vote_id=resp.vote_id;STJRV2.createVoteCookies(name,reviewId,resp.vote_id,"neg",posVotes,negVotes,voteNum);parent.querySelector(".js-loading").classList.remove("active")};STJRV2.jsonP(url,function(script){scriptElement=script})}else{parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Thanks for your feedback!")}};var truncateText=function(element){var body=element.innerHTML;if(body.length>optionsLength+optionsMinTrail){var splitLocation=body.indexOf(" ",optionsLength);if(splitLocation!=-1){var splitLocation=body.indexOf(" ",optionsLength);var start=0;do{var openTag=body.indexOf("<",start);var closeTag=body.indexOf(">",start+1);if(openTag==-1||closeTag==-1||openTag>splitLocation)break;if(closeTag<splitLocation){start=closeTag+1;continue}
splitLocation=openTag-1;break}while(!0);var str1=body.substring(0,splitLocation);var str2=body.substring(splitLocation,body.length);element.innerHTML=str1+'<span class="stjr-reviews-truncate_ellipsis">'+optionsEllipsisText+"</span>"+'<span class="stjr-reviews-truncate_more" style="display:none;">'+str2+"</span>"+'<a class="stjr-reviews-truncate_more_link">'+optionsMoreText+"</a>";var moreLink=element.querySelector(".stjr-reviews-truncate_more_link");moreLink.addEventListener("click",truncateMoreClick)}}};var truncateMoreClick=function(e){var moreLink=e.target;var parentEl=moreLink.parentElement.parentElement;var moreContent=parentEl.querySelector(".stjr-reviews-truncate_more");var ellipsis=parentEl.querySelector(".stjr-reviews-truncate_ellipsis");var el=document.createElement("div");el.innerHTML=optionsMoreText;moreContent.style.display="inline";moreContent.removeAttribute("data-cbb-price-processed");moreLink.innerHTML="";ellipsis.style.display="none";return!1};var validatorClear=function(e){e.target.className="";var fieldError=document.querySelector("#"+e.target.id+"-error");if(fieldError)fieldError.style.display="none";var fieldError=document.querySelector("#"+e.target.id+"-error-2");if(fieldError)fieldError.style.display="none"};var registrationOkClick=function(e){e.preventDefault();var writeReviewDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-tab-write-review .stjr-review-form-container");var confirmDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-tab-write-review .stjr-review-confirmation");var titleInput=document.querySelector(widgetClassSelector+" #stjr-reviews-tab-form__field--title");var orderIdInput=document.querySelector(widgetClassSelector+" #stjr-reviews-tab-form__field--order-id");var contentInput=document.querySelector(widgetClassSelector+" #stjr-reviews-tab-form__field--content");var nameInput=document.querySelector(widgetClassSelector+" #stjr-registration-form__field--name");var emailInput=document.querySelector(widgetClassSelector+" #stjr-registration-form__field--email");titleInput.value="";if(orderIdInput)orderIdInput.value="";contentInput.value="";nameInput.value="";emailInput.value="";confirmDiv.style.display="none";writeReviewDiv.style.display="block";var writeReviewDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-tab-write-review");var reviewListDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-tab-reviews");var writeReviewBtn=document.querySelector(widgetClassSelector+" .stjr-reviews-tab-write-review__button");var backReviewBtn=document.querySelector(widgetClassSelector+" .stjr-reviews-tab-review-list__button");writeReviewDiv.style.display="none";reviewListDiv.style.display="block";writeReviewBtn.className="stjr-reviews-tab-mode__button stjr-reviews-tab-write-review__button";backReviewBtn.className="stjr-reviews-tab-mode__button stjr-reviews-tab-mode__button--left stjr-reviews-tab-mode__button--active stjr-reviews-tab-review-list__button";var reviewList=document.querySelector(widgetClassSelector+" .stjr-reviews-list-container");reviewList.scrollTop=0;return!1};var isValidEmail=function(value){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&\'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i.test(value)};var submitReviewClick=function(e){e.preventDefault();var titleInput=document.querySelector(widgetClassSelector+" #stjr-reviews-tab-form__field--title");var orderIdInput=document.querySelector(widgetClassSelector+" #stjr-reviews-tab-form__field--order-id");var contentInput=document.querySelector(widgetClassSelector+" #stjr-reviews-tab-form__field--content");var nameInput=document.querySelector(widgetClassSelector+" #stjr-registration-form__field--name");var emailInput=document.querySelector(widgetClassSelector+" #stjr-registration-form__field--email");var bError=!1;if(star==0){var ratingError=document.querySelector(widgetClassSelector+" #stjr-reviews-tab-form__field--rating-error");ratingError.style.display="block";bError=!0}
if(titleInput.value.replace(/(^\s+|\s+$)/g,"").length==0){var titleError=document.querySelector(widgetClassSelector+" #stjr-reviews-tab-form__field--title-error");titleError.style.display="block";titleInput.className="stjr-validator-error";bError=!0}
if(orderIdInput&&orderIdInput.hasAttribute("required")&&orderIdInput.value.replace(/(^\s+|\s+$)/g,"").length==0){var orderIdError=document.querySelector(widgetClassSelector+" #stjr-reviews-tab-form__field--order-id-error");orderIdError.style.display="block";orderIdInput.className="stjr-validator-error";bError=!0}
if(contentInput.value.replace(/(^\s+|\s+$)/g,"").length==0){var contentError=document.querySelector(widgetClassSelector+" #stjr-reviews-tab-form__field--content-error");contentError.style.display="block";contentInput.className="stjr-validator-error";bError=!0}else if(contentInput.value.replace(/(^\s+|\s+$)/g,"").length<100){var contentError=document.querySelector(widgetClassSelector+" #stjr-reviews-tab-form__field--content-error-2");contentError.style.display="block";contentInput.className="stjr-validator-error";bError=!0}
nameInput.value=nameInput.value.replace(/ +(?= )/g,"");var names=nameInput.value.split(" ");if(nameInput.value.replace(/(^\s+|\s+$)/g,"").length==0||names.length<2||names[0].replace(/(^\s+|\s+$)/g,"").length==0||names[1].replace(/(^\s+|\s+$)/g,"").length==0){var nameError=document.querySelector(widgetClassSelector+" #stjr-registration-form__field--name-error");nameError.style.display="block";nameInput.className="stjr-validator-error";bError=!0}
if(nameInput.value.replace(/(^\s+|\s+$)/g,"").length>0&&!/^[a-zA-Z-]+\s[a-zA-Z-\s]+$/i.test(nameInput.value)){var nameError=document.querySelector(widgetClassSelector+" #stjr-registration-form__field--name-error-2");nameError.style.display="block";nameInput.className="stjr-validator-error";bError=!0}
if(emailInput.value.replace(/(^\s+|\s+$)/g,"").length==0||!isValidEmail(emailInput.value.replace(/(^\s+|\s+$)/g,""))){var emailError=document.querySelector(widgetClassSelector+" #stjr-registration-form__field--email-error");emailError.style.display="block";emailInput.className="stjr-validator-error";bError=!0}
if(bError)return!1;function submitOk(data){var writeReviewDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-tab-write-review .stjr-review-form-container");var confirmDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-tab-write-review .stjr-review-confirmation");writeReviewDiv.style.display="none";confirmDiv.style.display="block";var reviewList=document.querySelector(widgetClassSelector+" .stjr-reviews-list");reviewAlreadyWritten=!0;if(data==undefined)return;reviewList.insertAdjacentHTML("afterbegin",data.review_row);var emptyDiv=document.querySelector(widgetClassSelector+" .stjr-review-tab-empty");if(emptyDiv)emptyDiv.style.display="none"}
var submitBtn=document.querySelector(widgetClassSelector+" .stjr-button.stjr-button--registration");var loading=document.querySelector(widgetClassSelector+" .stjr-button--registration-loading");submitBtn.style.display="none";loading.classList.add("active");if(isPreviewMode){var authorName=nameInput.value;var reviewTitle=titleInput.value;var reviewContent=contentInput.value;var reviewStar=20*star;var reviewDate=new Date();reviewDate=reviewDate.getMonth()+1+"/"+reviewDate.getDate()+"/"+reviewDate.getFullYear().toString().substr(2,2);var reviewRow='<div class="stjr-review-row "><div class="stjr-author"><div class="stjr-author__thumbnail">';reviewRow+='<div class="photo medium "><img class="medium noborder " style="width: 100%; height: 100%; display: inline;" src="/img/default_profile_photo.png">';reviewRow+='</div></div><div class="stjr-author__name">'+authorName+"</div></div>";reviewRow+='<div class="stjr-review"><div class="stjr-review__title"><a href="#">'+reviewTitle+"</a></div>";reviewRow+='<div class="stjr-review__stars"><div class="star_rating"><div class="star rating" style="width:'+reviewStar+'%;">';reviewRow+='</div></div><div class="stjr-review__time">'+reviewDate+'</div><div class="clear"></div></div>';reviewRow+='<p class="stjr-review__content">'+reviewContent+"</p>";reviewRow+='<div class="stjr-review__links"><div class="stjr-review__primary-links"><span class="stjr-review-helpful">';reviewRow+='<div class="helpful_container"><span class="isHelpful">'+STJRV2.__("Was this review helpful?")+'</span>';reviewRow+='<span class="helpfulButton"><span class="stjr-icon__thumbs-up--o"></span></span><span class="helpfulButtonNo"><span class="stjr-icon__thumbs-down--o"></span></span></div></span></div>';reviewRow+="</div></div></div>";var data={review_row:reviewRow};setTimeout(submitOk,1000,data);return!1}
STJRV2.ReviewsWidget["submitCallback_"+widgetNumber]=function(data){if(data&&data.status=="ERROR"){var submitBtn=document.querySelector(widgetClassSelector+" .stjr-button.stjr-button--registration");var loading=document.querySelector(widgetClassSelector+" .stjr-button--registration-loading");submitBtn.style.display="inline-block";loading.classList.remove("active");alert(data.message);return!1}
submitOk(data)};var url=STJRV2.getBase()+"/widget-review-tab-submit/fragrancex.com/"+widgetNumber;var adds="?date_of_experience="+encodeURIComponent(dateOfExperienceInput.value)+"&";adds="title="+encodeURIComponent(titleInput.value)+"&";if(orderIdInput)adds+="order_id="+encodeURIComponent(orderIdInput.value)+"&";adds+="content="+encodeURIComponent(contentInput.value)+"&";adds+="name="+encodeURIComponent(nameInput.value)+"&";adds+="email="+encodeURIComponent(emailInput.value.replace(/(^\s+|\s+$)/g,""))+"&";adds+="rating="+star;STJRV2.jsonP(url+adds,function(script){scriptElement=script});return!1};var reviewListClick=function(e){e.preventDefault();var writeReviewDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-tab-write-review");var reviewListDiv=document.querySelector(widgetClassSelector+" .stjr-reviews-tab-reviews");var writeReviewBtn=document.querySelector(widgetClassSelector+" .stjr-reviews-tab-write-review__button");var backReviewBtn=document.querySelector(widgetClassSelector+" .stjr-reviews-tab-review-list__button");writeReviewDiv.style.display="none";reviewListDiv.style.display="block";writeReviewBtn.className="stjr-reviews-tab-mode__button stjr-reviews-tab-write-review__button";backReviewBtn.className="stjr-reviews-tab-mode__button stjr-reviews-tab-mode__button--left stjr-reviews-tab-mode__button--active stjr-reviews-tab-review-list__button";var reviewList=document.querySelector(widgetClassSelector+"  .stjr-reviews-list-container");reviewList.scrollTop=0;return!1};var checkReview=function(e){var dateOfExperienceInput=document.querySelector(widgetClassSelector+" #stjr-reviews-tab-form__field--date_of_experience");var titleInput=document.querySelector(widgetClassSelector+" #stjr-reviews-tab-form__field--title");var contentInput=document.querySelector(widgetClassSelector+" #stjr-reviews-tab-form__field--content");var orderIdInput=document.querySelector(widgetClassSelector+" #stjr-reviews-tab-form__field--order-id");var registrationForm=document.querySelector(widgetClassSelector+" .stjr-registration-form");if(dateOfExperienceInput.value&&titleInput.value.replace(/(^\s+|\s+$)/g,"").length>0&&contentInput.value.replace(/(^\s+|\s+$)/g,"").length>0&&(!orderIdInput||orderIdInput.value.replace(/(^\s+|\s+$)/g,"").length>0)){registrationForm.style.display="block";var reviewForm=document.querySelector(widgetClassSelector+" .stjr-review-form-container");reviewForm.scrollTop=200}else registrationForm.style.display="none"};var starsMove=function(e){var p=document.querySelector(widgetClassSelector+" .stjr-review-form__field .stars--widgets--medium").getBoundingClientRect(),st=document.querySelectorAll(widgetClassSelector+" .stjr-review-form__field .stars--widgets--medium .star--medium");if(!st.length)return;var starLength=st[0].offsetWidth,t=Math.max(Math.min(Math.ceil((e.clientX-p.left)/starLength),5),1);for(var i=0;i<t;i++){if(st[i]==undefined)continue;if(st[i].className.indexOf("custom-icon-star2-empty")>=0)st[i].className=st[i].className.replace(/\bcustom-icon-star2-empty\b/g,"custom-icon-star2-full");}
for(var i=t;i<5;i++){if(st[i]==undefined)continue;if(st[i].className.indexOf("custom-icon-star2-full")>=0)st[i].className=st[i].className.replace(/\bcustom-icon-star2-full\b/g,"custom-icon-star2-empty");}};var starsLeave=function(){var st=document.querySelectorAll(widgetClassSelector+" .stjr-review-form__field .stars--widgets--medium .star--medium");for(var i=star;i<5;i++){if(st[i]==undefined)continue;if(st[i].className.indexOf("custom-icon-star2-full")>=0)st[i].className=st[i].className.replace(/\bcustom-icon-star2-full\b/g,"custom-icon-star2-empty");}};var starsClick=function(e){var pageX=e.clientX;if(pageX==undefined)return;var p=document.querySelector(widgetClassSelector+" .stjr-review-form__field .stars--widgets--medium").getBoundingClientRect(),st=document.querySelectorAll(widgetClassSelector+" .stjr-review-form__field .stars--widgets--medium .star--medium");if(!st.length)return;var starLength=st[0].offsetWidth;star=Math.max(Math.min(Math.ceil((pageX-p.left)/starLength),5),1);for(var i=0;i<star;i++){if(st[i]==undefined)continue;if(st[i].className.indexOf("custom-icon-star2-full")>=0)st[i].className=st[i].className.replace(/\bcustom-icon-star2-full\b/g,"custom-icon-star2");}
for(var i=star;i<5;i++){if(st[i]==undefined)continue;st[i].className=st[i].className.replace(/\bcustom-icon-star2(-full|-empty)?\b/g,"custom-icon-star2-empty")}
var ratingError=document.querySelector(widgetClassSelector+" #stjr-reviews-tab-form__field--rating-error");ratingError.style.display="none"};var writeReviewClick=function(e){e.preventDefault();var reviewListDiv=document.querySelector(widgetClassSelector+"  .stjr-reviews-tab-reviews");var writeReviewDiv=document.querySelector(widgetClassSelector+"  .stjr-reviews-tab-write-review");var writeReviewBtn=document.querySelector(widgetClassSelector+"  .stjr-reviews-tab-write-review__button");var backReviewBtn=document.querySelector(widgetClassSelector+"  .stjr-reviews-tab-review-list__button");reviewListDiv.style.display="none";writeReviewDiv.style.display="block";writeReviewBtn.className="stjr-reviews-tab-mode__button stjr-reviews-tab-write-review__button stjr-reviews-tab-mode__button--active";backReviewBtn.className="stjr-reviews-tab-mode__button stjr-reviews-tab-mode__button--left stjr-reviews-tab-review-list__button";if(reviewAlreadyWritten){var confirmDiv=document.querySelector(widgetClassSelector+"  .stjr-reviews-tab-write-review .stjr-review-confirmation");var writeReviewDiv=document.querySelector(widgetClassSelector+"  .stjr-reviews-tab-write-review .stjr-review-form-container");writeReviewDiv.style.display="none";confirmDiv.style.display="block"}
writeReviewDiv=document.querySelector(widgetClassSelector+"  .stjr-review-form-container");writeReviewDiv.scrollTop=0;return!1};var pageClick=function(e){var o=e.currentTarget;if(o.tagName=="SPAN")o=o.querySelector("a");if(o&&o.href){var matches=o.href.match(/page=(\d+)/);page=matches?parseInt(matches[1]):null}
if(!page||isNaN(page))page=1;var reviewList=document.querySelector(widgetClassSelector+"  .stjr-reviews-list-container");document.querySelector(widgetClassSelector+"  .js-stjr-reviews-tab-reviews__loading").classList.add("active");loadReviews(page);e.preventDefault();return!1};var closeClick=function(e){var close=document.querySelector(widgetClassSelector+" .stjr-reviews-tab-header .stjr-reviews-tab-header__close");var modal=document.querySelector(widgetClassSelector+" .stjr-container.stjr-reviews-tab.stjr-reviews-tab-modal");if(e.target==modal||e.target==close){var elem=modal.querySelector(".stjr-reviews-tab-modal-content");function animationEnd(){elem.removeEventListener("animationend",animationEnd);elem.removeEventListener("webkitAnimationEnd",animationEnd);elem.removeEventListener("MSAnimationEnd",animationEnd);elem.style.display="none";elem.className="stjr-reviews-tab-modal-content";modal.style.display="none";modal.className="stjr-container stjr-reviews-tab stjr-reviews-tab-modal"}
elem.addEventListener("animationend",animationEnd);elem.addEventListener("webkitAnimationEnd",animationEnd);elem.addEventListener("MSAnimationEnd",animationEnd);elem.className="stjr-reviews-tab-modal-content stjr-close";modal.className="stjr-container stjr-reviews-tab stjr-reviews-tab-modal stjr-coverclose";var errorEls=document.querySelectorAll(widgetClassSelector+" .stjr-validator-error");errorEls.forEach((el)=>{if(el.nodeName=="DIV"){el.style.display="none"}})}};var buttonClick=function(e){var modal=document.querySelector(widgetClassSelector+" .stjr-container.stjr-reviews-tab.stjr-reviews-tab-modal");var modalContent=document.querySelector(widgetClassSelector+" .stjr-container.stjr-reviews-tab.stjr-reviews-tab-modal .stjr-reviews-tab-modal-content");function animationEnd(){modal.removeEventListener("animationend",animationEnd);modal.removeEventListener("webkitAnimationEnd",animationEnd);modal.removeEventListener("MSAnimationEnd",animationEnd);modalContent.style.display="block";modal.className="stjr-container stjr-reviews-tab stjr-reviews-tab-modal"}
modal.addEventListener("animationend",animationEnd);modal.addEventListener("webkitAnimationEnd",animationEnd);modal.addEventListener("MSAnimationEnd",animationEnd);modal.className="stjr-container stjr-reviews-tab stjr-reviews-tab-modal stjr-coveropen";modal.style.display="block"};var logoClick=function(e){e.preventDefault();var url=STJRV2.getBase();window.open(url);return!1};timer=setInterval(init,1000);return{reset:function(element){element.innerHTML="";element.classList.remove("stjr-init");const regex=new RegExp(/stjr-callback-\d/,"g");if(element.className.match(regex))element.className=element.className.replace(regex,"");timer=setInterval(init,1000)},}})();STJRV2.ReviewsShowcaseWidget=(function(){var that,widgetInitClassName="stjr-review-showcase",widgetName="ReviewsShowcaseWidget",widgetInitRoutePath="widget-showcase",options={},query="",id=widgetName,timer,widgetNumber,widgetClassSelector=null,isPreviewMode=!1,that=this;var init=function(){var element=document.querySelector(`.${widgetInitClassName}:not(.stjr-init)`);if(!element)return;widgetNumber=STJRV2.getNextWidgetNumber();var url=`${STJRV2.subBaseToCDN()}/${widgetInitRoutePath}/fragrancex.com/${widgetNumber}`;(attrOptions=STJRV2.getAttrObj(element)),(otherOptions=STJRV2.getConfig());id="stjr-widget"+widgetNumber;options=Object.assign({},otherOptions,attrOptions);isPreviewMode=typeof options.test!="undefined"?options.test:!1;element.classList.add("stjr-init","stjr-callback-"+widgetNumber,widgetName+"-"+widgetNumber);widgetClassSelector="."+widgetName+"-"+widgetNumber;query=STJRV2.getQueryString(Object.assign({},options),null);var initErrorCallback=null;STJRV2.ReviewsWidget["receiveCallback_"+widgetNumber]=function(resp){STJRV2.setResponse("response"+resp.callback,resp)};STJRV2.setResponse("response"+widgetNumber,null);STJRV2.jsonP(url+"?"+query,widgetNumber,function(script){render(widgetNumber)},initErrorCallback);clearInterval(timer)};var render=function(){var sj_responses=STJRV2.getResponse("response"+widgetNumber);if(!STJRV2.hasLoadedStyleSheet()||!sj_responses){window.setTimeout(render.bind(this,widgetNumber),500);return}
if(sj_responses.loaded)return;sj_responses.loaded=!0;STJRV2.setResponse("response"+widgetNumber,sj_responses);var element=document.querySelector(widgetClassSelector);if(!element){return}
element.innerHTML=sj_responses.html;update();window.removeEventListener("resize",update);window.addEventListener("resize",update);var btnClose=document.querySelector(widgetClassSelector+" .stjr-review-showcase-widget-header__close");if(btnClose!==null){btnClose.addEventListener("click",closeClick)};Array.from(document.querySelectorAll('.js-stjr-read-more-popup')).forEach(function(el){el.addEventListener('click',openWindow)})};var update=function(e){var horizontalWidgetParent=document.querySelector(widgetClassSelector);horizontalWidgetParent.style.width='100%';var horizontalWidget=document.querySelector(widgetClassSelector+" .js-stjr-review-showcase-horizontal-widget");if(horizontalWidget){horizontalWidget.querySelector('.stjr-review-showcase-horizontal-widget-body').style.height=(horizontalWidget.querySelector('.stjr-review-showcase-horizontal-widget-review-container__first').clientHeight+20)+'px'}
if(horizontalWidget&&horizontalWidget.offsetWidth<768){horizontalWidget.classList.add("stjr-review-showcase-horizontal-widget--mobile")}else if(horizontalWidget){horizontalWidget.classList.remove("stjr-review-showcase-horizontal-widget--mobile")}};var closeClick=function(e){STJRV2.createCookie("stjr-review-showcase-widget-closed","1");var showcaseWidget=document.querySelector(widgetClassSelector+" .stjr-container.stjr-review-showcase-widget");var className=showcaseWidget.className;function animationEnd(){showcaseWidget.removeEventListener("animationend",animationEnd);showcaseWidget.removeEventListener("webkitAnimationEnd",animationEnd);showcaseWidget.removeEventListener("MSAnimationEnd",animationEnd);showcaseWidget.className=className;showcaseWidget.style.display="none"}
showcaseWidget.addEventListener("animationend",animationEnd);showcaseWidget.addEventListener("webkitAnimationEnd",animationEnd);showcaseWidget.addEventListener("MSAnimationEnd",animationEnd);showcaseWidget.className=className+" stjr-showcase-close"};var openWindow=function(ev){ev.preventDefault();ev.stopPropagation();var thisEl=ev.target;var reviewId=thisEl.getAttribute("data-review-id");STJRV2.ReviewWindowWidget.set({id:"reviewWindowWidget",url:options.url,test:options.test,review_id:reviewId,type:'review'})};timer=setInterval(init,1000);return{reset:function(element){element.innerHTML="";element.classList.remove("stjr-init");const regex=new RegExp(/stjr-callback-\d/,"g");if(element.className.match(regex))element.className=element.className.replace(regex,"");timer=setInterval(init,1000)},}})();STJRV2.ReviewCarouselWidget=(function(){var that,widgetInitClassName="stjr-review-carousel",widgetName="ReviewCarouselWidget",widgetInitRoutePath="widget-review-carousel",options={},query="",id=widgetName,timer,that=this;var init=function(opts,singleEl=null){if(singleEl==null){var elements=document.querySelectorAll(`.${widgetInitClassName}:not(.stjr-init)`);if(elements.length==0)return;Array.from(elements).forEach((el)=>{init(opts,el)});return}
var element=singleEl;widgetNumber=STJRV2.getNextWidgetNumber();var url=`${STJRV2.subBaseToCDN()}/${widgetInitRoutePath}/fragrancex.com/${widgetNumber}`;(attrOptions=STJRV2.getAttrObj(element)),(otherOptions=STJRV2.getConfig());id="stjr-widget"+widgetNumber;options=Object.assign({},otherOptions,attrOptions);isPreviewMode=typeof options.test!="undefined"?options.test:!1;element.classList.add("stjr-init","stjr-callback-"+widgetNumber,widgetName+"-"+widgetNumber);widgetClassSelector="."+widgetName+"-"+widgetNumber;query=STJRV2.getQueryString(Object.assign({},options),null);var initErrorCallback=null;STJRV2.ReviewsWidget["receiveCallback_"+widgetNumber]=function(resp){STJRV2.setResponse("response"+resp.callback,resp)};STJRV2.setResponse("response"+widgetNumber,null);STJRV2.jsonP(url+"?"+query,widgetNumber,function(script){render(widgetNumber)},initErrorCallback);clearInterval(timer)};var render=function(singleWidgetNumber){var widgetNumber=singleWidgetNumber,additionalOptions,widgetClassSelector=null,isPreviewMode=!1,lastX,currentPage,firstRender=!0,currentPageIndex=0,totalNumPages=0,totalNumReviews=0,prevReviewsPerPage=0,moving=!1,rules,transWidth=100,styleEdges=null,pagesNeeded,carouselDirectionReverse=!1,sliderContainer=null,currentPageOrder=1;var sj_responses=STJRV2.getResponse("response"+singleWidgetNumber);var widgetClassSelector="."+widgetName+"-"+singleWidgetNumber;if(!STJRV2.hasLoadedStyleSheet()||!sj_responses){window.setTimeout(render.bind(this,singleWidgetNumber),500);return}
if(sj_responses.loaded)return;sj_responses.loaded=!0;STJRV2.setResponse("response"+singleWidgetNumber,sj_responses);var element=document.querySelector(widgetClassSelector);if(!element){return}
element.innerHTML=sj_responses.html;var cont=element.querySelector(".js-stjr-reviews-carousel-src-reviews");if(cont==null)return;var sourceContainer=cont;var srcReviews=element.querySelectorAll(".js-stjr-reviews-carousel-review");if(srcReviews.length==1){sourceContainer.style.display="none"}
var navLeftBtn=document.querySelector(widgetClassSelector+" .js-stjr-reviews-carousel-nav--left");var navRightBtn=document.querySelector(widgetClassSelector+" .js-stjr-reviews-carousel-nav--right");var _pages=document.querySelectorAll(widgetClassSelector+" .stjr-reviews-carousel-pagination .stjr-reviews-carousel-pagination__dot");totalNumReviews=parseInt(sj_responses.num_reviews);cont.addEventListener("touchstart",navLeft,{passive:!0});cont.addEventListener("touchend",navRight,{passive:!0});if(srcReviews.length>0&&navLeftBtn&&navRightBtn){navLeftBtn.addEventListener("click",navLeft,{passive:!0});navRightBtn.addEventListener("click",navRight,{passive:!0})}
resize();window.addEventListener("resize",debounce(resize,1000));function scrollDots(){var el=document.querySelector(widgetClassSelector+" .stjr-reviews-carousel-pagination__dot--active");var els=document.querySelectorAll(widgetClassSelector+" .stjr-reviews-carousel-pagination__dot");var outerParent=el.closest(".stjr-reviews-carousel-pagination-wrapper");var parent=el.closest(".stjr-reviews-carousel-pagination");var index=Array.from(els).indexOf(el);parentOffsetL=parent.style.transform.match(/\d+/);parentTotalOffsetWidth=parentOffsetL?parseInt(parentOffsetL[0])+outerParent.offsetWidth:outerParent.offsetWidth;var requiredWith=outerParent.offsetWidth*Math.ceil(parent.offsetWidth/(index*16)-2)-8;parent.style.transform=`translateX(-${outerParent.offsetWidth * Math.ceil(parent.offsetWidth / (index * 16) - 2) - 8}px)`;if(index*16>outerParent.offsetWidth){parent.style.transform=`translateX(-${outerParent.offsetWidth * (Math.ceil((index * 16) / outerParent.offsetWidth) - 1)}px)`}else{parent.style.transform=``}}
function navLeft(){if(!styleEdges){navLeftLoop()}
if(currentPageIndex==0){currentPageIndex=totalNumPages-1;gotoPage(currentPageIndex);return}
currentPageIndex--;gotoPage(currentPageIndex)}
function navRight(){if(!styleEdges){navRightLoop()}
if(!(currentPageIndex<totalNumPages-1)){currentPageIndex=0;gotoPage(currentPageIndex);return}
currentPageIndex++;gotoPage(currentPageIndex)}
function autoScroll(){var navAuto=document.querySelector(widgetClassSelector+" .js-stjr-reviews-carousel-nav--auto");var pageCont=document.querySelector(widgetClassSelector+" .js-stjr-reviews-carousel-pages");if(!navAuto){return}
if(!navAuto.classList.contains("js-stjr-reviews-carousel-nav--auto-init")){var animationStyleSheet=`<style id="stjr-animation-stylesheet"> .stjr-autoscroll-animator { animation: stjr-autoscroll-animation ${pageCont.scrollWidth / 50}s 1s infinite linear;} @keyframes stjr-autoscroll-animation{ from{ transform: translateX(0%);} to{ transform: translateX(-${pageCont.scrollWidth}px);}}
        </style>`;document.body.insertAdjacentHTML("beforeend",animationStyleSheet);navAuto.addEventListener("mouseenter",(e)=>{e.target.classList.add("js-stjr-reviews-carousel-nav--auto-pause");pageCont.style.animationPlayState="paused"});navAuto.addEventListener("mouseleave",(e)=>{e.target.classList.remove("js-stjr-reviews-carousel-nav--auto-pause");pageCont.style.animationPlayState="running"});navAuto.classList.add("js-stjr-reviews-carousel-nav--auto-init");pageCont.classList.add("stjr-autoscroll-animator")}}
function navLeftLoop(){carouselDirectionReverse=!0;sliderContainer.style.justifyContent="flex-end";sliderContainer.classList.remove("stjr-util-slider-container-transition");sliderContainer.style.left="0%";sliderContainer.classList.add("stjr-util-slider-container-transition");sliderContainer.style.left="100%"}
function navRightLoop(){carouselDirectionReverse=!1;sliderContainer.style.justifyContent="flex-start";sliderContainer.classList.remove("stjr-util-slider-container-transition");sliderContainer.style.left="0%";sliderContainer.classList.add("stjr-util-slider-container-transition");sliderContainer.style.left="-100%"}
function changeSlide(){var allEls=[];allEls=Array.from(document.querySelectorAll(widgetClassSelector+" [data-position]"));if(carouselDirectionReverse){if(currentPageOrder==1){currentPageOrder=pagesNeeded}else{currentPageOrder--}}else{if(currentPageOrder==pagesNeeded){currentPageOrder=1}else{currentPageOrder++}}
let order=1;if(carouselDirectionReverse){for(let i=currentPageOrder;i<=pagesNeeded&&i>0;i++){allEls[i-1].style.order=order;order++}
for(let i=1;i<currentPageOrder&&i>0;i++){allEls[i-1].style.order=order;order++}}
if(!carouselDirectionReverse){for(let i=currentPageOrder;i<=pagesNeeded;i++){allEls[i-1].style.order=order;order++}
for(let i=1;i<currentPageOrder;i++){allEls[i-1].style.order=order;order++}}
sliderContainer.classList.remove("stjr-util-slider-container-transition");sliderContainer.style.left="0"}
function gotoPage(pI,runFully=!1){currentPageIndex=pI;var haveDuplicate=!1;var TempTransWidth=transWidth;if(runFully){carouselDirectionReverse=null;sliderContainer.classList.add("stjr-util-slider-container-transition")}
if(styleEdges||runFully){var tempOnePage=document.querySelector(widgetClassSelector+" .stjr-reviews-carousel-pages__page");sliderContainer.style.left="-"+(tempOnePage.clientWidth*(currentPageIndex+1)-tempOnePage.clientWidth/10)+"px";var order=1;var allEls=Array.from(document.querySelectorAll(widgetClassSelector+" [data-position]"));for(let i=0;i<allEls.length;i++){allEls[i].style.order=order;order++}}
var activeDot=document.querySelector(widgetClassSelector+" .js-stjr-reviews-carousel-pagination__dot.stjr-reviews-carousel-pagination__dot--active");if(activeDot){activeDot.classList.remove("stjr-reviews-carousel-pagination__dot--active")}
var dots=document.querySelectorAll(widgetClassSelector+" .js-stjr-reviews-carousel-pagination__dot");if(dots&&dots.length>0){dots[currentPageIndex].classList.add("stjr-reviews-carousel-pagination__dot--active");scrollDots()}
var activePage=document.querySelector(widgetClassSelector+" .js-stjr-reviews-carousel-pages .js-stjr-reviews-carousel-pages__page.stjr-reviews-carousel-pages__page--active");if(activePage){activePage.classList.remove("stjr-reviews-carousel-pages__page--active")}
var pages=document.querySelectorAll(widgetClassSelector+" .js-stjr-reviews-carousel-pages .js-stjr-reviews-carousel-pages__page");if(pages&&pages.length>0){pages[currentPageIndex].classList.add("stjr-reviews-carousel-pages__page--active")}}
function handleDotClick(e){var dotIndex=parseInt(e.target.dataset.page);currentPageOrder=dotIndex+1;gotoPage(dotIndex,!0)}
function resize(){var prevMaxW=document.querySelector(widgetClassSelector+" .stjr-reviews-carousel").style.maxWidth;var prevLeft=document.querySelector(widgetClassSelector+" .js-stjr-reviews-carousel-pages").style.left;document.querySelector(widgetClassSelector+" .js-stjr-reviews-carousel-pages").style.left="0%";document.querySelector(widgetClassSelector+" .stjr-reviews-carousel").style.maxWidth="100%";var reviewRows=document.querySelectorAll(widgetClassSelector+" .stjr-reviews-carousel-reviews-container .stjr-reviews-carousel-reviews.stjr-reviews-carousel-review");var prevDots=document.querySelectorAll(widgetClassSelector+" .js-stjr-reviews-carousel-pagination__dot");var minReviewWidth=270;var sourceContainer=document.querySelector(widgetClassSelector+" .js-stjr-reviews-carousel-src-reviews");var srcReviews=sourceContainer.querySelectorAll(widgetClassSelector+" .js-stjr-reviews-carousel-review");var pagesEl=document.querySelector(widgetClassSelector+" .js-stjr-reviews-carousel-pages");var navAuto=document.querySelector(widgetClassSelector+" .js-stjr-reviews-carousel-nav--auto");reviewPageWidth=pagesEl.offsetWidth;styleEdges=document.querySelector(widgetClassSelector+" .js-stjr-reviews-carousel-page-visible-edges");if(styleEdges){transWidth=80}
if(reviewPageWidth<minReviewWidth)minReviewWidth=reviewPageWidth;if(styleEdges)reviewPageWidth=reviewPageWidth*(transWidth/100);var reviewsPerPage=navAuto?srcReviews.length:parseInt(reviewPageWidth/minReviewWidth);reviewsPerPage=!reviewsPerPage?1:reviewsPerPage;if(prevReviewsPerPage==reviewsPerPage){document.querySelector(widgetClassSelector+" .js-stjr-reviews-carousel-pages").style.left=prevLeft;document.querySelector(widgetClassSelector+" .stjr-reviews-carousel").style.maxWidth=prevMaxW;return}
sliderContainer=pagesEl;currentPageOrder=1;currentPageIndex=0;carouselDirectionReverse=!1;if(styleEdges){sliderContainer.classList.add("stjr-util-slider-container-transition")}
var paginationEl=document.querySelector(widgetClassSelector+" .js-stjr-reviews-carousel-pagination");prevReviewsPerPage=reviewsPerPage;pagesNeeded=navAuto?1:Math.ceil(srcReviews.length/reviewsPerPage);currentPageIndex=0;totalNumPages=pagesNeeded;var pagesHtml="";var paginationHtml="";var reviewIndex=0;pagesEl.innerHTML="";for(var pageIndex=0;pageIndex<pagesNeeded;pageIndex++){pagesHtml+=`<div class="stjr-reviews-carousel-pages__page js-stjr-reviews-carousel-pages__page ${pageIndex == 0 ? "stjr-reviews-carousel-pages__page--active" : ""}" data-position="${pageIndex + 1}"><div class="stjr-reviews-carousel-pages__page-inner js-stjr-reviews-carousel-pages__page-inner" ${navAuto ? 'style="width:auto;"' : ""}>`;paginationHtml+=`<div class="stjr-reviews-carousel-pagination__dot js-stjr-reviews-carousel-pagination__dot ${pageIndex == 0 ? "stjr-reviews-carousel-pagination__dot--active" : ""}" data-page="${pageIndex}"></div>`;var reviewCount=0;var duplicateCount=0;while(reviewCount<reviewsPerPage){reviewIndex<srcReviews.length;if(srcReviews[reviewIndex]){pagesHtml+=srcReviews[reviewIndex].outerHTML}else{if(srcReviews[duplicateCount]){pagesHtml+=srcReviews[duplicateCount].outerHTML}else{duplicateCount=0;pagesHtml+=srcReviews[duplicateCount].outerHTML}
duplicateCount++}
reviewCount++;reviewIndex++}
if(pageIndex==pagesNeeded-1&&reviewCount<reviewsPerPage-1){for(var u=0;u<reviewsPerPage-reviewCount;u++){if(srcReviews[pagesHtml]){pagesHtml+=srcReviews[u].outerHTML}}}
pagesHtml+=`</div></div>`}
if(paginationEl){paginationEl.innerHTML=paginationHtml}
pagesEl.innerHTML=pagesHtml;currentPage=0;document.querySelectorAll(widgetClassSelector+" .js-stjr-reviews-carousel-pagination__dot").forEach((el)=>{el.addEventListener("click",handleDotClick)});var $pagesContainer=document.querySelector(widgetClassSelector+" .js-stjr-reviews-carousel-pages-container");var activePage=document.querySelector(widgetClassSelector+" .js-stjr-reviews-carousel-pages__page.stjr-reviews-carousel-pages__page--active");$pagesContainer.classList.remove("stjr-reviews-carousel-pages--height-even");if(activePage)activePage.classList.remove("stjr-reviews-carousel-pages__page--active");if(tempPages&&tempPages.length>0)tempPages[tempPages.length-1].classList.remove("stjr-reviews-carousel-pages__page--active");if(!navAuto){var maxHeight=-1;var innerPages=document.querySelectorAll(widgetClassSelector+" .js-stjr-reviews-carousel-pages__page-inner");for(var el of innerPages){maxHeight=maxHeight>el.offsetHeight?maxHeight:el.offsetHeight}
$pagesContainer.style.minHeight=maxHeight+8+"px"}
var tempPages=document.querySelectorAll(widgetClassSelector+" .js-stjr-reviews-carousel-pages__page");if(styleEdges){pagesEl.innerHTML=tempPages[tempPages.length-1].outerHTML+pagesEl.innerHTML+tempPages[0].outerHTML;tempPages=document.querySelectorAll(widgetClassSelector+" .js-stjr-reviews-carousel-pages__page");tempPages[0].classList.remove("js-stjr-reviews-carousel-pages__page");tempPages[tempPages.length-1].classList.remove("js-stjr-reviews-carousel-pages__page");tempPages[tempPages.length-1].classList.remove("stjr-reviews-carousel-pages__page--active");tempPages[1].classList.add("stjr-reviews-carousel-pages__page--active");document.querySelector("body").insertAdjacentHTML("beforebegin","<style>.stjr-reviews-carousel-pages__page:not(.stjr-reviews-carousel-pages__page--active) .stjr-reviews-carousel-pages__page-inner {min-height: calc(100% - 40px);}</style>")}else{$pagesContainer.classList.add("stjr-reviews-carousel-pages--height-even");tempPages[0].classList.add("stjr-reviews-carousel-pages__page--active")}
var finalActivePage=document.querySelector(widgetClassSelector+" .js-stjr-reviews-carousel-pages__page.stjr-reviews-carousel-pages__page--active");var navLeftBtn=document.querySelector(widgetClassSelector+" .js-stjr-reviews-carousel-nav--left");var navRightBtn=document.querySelector(widgetClassSelector+" .js-stjr-reviews-carousel-nav--right");if(navLeftBtn&&navRightBtn){navLeftBtn.style.top=finalActivePage.offsetHeight/2-25+"px";navRightBtn.style.top=finalActivePage.offsetHeight/2-25+"px"}
if(firstRender&&!styleEdges&&!navAuto){$pagesContainer.addEventListener("transitionend",()=>{changeSlide()})}
var activePageW=0;if(styleEdges){activePageW=document.querySelector(widgetClassSelector+" .stjr-reviews-carousel-pages__page--active .stjr-reviews-carousel-pages__page-inner").clientWidth;document.querySelector(widgetClassSelector+" .stjr-reviews-carousel").style.maxWidth=activePageW+(activePageW*20)/100+"px";Array.from(document.querySelectorAll(widgetClassSelector+" .stjr-reviews-carousel-pages__page")).forEach((el)=>{el.style.maxWidth=activePageW+"px";el.style.minWidth=activePageW+"px"});var contentW=document.querySelector(widgetClassSelector+" .js-stjr-reviews-carousel-content").clientWidth;if(contentW<255){Array.from(document.querySelectorAll(widgetClassSelector+" .js-stjr-reviews-carousel-content .js-stjr-reviews-carousel-review")).forEach((el)=>{el.style.maxWidth=(contentW-20)+"px"})}}else if(!navAuto){activePageW=document.querySelector(widgetClassSelector+" .stjr-reviews-carousel-nav.stjr-reviews-carousel-nav--left").clientWidth+document.querySelector(widgetClassSelector+" .stjr-reviews-carousel-nav.stjr-reviews-carousel-nav--right").clientWidth+document.querySelector(widgetClassSelector+" .stjr-reviews-carousel-pages__page--active .stjr-reviews-carousel-pages__page-inner").clientWidth;document.querySelector(widgetClassSelector+" .stjr-reviews-carousel").style.maxWidth=activePageW+20+"px";var contentW=document.querySelector(widgetClassSelector+" .js-stjr-reviews-carousel-content").clientWidth;if(contentW<255){Array.from(document.querySelectorAll(widgetClassSelector+" .js-stjr-reviews-carousel-content .js-stjr-reviews-carousel-review")).forEach((el)=>{el.style.maxWidth=contentW+"px"})}}
gotoPage(0);autoScroll();if(firstRender){firstRender=!1}}
function debounce(fn,delay){var timeout;return function(){var context=this,args=arguments;clearTimeout(timeout);timeout=setTimeout(function(){fn.apply(context,args)},delay||250)}}
STJRV2.consolidateOnPageOrganizationJsonSchema()};timer=setInterval(init,1000);return{reset:function(element){element.innerHTML="";element.classList.remove("stjr-init");const regex=new RegExp(/stjr-callback-\d/,"g");if(element.className.match(regex))element.className=element.className.replace(regex,"");timer=setInterval(init,1000)},}})();STJRV2.ReviewGridPageWidget=(function(){var that,widgetInitClassName="stjr-review-grid-page",widgetName="ReviewGridPageWidget",widgetInitRoutePath="widget-review-grid-page",options={},query="",id=widgetName,timer,widgetNumber,additionalOptions,widgetClassSelector=null,isPreviewMode=!1,currentPage=1,currentProductPage=1,havePages=!0,maxPages=0,loading=!1,initReady=!1,scrollMaxHeight=600,numReviewsPage=12;that=this;var init=function(){var element=document.querySelector(`.${widgetInitClassName}:not(.stjr-init)`);if(!element)return;widgetNumber=STJRV2.getNextWidgetNumber();var url=`${STJRV2.subBaseToCDN()}/${widgetInitRoutePath}/fragrancex.com/${widgetNumber}`;(attrOptions=STJRV2.getAttrObj(element)),(otherOptions=STJRV2.getConfig());initReady=!1;currentPage=1;currentProductPage=1;id="stjr-widget"+widgetNumber;options=Object.assign({},otherOptions,attrOptions);isPreviewMode=typeof options.test!="undefined"?options.test:!1;element.classList.add("stjr-init","stjr-callback-"+widgetNumber,widgetName+"-"+widgetNumber);widgetClassSelector="."+widgetName+"-"+widgetNumber;query=STJRV2.getQueryString(Object.assign({},options),null);var initErrorCallback=null;STJRV2.ReviewsWidget["receiveCallback_"+widgetNumber]=function(resp){STJRV2.setResponse("response"+resp.callback,resp)};STJRV2.setResponse("response"+widgetNumber,null);STJRV2.jsonP(url+"?"+query,widgetNumber,function(script){render(widgetNumber)},initErrorCallback);clearInterval(timer)};var render=function(){var sj_responses=STJRV2.getResponse("response"+widgetNumber);if(!STJRV2.hasLoadedStyleSheet()||!sj_responses){window.setTimeout(render,500);return}
if(sj_responses.loaded)return;sj_responses.loaded=!0;STJRV2.setResponse("response"+widgetNumber,sj_responses);var element=document.querySelector(widgetClassSelector);if(!element){return}
element.innerHTML=sj_responses.html;var pageList=document.querySelector(widgetClassSelector+" .js-stjr-review-grid-page-widget-container");if(!pageList)return;var sortOrderEl=document.querySelector(widgetClassSelector+" .js-stjr-review-grid-page-widget-filter-select-date-sort");var reviewRatingEl=document.querySelector(widgetClassSelector+" .js-stjr-review-grid-page-widget-filter-select-rating");if(sortOrderEl)sortOrderEl.addEventListener("change",changedSelects,!1);if(reviewRatingEl)reviewRatingEl.addEventListener("change",changedSelects,!1);update();window.removeEventListener("resize",update);window.addEventListener("resize",update);loadReviews();loadProductReviews();document.querySelectorAll(widgetClassSelector+" .stjr-review-grid-page-widget__tab-header__tab").forEach(function(el){el.addEventListener("click",switchTabs,!1)})};var loadReviews=function(page){that=this;var listContainer=document.querySelector(widgetClassSelector+" .stjr-review-grid-page-widget-container__biz-reviews");if(!listContainer||(listContainer&&!listContainer.classList.contains("active")&&currentPage!=1))return;if(currentPage==1)listContainer.innerHTML="";loading=!0;var loader=document.querySelector(widgetClassSelector+" .stjr-review-grid-page-widget .js-stjr-review-grid-page-widget-container__content-loader");var sortOrderEl=document.querySelector(widgetClassSelector+" .js-stjr-review-grid-page-widget-filter-select-date-sort");var reviewRatingEl=document.querySelector(widgetClassSelector+" .js-stjr-review-grid-page-widget-filter-select-rating");var sortOrder=sortOrderEl?sortOrderEl.value:"desc";var reviewRating=reviewRatingEl?"&"+reviewRatingEl.value:"";var url=STJRV2.subBaseToCDN()+"/widget-review-grid-page-list/fragrancex.com/"+currentPage;if(query!="")url+="?"+query;else url+="?";url+="&sort_order="+sortOrder+reviewRating;if(loader)loader.style.display="flex";STJRV2.ReviewsWidget["reviewsGridListCallback_"+currentPage]=function(resp){STJRV2.setResponse("ReviewGridPage"+currentPage,resp);setTimeout(()=>{renderReviews();document.querySelector(widgetClassSelector+" .stjr-review-grid-page-widget .js-stjr-review-grid-page-widget-container__content-loader").style.display="none"},500)};STJRV2.jsonP(url,function(script){render(widgetNumber)})};var loadProductReviews=function(page){that=this;var listContainer=document.querySelector(widgetClassSelector+" .stjr-review-grid-page-widget-container__products-reviews");if(!listContainer||(listContainer&&!listContainer.classList.contains("active")&&currentProductPage!=1))return;if(currentProductPage==1)listContainer.innerHTML="";loading=!0;var loader=document.querySelector(widgetClassSelector+" .stjr-review-grid-page-widget .js-stjr-review-grid-page-widget-container__content-loader");var sortOrderEl=document.querySelector(widgetClassSelector+" .js-stjr-review-grid-page-widget-filter-select-date-sort");var reviewRatingEl=document.querySelector(widgetClassSelector+" .js-stjr-review-grid-page-widget-filter-select-rating");var sortOrder=sortOrderEl?sortOrderEl.value:"desc";var reviewRating=reviewRatingEl?"&"+reviewRatingEl.value:"";var url=STJRV2.subBaseToCDN()+"/widget-review-grid-page-product-list/fragrancex.com/"+currentProductPage;if(query!="")url+="?"+query;else url+="?";url+="&sort_order="+sortOrder+reviewRating;if(loader)loader.style.display="flex";STJRV2.ReviewsWidget["reviewsGridProductListCallback_"+currentProductPage]=function(resp){STJRV2.setResponse("ReviewGridPageProductReview"+currentProductPage,resp);setTimeout(()=>{renderProductReviews();document.querySelector(widgetClassSelector+" .stjr-review-grid-page-widget .js-stjr-review-grid-page-widget-container__content-loader").style.display="none"},500)};STJRV2.jsonP(url,function(script){render(widgetNumber)})};var renderReviews=function(resp){loading=!1;var sj_responses=STJRV2.getResponse("ReviewGridPage"+currentPage);var reviewList=document.querySelector(widgetClassSelector+" .js-stjr-review-grid-page-widget-container__biz-reviews");if(typeof sj_responses!="object")return;if(sj_responses.no_reviews){havePages=!1;if(currentPage==1){reviewList.innerHTML='<p class="stjr-util-para--empty" style="grid-column: 1/4; text-align: center; width: 100%; ">No reviews available!</p>'}
return}
if(reviewList!=undefined){reviewList.innerHTML=reviewList.innerHTML+sj_responses.html;currentPage++;STJRV2.markVoted(Array.from(document.querySelectorAll(widgetClassSelector+" .stjr-review-helpful")));setMaxScrollHeight()}
if(!initReady){initReady=!0;var scroll=document.querySelector(widgetClassSelector+" .stjr-review-grid-page-widget .js-stjr-review-grid-page-widget-container");scroll.addEventListener("scroll",reachedEnd);scroll.addEventListener("scroll",storeScrollPos)}};var renderProductReviews=function(resp){loading=!1;var sj_responses=STJRV2.getResponse("ReviewGridPageProductReview"+currentProductPage);var reviewList=document.querySelector(widgetClassSelector+" .js-stjr-review-grid-page-widget-container__products-reviews");if(typeof sj_responses!="object")return;if(sj_responses.no_reviews){havePages=!1;if(currentPage==1){reviewList.innerHTML='<p class="stjr-util-para--empty" style="grid-column: 1/4; text-align: center; width: 100%; ">No reviews available!</p>'}
return}
if(reviewList!=undefined){reviewList.innerHTML=reviewList.innerHTML+sj_responses.html;currentProductPage++;STJRV2.markVoted(Array.from(document.querySelectorAll(widgetClassSelector+" .stjr-review-helpful")));setMaxScrollHeight()}
if(!initReady){initReady=!0;var scroll=document.querySelector(widgetClassSelector+" .stjr-review-grid-page-widget .js-stjr-review-grid-page-widget-container");scroll.addEventListener("scroll",reachedEnd);scroll.addEventListener("scroll",storeScrollPos)}};var storeScrollPos=function(e){document.querySelector(widgetClassSelector+" .stjr-review-grid-page-widget-container__reviews.active").setAttribute("data-scroll-pos",e.target.scrollTop)};var reachedEnd=function(e){var page=1;var thisEl=e.target;if(thisEl.clientHeight+thisEl.scrollTop>thisEl.scrollHeight-10){var scroll=document.querySelector(widgetClassSelector+" .stjr-review-grid-page-widget .js-stjr-review-grid-page-widget-container");if(!loading&&havePages){initReady=!1;scroll.removeEventListener("scroll",reachedEnd,!1);scroll.removeEventListener("scroll",storeScrollPos);loadReviews();loadProductReviews()}
if(!havePages){}}
return!1};var changedSelects=function(e){e.preventDefault();e.stopPropagation();var reviewList=document.querySelector(widgetClassSelector+" .js-stjr-review-grid-page-widget-container__biz-reviews");reviewList.innerHTML=null;currentPage=1;currentProductPage=1;loadReviews();loadProductReviews()};var update=function(e){var widgetContainer=document.querySelector(widgetClassSelector+" .js-stjr-container");if(widgetContainer&&widgetContainer.offsetWidth<768&&widgetContainer.offsetWidth!==0){widgetContainer.classList.add("stjr-widget--mobile")}else if(widgetContainer){widgetContainer.classList.remove("stjr-widget--mobile")}};var switchTabs=function(e){var el=e.target;document.querySelectorAll(widgetClassSelector+" .stjr-review-grid-page-widget__tab-header__tab").forEach(function(el){el.classList.remove("active")});if(el.classList.contains("stjr-review-grid-page-widget__tab-header__tab__biz-review")){document.querySelector(widgetClassSelector+" .stjr-review-grid-page-widget-container__biz-reviews").classList.add("active");document.querySelector(widgetClassSelector+" .stjr-review-grid-page-widget-header__rating--biz").classList.add("active");document.querySelector(widgetClassSelector+" .stjr-review-grid-page-widget-container__products-reviews").classList.remove("active");document.querySelector(widgetClassSelector+" .stjr-review-grid-page-widget-header__rating--product").classList.remove("active")}
if(el.classList.contains("stjr-review-grid-page-widget__tab-header__tab__product-review")){document.querySelector(widgetClassSelector+" .stjr-review-grid-page-widget-container__biz-reviews").classList.remove("active");document.querySelector(widgetClassSelector+" .stjr-review-grid-page-widget-header__rating--biz").classList.remove("active");document.querySelector(widgetClassSelector+" .stjr-review-grid-page-widget-container__products-reviews").classList.add("active");document.querySelector(widgetClassSelector+" .stjr-review-grid-page-widget-header__rating--product").classList.add("active")}
document.querySelector(widgetClassSelector+" .stjr-review-grid-page-widget .js-stjr-review-grid-page-widget-container").scrollTop=document.querySelector(widgetClassSelector+" .stjr-review-grid-page-widget-container__reviews.active").getAttribute("data-scroll-pos");el.classList.add("active");setMaxScrollHeight()};var setMaxScrollHeight=function(){if(currentPage<3||currentProductPage<3){var reviewList=document.querySelector(widgetClassSelector+" .stjr-review-grid-page-widget-container__biz-reviews");var prodReviewList=document.querySelector(widgetClassSelector+" .stjr-review-grid-page-widget-container__products-reviews");var scroll=document.querySelector(widgetClassSelector+" .stjr-review-grid-page-widget .js-stjr-review-grid-page-widget-container");if(reviewList&&reviewList.clientHeight>0&&reviewList.clientHeight<=scrollMaxHeight){scrollMaxHeight=reviewList.clientHeight-50}
if(prodReviewList&&prodReviewList.clientHeight>0&&prodReviewList.clientHeight<=scrollMaxHeight){scrollMaxHeight=prodReviewList.clientHeight-50}
scroll.style.maxHeight=scrollMaxHeight+"px"}};timer=setInterval(init,1000);return{reset:function(element){element.innerHTML="";element.classList.remove("stjr-init");const regex=new RegExp(/stjr-callback-\d/,"g");if(element.className.match(regex))element.className=element.className.replace(regex,"");timer=setInterval(init,1000)},}})();STJRV2.ReviewPageWidget=(function(){var that,widgetInitClassName="stjr-review-page",widgetName="ReviewPageWidget",widgetInitRoutePath="widget-review-page",options={},query="",id=widgetName,timer,widgetNumber,additionalOptions,widgetClassSelector=null,isPreviewMode=!1,star=0,currentPage=1,productPage=1,isAbsolute=null;that=this;var init=function(){var element=document.querySelector(`.${widgetInitClassName}:not(.stjr-init)`);if(!element)return;widgetNumber=STJRV2.getNextWidgetNumber();var url=`${STJRV2.subBaseToCDN()}/${widgetInitRoutePath}/fragrancex.com/${widgetNumber}`,attrOptions=STJRV2.getAttrObj(element),otherOptions=STJRV2.getConfig();id="stjr-widget"+widgetNumber;options=Object.assign({},otherOptions,attrOptions);isPreviewMode=typeof options.test!="undefined"?options.test:!1;element.classList.add("stjr-init","stjr-callback-"+widgetNumber,widgetName+"-"+widgetNumber);widgetClassSelector="."+widgetName+"-"+widgetNumber;query=STJRV2.getQueryString(Object.assign({},options),null);var initErrorCallback=null;STJRV2.ReviewsWidget["receiveCallback_"+widgetNumber]=function(resp){STJRV2.setResponse("response"+resp.callback,resp)};STJRV2.setResponse("response"+widgetNumber,null);STJRV2.jsonP(url+"?"+query,widgetNumber,function(script){render(widgetNumber)},initErrorCallback);clearInterval(timer)};var render=function(){var sj_responses=STJRV2.getResponse("response"+widgetNumber);if(!STJRV2.hasLoadedStyleSheet()||!sj_responses){window.setTimeout(render.bind(this,widgetNumber),500);return}
if(sj_responses.loaded)return;sj_responses.loaded=!0;STJRV2.setResponse("response"+widgetNumber,sj_responses);var element=document.querySelector(widgetClassSelector);if(!element){return}
element.innerHTML=sj_responses.html;document.querySelectorAll(widgetClassSelector+" .stjr-review-page-widget__tab-header__tab").forEach(function(el){el.addEventListener("click",switchTabs.bind(that),!1)});loadReviews();loadProductReviews()};var loadReviews=function(page=1){currentPage=page;var listContainer=document.querySelector(widgetClassSelector+" .stjr-reviews-list-container__biz-reviews");if(!listContainer||(listContainer&&!listContainer.classList.contains("active")&&currentPage!=1))return;STJRV2.ReviewsWidget["reviewsCallback_"+currentPage]=function(resp){STJRV2.setResponse("reviewPage"+currentPage,resp);renderReviews()};var url=STJRV2.subBaseToCDN()+"/widget-review-page-list/fragrancex.com/"+currentPage;query=STJRV2.getQueryString(Object.assign({},options),null);STJRV2.jsonP(url+"?"+query,function(script){})};var loadProductReviews=function(page=1){productPage=page;var listContainer=document.querySelector(widgetClassSelector+" .stjr-reviews-list-container__products-reviews");if(!listContainer||(listContainer&&!listContainer.classList.contains("active")&&productPage!=1))return;STJRV2.ReviewsWidget["reviewsProductCallback_"+productPage]=function(resp){STJRV2.setResponse("reviewProductPage"+productPage,resp);renderReviews("product")};var url=STJRV2.subBaseToCDN()+"/widget-review-page-product-list/fragrancex.com/"+productPage;query=STJRV2.getQueryString(Object.assign({},options),null);STJRV2.jsonP(url+"?"+query,function(script){})};var reviewListScrollToTopMobile=function(scrollDuration,callback){var reviewList=document.querySelector(widgetClassSelector+" .stjr-reviews-list-container.active");if(reviewList.scrollTop==0){callback(!0)}
var scrollHeight=reviewList.scrollTop,scrollStep=Math.PI/(scrollDuration/15),cosParameter=scrollHeight/2;var scrollCount=0,scrollMargin,half=!1;requestAnimationFrame(step);function step(){setTimeout(function(){if(reviewList.scrollTop!=0){requestAnimationFrame(step);scrollCount=scrollCount+1;scrollMargin=cosParameter-cosParameter*Math.cos(scrollCount*scrollStep);reviewList.scrollTop=scrollHeight-scrollMargin;if(reviewList.scrollTop<cosParameter&&!half){half=!0;callback(!0)}}else callback(!1)},15)}};var reviewListScrollToTop=function(scrollDuration,callback){var reviewList=document.querySelector(widgetClassSelector+" .stjr-reviews-list-container.active");if(window.getComputedStyle(reviewList).minHeight=="1px")return reviewListScrollToTopMobile(scrollDuration,callback);var top=reviewList.getClientRects()[0].top;var body=document.querySelector("body");if(top>0)return callback(!0);callback(!0);var scrollHeight=Math.abs(top-60),scrollStep=Math.PI/(scrollDuration/15),cosParameter=scrollHeight/2+10;var scrollCount=0,scrollTopO=body.scrollTop,scrollMargin=0,half=!1;requestAnimationFrame(step);function step(){setTimeout(function(){if(scrollMargin<scrollHeight){requestAnimationFrame(step);scrollCount=scrollCount+1;scrollMargin=cosParameter-cosParameter*Math.cos(scrollCount*scrollStep);body.scrollTop=scrollTopO-scrollMargin;if(top<cosParameter&&!half){half=!0;callback(!0)}}else callback(!1)},15)}};var renderReviews=function(type=""){var sj_responses=STJRV2.getResponse("reviewPage"+currentPage);var sj_product_responses=STJRV2.getResponse("reviewProductPage"+productPage);var containerClass=".stjr-reviews-list-container__biz-reviews";if(type=="product")containerClass=".stjr-reviews-list-container__products-reviews";if(type!="product"&&typeof sj_responses!="object")return;if(type=="product"&&typeof sj_product_responses!="object")return;var reviewList=document.querySelector(widgetClassSelector+" "+containerClass);if(reviewList!=undefined){document.querySelector(widgetClassSelector+"  .js-stjr-reviews-page-reviews__loading").classList.remove("active");reviewListScrollToTop(1000,function(half){if(!half)return;if(type!="product")reviewList.innerHTML=sj_responses.html;if(type=="product")reviewList.innerHTML=sj_product_responses.html;var links=document.querySelectorAll(widgetClassSelector+" "+containerClass+" .stjr-review-page-pagination__link a.stjr-review-page-pagination__link__link, "+widgetClassSelector+" "+containerClass+" a.stjr-review-page-pagination__link");for(var i=0;i<links.length;i++){links[i].addEventListener("click",pageClick)}
var helpfulRows=document.querySelectorAll(widgetClassSelector+" "+containerClass+" .stjr-review-helpful .js-helpful-button");for(var i=0;i<helpfulRows.length;i++){helpfulVote(helpfulRows[i])}
var helpfulRowsNo=document.querySelectorAll(widgetClassSelector+" "+containerClass+" .stjr-review-helpful .js-helpful-no-button");for(var i=0;i<helpfulRows.length;i++){helpfulVoteNo(helpfulRowsNo[i])}})}
STJRV2.markVoted(Array.from(document.querySelectorAll(widgetClassSelector+" .stjr-review-helpful")))};var pageClick=function(e){e.preventDefault();e.stopPropagation();var el=e.currentTarget;var page=null;var o=e.currentTarget;if(o.tagName=="SPAN")o=o.querySelector("a");if(o&&o.href){var matches=o.href.match(/page=(\d+)/);page=matches?parseInt(matches[1]):null}
if(!page||isNaN(page)){var tempPageNum=el.textContent.replace(/,|\./gim,"");page=tempPageNum&&isNaN(tempPageNum)?parseInt(tempPageNum):1}
var reviewList=document.querySelector(widgetClassSelector+" .stjr-review-page-widget");document.querySelector(widgetClassSelector+"  .js-stjr-reviews-page-reviews__loading").classList.add("active");if(el.closest(".stjr-reviews-list-container__biz-reviews"))loadReviews(page);if(el.closest(".stjr-reviews-list-container__products-reviews"))loadProductReviews(page);SJTRUtils.scrollToElement(reviewList);return!1};var helpfulVote=function(element){if(element.closest(".stjr-reviews-list-container__biz-reviews"))element.addEventListener("click",helpfulVoteClick);if(element.closest(".stjr-reviews-list-container__products-reviews"))element.addEventListener("click",helpfulVoteProductClick);};var helpfulVoteNo=function(element){if(element.closest(".stjr-reviews-list-container__biz-reviews"))element.addEventListener("click",helpfulVoteNoClick);if(element.closest(".stjr-reviews-list-container__products-reviews"))element.addEventListener("click",helpfulVoteProductNoClick);};var helpfulVoteClick=function(e){var parent=e.target.closest("[data-url]");if(parent.querySelector(".js-loading").classList.contains("active"))return;var btn=parent.querySelector(".js-helpful-button");var noBtn=parent.querySelector(".js-helpful-no-button");var voteNum=btn.classList.contains("active")?0:1;var voteIdStr=parent.dataset.vote_id?"&vote_id="+parent.dataset.vote_id:"";if(btn.classList.contains("active")){parent.classList.remove("active");btn.classList.remove("active");parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Was this review helpful?")}else{parent.classList.add("active");btn.classList.add("active");parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Thanks for your feedback!")}
var url=parent.getAttribute("data-url")+"?vote_num="+voteNum+voteIdStr;var reviewId=parent.getAttribute("data-review");var name="helpfulvote-"+reviewId;var value=STJRV2.readCookie(name);var posVoteCounter=parent.querySelector(".js-pos-vote-count");var negVoteCounter=parent.querySelector(".js-neg-vote-count");var posVotes=parseInt(posVoteCounter.innerText?posVoteCounter.innerText:0)+(voteNum?1:-1);var negVotes=parseInt(negVoteCounter.innerText?negVoteCounter.innerText:0)-(noBtn.classList.contains("active")?voteNum:0);posVoteCounter.innerText=posVotes;negVoteCounter.innerText=negVotes;noBtn.classList.remove("active");if(isPreviewMode)return;if(!value||!RegExp("^(("+reviewId+")\\|(pos)\\|(\\d+)\\|("+posVoteCounter+")\\|("+negVoteCounter+"))$").test(value)){parent.querySelector(".js-loading").classList.add("active");STJRV2.ReviewsWidget["voteCallback_"+reviewId]=function(resp){parent.dataset.vote_id=resp.vote_id;STJRV2.createVoteCookies(name,reviewId,resp.vote_id,"pos",posVotes,negVotes,voteNum);parent.querySelector(".js-loading").classList.remove("active")};STJRV2.jsonP(url,function(script){render(widgetNumber)})}else{parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Thanks for your feedback!")}};var helpfulVoteNoClick=function(e){var parent=e.target.closest("[data-url]");if(parent.querySelector(".js-loading").classList.contains("active"))return;var btn=parent.querySelector(".js-helpful-no-button");var yesBtn=parent.querySelector(".js-helpful-button");var voteNum=btn.classList.contains("active")?0:-1;var voteIdStr=parent.dataset.vote_id?"&vote_id="+parent.dataset.vote_id:"";if(btn.classList.contains("active")){parent.classList.remove("active");btn.classList.remove("active");parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Was this review helpful?")}else{parent.classList.add("active");btn.classList.add("active");parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Thanks for your feedback!")}
var url=parent.getAttribute("data-url")+"?vote_type=not_helpful&vote_num="+voteNum+voteIdStr;var reviewId=parent.getAttribute("data-review");var name="helpfulvote-"+reviewId;var value=STJRV2.readCookie(name);var posVoteCounter=parent.querySelector(".js-pos-vote-count");var negVoteCounter=parent.querySelector(".js-neg-vote-count");var posVotes=parseInt(posVoteCounter.innerText?posVoteCounter.innerText:0)+(yesBtn.classList.contains("active")?voteNum:0);var negVotes=parseInt(negVoteCounter.innerText?negVoteCounter.innerText:0)+(voteNum<0?1:-1);posVoteCounter.innerText=posVotes;negVoteCounter.innerText=negVotes;yesBtn.classList.remove("active");if(isPreviewMode)return;if(!value||!RegExp("^(("+reviewId+")\\|(neg)\\|(\\d+)\\|("+posVoteCounter+")\\|("+negVoteCounter+"))$").test(value)){parent.querySelector(".js-loading").classList.add("active");STJRV2.ReviewsWidget["voteCallback_"+reviewId]=function(resp){parent.dataset.vote_id=resp.vote_id;STJRV2.createVoteCookies(name,reviewId,resp.vote_id,"neg",posVotes,negVotes,voteNum);parent.querySelector(".js-loading").classList.remove("active")};STJRV2.jsonP(url,function(script){render(widgetNumber)})}else{parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Thanks for your feedback!")}};var helpfulVoteProductClick=function(e){var parent=e.target.closest("[data-url]");if(parent.querySelector(".js-loading").classList.contains("active"))return;var btn=parent.querySelector(".js-helpful-button");var noBtn=parent.querySelector(".js-helpful-no-button");var voteNum=btn.classList.contains("active")?0:1;var voteIdStr=parent.dataset.vote_id?"&vote_id="+parent.dataset.vote_id:"";if(btn.classList.contains("active")){parent.classList.remove("active");btn.classList.remove("active");parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Was this review helpful?")}else{parent.classList.add("active");btn.classList.add("active");parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Thanks for your feedback!")}
var el=parent;var url=el.getAttribute("data-url")+"/p?"+voteIdStr;var objectId=el.getAttribute("data-object");var typeId=el.getAttribute("data-type");var name=el.getAttribute("id");var value=STJRV2.readCookie(name);var posVoteCounter=parent.querySelector(".js-pos-vote-count");var negVoteCounter=parent.querySelector(".js-neg-vote-count");var posVotes=parseInt(posVoteCounter.innerText?posVoteCounter.innerText:0)+(voteNum?1:-1);var negVotes=parseInt(negVoteCounter.innerText?negVoteCounter.innerText:0)-(noBtn.classList.contains("active")?voteNum:0);posVoteCounter.innerText=posVotes;negVoteCounter.innerText=negVotes;noBtn.classList.remove("active");if(isPreviewMode)return;if(!value||!RegExp("^(("+objectId+")\\|(pos)\\|(\\d+)\\|("+posVoteCounter+")\\|("+negVoteCounter+"))$").test(value)){parent.querySelector(".js-loading").classList.add("active");STJRV2.ReviewsWidget["voteCallback_"+objectId]=function(resp){parent.dataset.vote_id=resp.vote_id;STJRV2.createVoteCookies(name,objectId,resp.vote_id,"pos",posVotes,negVotes,voteNum);parent.querySelector(".js-loading").classList.remove("active")};STJRV2.jsonP(url,function(script){render(widgetNumber)})}else{parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Thanks for your feedback!")}};var helpfulVoteProductNoClick=function(e){var parent=e.target.closest("[data-url]");if(parent.querySelector(".js-loading").classList.contains("active"))return;var btn=parent.querySelector(".js-helpful-no-button");var yesBtn=parent.querySelector(".js-helpful-button");var voteNum=btn.classList.contains("active")?0:-1;var voteIdStr=parent.dataset.vote_id?"&vote_id="+parent.dataset.vote_id:"";if(btn.classList.contains("active")){parent.classList.remove("active");btn.classList.remove("active");parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Was this review helpful?")}else{parent.classList.add("active");btn.classList.add("active");parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Thanks for your feedback!")}
var el=parent;var url=el.getAttribute("data-url")+"/n?"+voteIdStr;var objectId=el.getAttribute("data-object");var typeId=el.getAttribute("data-type");var name=el.getAttribute("id");var value=STJRV2.readCookie(name);var posVoteCounter=parent.querySelector(".js-pos-vote-count");var negVoteCounter=parent.querySelector(".js-neg-vote-count");var posVotes=parseInt(posVoteCounter.innerText?posVoteCounter.innerText:0)+(yesBtn.classList.contains("active")?voteNum:0);var negVotes=parseInt(negVoteCounter.innerText?negVoteCounter.innerText:0)+(voteNum<0?1:-1);posVoteCounter.innerText=posVotes;negVoteCounter.innerText=negVotes;yesBtn.classList.remove("active");if(isPreviewMode)return;if(!value||!RegExp("^(("+objectId+")\\|(neg)\\|(\\d+)\\|("+posVoteCounter+")\\|("+negVoteCounter+"))$").test(value)){parent.querySelector(".js-loading").classList.add("active");STJRV2.ReviewsWidget["voteCallback_"+objectId]=function(resp){parent.dataset.vote_id=resp.vote_id;STJRV2.createVoteCookies(name,objectId,resp.vote_id,"neg",posVotes,negVotes,voteNum);parent.querySelector(".js-loading").classList.remove("active")};STJRV2.jsonP(url,function(script){render(widgetNumber)})}else{parent.querySelector(".isHelpful").innerHTML=STJRV2.__("Thanks for your feedback!")}};var switchTabs=function(e){var el=e.target;document.querySelectorAll(widgetClassSelector+" .stjr-review-page-widget__tab-header__tab").forEach(function(el){el.classList.remove("active")});if(el.classList.contains("stjr-review-page-widget__tab-header__tab__biz-review")){document.querySelector(widgetClassSelector+" .stjr-reviews-list-container__biz-reviews").classList.add("active");document.querySelector(widgetClassSelector+" .stjr-review-page-widget-header--biz").classList.add("active");document.querySelector(widgetClassSelector+" .stjr-reviews-list-container__products-reviews").classList.remove("active");document.querySelector(widgetClassSelector+" .stjr-review-page-widget-header--product").classList.remove("active")}
if(el.classList.contains("stjr-review-page-widget__tab-header__tab__product-review")){document.querySelector(widgetClassSelector+" .stjr-reviews-list-container__biz-reviews").classList.remove("active");document.querySelector(widgetClassSelector+" .stjr-review-page-widget-header--biz").classList.remove("active");document.querySelector(widgetClassSelector+" .stjr-reviews-list-container__products-reviews").classList.add("active");document.querySelector(widgetClassSelector+" .stjr-review-page-widget-header--product").classList.add("active")}
document.querySelector(widgetClassSelector+" .stjr-review-page-widget .stjr-reviews-list-container").scrollTop=document.querySelector(widgetClassSelector+" .stjr-reviews-list-container.active").getAttribute("data-scroll-pos");el.classList.add("active")};timer=setInterval(init,1000);return{reset:function(element){element.innerHTML="";element.classList.remove("stjr-init");const regex=new RegExp(/stjr-callback-\d/,"g");if(element.className.match(regex))element.className=element.className.replace(regex,"");timer=setInterval(init,1000)},}})();STJRV2.ReviewFormWidget=(function(){var that,widgetInitClassName="stjr-short-review-form",widgetName="ReviewFormWidget",widgetInitRoutePath="widget-form",options={},query="",id=widgetName,timer,widgetNumber,additionalOptions,widgetClassSelector=null,isPreviewMode=!1,star=0,isAbsolute=null;that=this;var init=function(){var element=document.querySelector(`.${widgetInitClassName}:not(.stjr-init)`);if(!element)return;widgetNumber=STJRV2.getNextWidgetNumber();var url=`${STJRV2.subBaseToCDN()}/${widgetInitRoutePath}/fragrancex.com/${widgetNumber}`;(attrOptions=STJRV2.getAttrObj(element)),(otherOptions=STJRV2.getConfig());id="stjr-widget"+widgetNumber;options=Object.assign({},otherOptions,attrOptions);isPreviewMode=typeof options.test!="undefined"?options.test:!1;element.classList.add("stjr-init","stjr-callback-"+widgetNumber,widgetName+"-"+widgetNumber);widgetClassSelector="."+widgetName+"-"+widgetNumber;query=STJRV2.getQueryString(Object.assign({},options),null);var initErrorCallback=null;STJRV2.ReviewsWidget["receiveCallback_"+widgetNumber]=function(resp){STJRV2.setResponse("response"+resp.callback,resp)};STJRV2.setResponse("response"+widgetNumber,null);STJRV2.jsonP(url+"?"+query,widgetNumber,function(script){render(widgetNumber)},initErrorCallback);clearInterval(timer)};var render=function(){var sj_responses=STJRV2.getResponse("response"+widgetNumber);if(!STJRV2.hasLoadedStyleSheet()||!sj_responses){window.setTimeout(render.bind(this,widgetNumber),500);return}
if(sj_responses.loaded)return;sj_responses.loaded=!0;STJRV2.setResponse("response"+widgetNumber,sj_responses);var element=document.querySelector(widgetClassSelector);if(!element){return}
element.innerHTML=sj_responses.html;var btn=document.querySelector(widgetClassSelector+" .stjr-sj-button");var title=document.querySelector(widgetClassSelector+" .stjr-review-form-widget-body__title");var logo=document.querySelector(widgetClassSelector+"  a.stjr-review-form-widget-footer");var closeBtn=document.querySelector(widgetClassSelector+" .stjr-review-form-widget-body__close");var starsObj=document.querySelector(widgetClassSelector+" .js-fillable-stars .stars--widgets");if(btn==null)return;btn.addEventListener("click",buttonClick);title.addEventListener("click",titleClick);logo.addEventListener("click",logoClick);starsObj.addEventListener("mousemove",starsMove);starsObj.addEventListener("mouseleave",starsLeave);starsObj.addEventListener("click",starsClick);if(closeBtn)closeBtn.addEventListener("click",closeClick);var st=document.querySelectorAll(widgetClassSelector+" .js-fillable-stars .stars--widgets");for(var i=0;i<star;i++){if(st[i]==undefined)continue;if(st[i].className.indexOf("custom-icon-star2-empty")>=0)st[i].className=st[i].className.replace(/\bcustom-icon-star2-empty\b/g,"custom-icon-star2-full");}};var buttonClick=function(){var hash=document.querySelector(widgetClassSelector+" .stjr-hash").innerHTML;var title=document.querySelector(widgetClassSelector+" #stjr-review-title").value;var widgetkey=document.querySelector(widgetClassSelector+" .stjr-review-form-widget-body__widgetkey input");var key=widgetkey.dataset.reviewWidgetKey;var url=STJRV2.getBase()+"/online-business-review?rating="+star+"&title="+encodeURIComponent(title)+"&widget="+key+"&url="+encodeURIComponent(hash);window.open(url)};var titleClick=function(){var hash=document.querySelector(widgetClassSelector+" .stjr-hash").innerHTML.split("_");var url=STJRV2.getBase()+"/reviews/"+hash[0];window.open(url)};var logoClick=function(e){e.preventDefault();var url=STJRV2.getBase();window.open(url);return!1};var starsMove=function(e){var p=document.querySelector(widgetClassSelector+" .js-fillable-stars .stars--widgets").getBoundingClientRect(),st=document.querySelectorAll(widgetClassSelector+" .js-fillable-stars .stars--widgets .star");if(!st.length)return;var starLength=st[0].offsetWidth,t=Math.max(Math.min(Math.ceil((e.clientX-p.left)/starLength),5),1);for(var i=0;i<t;i++){if(st[i]==undefined)continue;if(st[i].className.indexOf("custom-icon-star2-empty")>=0)st[i].className=st[i].className.replace(/\bcustom-icon-star2-empty\b/g,"custom-icon-star2-full");}
for(var i=t;i<5;i++){if(st[i]==undefined)continue;if(st[i].className.indexOf("custom-icon-star2-full")>=0)st[i].className=st[i].className.replace(/\bcustom-icon-star2-full\b/g,"custom-icon-star2-empty");}};var starsLeave=function(){var st=document.querySelectorAll(widgetClassSelector+" .js-fillable-stars .stars--widgets .star");for(var i=star;i<5;i++){if(st[i]==undefined)continue;if(st[i].className.indexOf("custom-icon-star2-full")>=0)st[i].className=st[i].className.replace(/\bcustom-icon-star2-full\b/g,"custom-icon-star2-empty");}};var starsClick=function(e){var pageX=e.clientX;if(pageX==undefined)return;var p=document.querySelector(widgetClassSelector+" .js-fillable-stars .stars--widgets").getBoundingClientRect(),st=document.querySelectorAll(widgetClassSelector+" .js-fillable-stars .stars--widgets .star");if(!st.length)return;var starLength=st[0].offsetWidth;star=Math.max(Math.min(Math.ceil((pageX-p.left)/starLength),5),1);for(var i=0;i<star;i++){if(st[i]==undefined)continue;if(st[i].className.indexOf("custom-icon-star2-full")>=0)st[i].className=st[i].className.replace(/\bcustom-icon-star2-full\b/g,"custom-icon-star2");}
for(var i=star;i<5;i++){if(st[i]==undefined)continue;st[i].className=st[i].className.replace(/\bcustom-icon-star2(-full|-empty)?\b/g,"custom-icon-star2-empty")}};var closeClick=function(e){var formWidget=document.querySelector(widgetClassSelector+" .stjr-container.stjr-review-form-widget");var className=formWidget.className;function animationEnd(){formWidget.removeEventListener("animationend",animationEnd);formWidget.removeEventListener("webkitAnimationEnd",animationEnd);formWidget.removeEventListener("MSAnimationEnd",animationEnd);formWidget.className=className;formWidget.style.display="none"}
formWidget.addEventListener("animationend",animationEnd);formWidget.addEventListener("webkitAnimationEnd",animationEnd);formWidget.addEventListener("MSAnimationEnd",animationEnd);formWidget.className=className+" stjr-form-close"};timer=setInterval(init,1000);return{reset:function(element){element.innerHTML="";element.classList.remove("stjr-init");const regex=new RegExp(/stjr-callback-\d/,"g");if(element.className.match(regex))element.className=element.className.replace(regex,"");timer=setInterval(init,1000)},}})();STJRV2.ProductPhotoRowWidget=(function(){var that,widgetInitClassName="stjr-product-photo-row",widgetName="ProductPhotoRowWidget",widgetInitRoutePath="widget-product-photo-row",options={},query="",id=widgetName,timer,widgetNumber,additionalOptions,widgetClassSelector=null,isPreviewMode=!1,star=0,isAbsolute=null;that=this;var init=function(){var element=document.querySelector(`.${widgetInitClassName}:not(.stjr-init)`);if(!element)return;widgetNumber=STJRV2.getNextWidgetNumber();var url=`${STJRV2.subBaseToCDN()}/${widgetInitRoutePath}/fragrancex.com/${widgetNumber}`;(attrOptions=STJRV2.getAttrObj(element)),(otherOptions=STJRV2.getConfig());id="stjr-widget"+widgetNumber;options=Object.assign({},otherOptions,attrOptions);isPreviewMode=typeof options.test!="undefined"?options.test:!1;element.classList.add("stjr-init","stjr-callback-"+widgetNumber,widgetName+"-"+widgetNumber);widgetClassSelector="."+widgetName+"-"+widgetNumber;query=STJRV2.getQueryString(Object.assign({},options),null);var initErrorCallback=options.test?()=>{STJRV2.renderNoProductsMessage(widgetClassSelector)}:null;STJRV2.ReviewsWidget["receiveCallback_"+widgetNumber]=function(resp){STJRV2.setResponse("response"+resp.callback,resp)};STJRV2.setResponse("response"+widgetNumber,null);STJRV2.jsonP(url+"?"+query,widgetNumber,function(script){render(widgetNumber)},initErrorCallback);clearInterval(timer)};var render=function(){var sj_responses=STJRV2.getResponse("response"+widgetNumber);if(!STJRV2.hasLoadedStyleSheet()||!sj_responses){window.setTimeout(render.bind(this,widgetNumber),500);return}
if(sj_responses.loaded)return;sj_responses.loaded=!0;STJRV2.setResponse("response"+widgetNumber,sj_responses);var element=document.querySelector(widgetClassSelector);if(!element){return}
element.innerHTML=sj_responses.html;var miniCarousel=document.querySelector(widgetClassSelector+" .js-stjr-product-photo-row-widget__photos-carousel");if(miniCarousel){var prevBtn=miniCarousel.querySelector(".js-stjr-product-photo-row-widget__photos-carousel__btn__prev");var nextBtn=miniCarousel.querySelector(".js-stjr-product-photo-row-widget__photos-carousel__btn__next");var sliderContainer=miniCarousel.querySelector(".js-stjr-product-photo-row-widget__photos-carousel__slider__container");var allImages=sliderContainer.querySelectorAll("img");var loadedImgs=0;function imgLoaded(){loadedImgs++;if(allImages.length===loadedImgs){STJRV2.makeMiniSlider(sliderContainer,prevBtn,nextBtn,()=>{var photosContainers=document.querySelectorAll(".js-stjr-product-photo-row-widget__photos-carousel__photo");photosContainers.forEach((el)=>{el.addEventListener("click",function(ev){ev.preventDefault();ev.stopPropagation();var thisEl=ev.target;var parent=thisEl;if(!parent.classList.contains("js-stjr-product-photo-row-widget__photos-carousel__photo")){parent=thisEl.closest(".js-stjr-product-photo-row-widget__photos-carousel__photo")}
var reviewIdsArr=[...photosContainers].map((el)=>{return el.getAttribute("data-review-id")});var reviewId=parent.getAttribute("data-review-id");var productReviewId=parent.getAttribute("data-product-review-id");var productId=parent.getAttribute("data-product-id");STJRV2.ReviewWindowWidget.set({id:"reviewWindowWidget",url:options.url,test:options.test,review_ids:reviewIdsArr.join("|"),review_id:reviewId,product_review_id:productReviewId,product_id:productId})})})})}}
for(img of allImages){if(img.complete){imgLoaded()}else{img.addEventListener("load",imgLoaded);img.addEventListener("error",imgLoaded)}}}};timer=setInterval(init,1000);return{reset:function(element){element.innerHTML="";element.classList.remove("stjr-init");const regex=new RegExp(/stjr-callback-\d/,"g");if(element.className.match(regex))element.className=element.className.replace(regex,"");timer=setInterval(init,1000)},}})();STJRV2.ProductReviewCarouselWidget=(function(){var that,widgetInitClassName="stjr-product-review-carousel",widgetName="ProductReviewCarouselWidget",widgetInitRoutePath="widget-product-review-carousel",options={},query="",id=widgetName,timer,widgetNumber,additionalOptions,widgetClassSelector=null,isPreviewMode=!1,star=0,isAbsolute=null,lightbox=null,currentPageIndex,pagesNeeded,carouselDirectionReverse=!1,sliderContainer=null,currentPageOrder=1,optionsLength=100,optionsMinTrail=20,optionsEllipsisText="... ",optionsMoreText="read more",optionsLessText="less";that=this;var init=function(){var element=document.querySelector(`.${widgetInitClassName}:not(.stjr-init)`);if(!element)return;widgetNumber=STJRV2.getNextWidgetNumber();var url=`${STJRV2.subBaseToCDN()}/${widgetInitRoutePath}/fragrancex.com/${widgetNumber}`;(attrOptions=STJRV2.getAttrObj(element)),(otherOptions=STJRV2.getConfig());id="stjr-widget"+widgetNumber;options=Object.assign({},otherOptions,attrOptions);isPreviewMode=typeof options.test!="undefined"?options.test:!1;element.classList.add("stjr-init","stjr-callback-"+widgetNumber,widgetName+"-"+widgetNumber);widgetClassSelector="."+widgetName+"-"+widgetNumber;query=STJRV2.getQueryString(Object.assign({},options),null);var initErrorCallback=options.test?()=>{STJRV2.renderNoProductsMessage(widgetClassSelector)}:null;STJRV2.ReviewsWidget["receiveCallback_"+widgetNumber]=function(resp){STJRV2.setResponse("response"+resp.callback,resp)};STJRV2.setResponse("response"+widgetNumber,null);STJRV2.jsonP(url+"?"+query,widgetNumber,function(script){render(widgetNumber)},initErrorCallback);clearInterval(timer)};var render=function(){var sj_responses=STJRV2.getResponse("response"+widgetNumber);if(!STJRV2.hasLoadedStyleSheet()||!sj_responses){window.setTimeout(render.bind(this,widgetNumber),500);return}
if(sj_responses.loaded)return;sj_responses.loaded=!0;STJRV2.setResponse("response"+widgetNumber,sj_responses);var element=document.querySelector(widgetClassSelector);if(!element){return}
element.innerHTML=sj_responses.html;update();window.removeEventListener("resize",update);window.addEventListener("resize",update);var cont=document.querySelector(widgetClassSelector+" .js-stjr-product-review-carousel-src-reviews");if(cont==null)return;var sourceContainer=cont;var srcReviews=sourceContainer.querySelectorAll(widgetClassSelector+" .js-stjr-product-review-carousel-review");if(srcReviews.length==1){sourceContainer.style.display="none"}
var navLeft=document.querySelector(widgetClassSelector+" .js-stjr-product-review-carousel-nav--left");var navRight=document.querySelector(widgetClassSelector+" .js-stjr-product-review-carousel-nav--right");var _pages=document.querySelectorAll(widgetClassSelector+" .stjr-product-review-carousel-pagination .stjr-product-review-carousel-pagination__dot");totalNumReviews=parseInt(sj_responses.num_reviews);if(srcReviews.length>0){if(navLeft){navLeft.addEventListener("click",sliderNavLeft)}
if(navRight){navRight.addEventListener("click",sliderNavRight)}}
STJRV2.loadStyleSheet((STJRV2.isAbsolute()?'https://static.sitejabber.com/':STJRV2.getBase())+'/js/lightboxjs/lightboxjs.min'+(STJRV2.isAbsolute()?'.1660302347':'')+'.css');STJRV2.loadScript("/js/lightboxjs/lightboxjs.min"+(STJRV2.isAbsolute()?".1660302347":"")+".js",()=>{lightbox=new Lightbox();lightbox.load()});resize()};var sliderNavLeft=function(){carouselDirectionReverse=!0;sliderContainer.style.justifyContent="flex-end";sliderContainer.classList.add("stjr-util-slider-container-transition");sliderContainer.style.transform="translateX(100%)"};var sliderNavRight=function(){carouselDirectionReverse=!1;sliderContainer.style.justifyContent="flex-start";sliderContainer.classList.add("stjr-util-slider-container-transition");sliderContainer.style.transform="translateX(-100%)"};var changeSlide=function(){var allEls=[];if(carouselDirectionReverse){allEls=Array.from(document.querySelectorAll(widgetClassSelector+" [data-position]"));if(currentPageOrder==1){currentPageOrder=pagesNeeded}else{currentPageOrder--}}else{allEls=Array.from(document.querySelectorAll(widgetClassSelector+" [data-position]"));if(currentPageOrder==pagesNeeded){currentPageOrder=1}else{currentPageOrder++}}
let order=1;if(carouselDirectionReverse){for(let i=currentPageOrder;i<=pagesNeeded&&i>0;i++){allEls[i-1].style.order=order;order++}
for(let i=1;i<currentPageOrder&&i>0;i++){allEls[i-1].style.order=order;order++}}
if(!carouselDirectionReverse){for(let i=currentPageOrder;i<=pagesNeeded;i++){document.querySelector(widgetClassSelector+" [data-position='"+i+"']").style.order=order;order++}
for(let i=1;i<currentPageOrder;i++){document.querySelector(widgetClassSelector+" [data-position='"+i+"']").style.order=order;order++}}
sliderContainer.classList.remove("stjr-util-slider-container-transition");sliderContainer.style.transform="translateX(0)"};var handleDotClick=function(e){var dotIndex=parseInt(e.target.dataset.page);currentPageOrder=dotIndex+1;gotoPage(dotIndex,!0)};var resize=function(){window.removeEventListener("resize",resize);currentPageIndex=0;sliderContainer=document.querySelector(widgetClassSelector+" .js-stjr-product-review-carousel-pages");sliderContainer.style.transform="translateX(0)";var reviewRows=document.querySelectorAll(widgetClassSelector+" .stjr-product-review-carousel-reviews-container .stjr-product-review-carousel-reviews.stjr-product-review-carousel-review");var prevDots=document.querySelectorAll(widgetClassSelector+" .js-stjr-product-review-carousel-pagination__dot");if(prevDots.length>0){prevDots.forEach((el)=>{el.removeEventListener("click",handleDotClick)})}
var minReviewWidth=345;var sourceContainer=document.querySelector(widgetClassSelector+" .js-stjr-product-review-carousel-src-reviews");var srcReviews=sourceContainer.querySelectorAll(widgetClassSelector+" .js-stjr-product-review-carousel-review");var pagesEl=sliderContainer;reviewPageWidth=pagesEl.offsetWidth;if(reviewPageWidth<minReviewWidth)minReviewWidth=reviewPageWidth;var paginationEl=document.querySelector(widgetClassSelector+" .js-stjr-product-review-carousel-pagination");var reviewsPerPage=parseInt(reviewPageWidth/minReviewWidth);pagesNeeded=Math.ceil(srcReviews.length/reviewsPerPage);currentPageIndex=0;var pagesHtml="";var paginationHtml="";var reviewIndex=0;if(paginationEl){paginationEl.innerHTML=""}
pagesEl.innerHTML="";for(var pageIndex=0;pageIndex<pagesNeeded;pageIndex++){pagesHtml+=`<div class="stjr-product-review-carousel-pages__page js-stjr-product-review-carousel-pages__page ${pageIndex == 0 ? "stjr-product-review-carousel-pages__page--active" : ""} ${reviewsPerPage == 1 ? "stjr-product-review-carousel-pages__page--review-full-width" : ""} " data-position="${pageIndex + 1}"><div class="stjr-product-review-carousel-pages__page-inner js-stjr-product-review-carousel-pages__page-inner">`;paginationHtml+=`<div class="stjr-product-review-carousel-pagination__dot js-stjr-product-review-carousel-pagination__dot ${pageIndex == 0 ? "stjr-product-review-carousel-pagination__dot--active" : ""}" data-page="${pageIndex}"></div>`;var reviewCount=0;var duplicateCount=0;while(reviewCount<reviewsPerPage){reviewIndex<srcReviews.length;if(srcReviews[reviewIndex]){pagesHtml+=srcReviews[reviewIndex].outerHTML}else{if(srcReviews[duplicateCount]){pagesHtml+=srcReviews[duplicateCount].outerHTML}else{duplicateCount=0;pagesHtml+=srcReviews[duplicateCount].outerHTML}
duplicateCount++}
reviewCount++;reviewIndex++}
pagesHtml+=`</div></div>`}
if(pagesNeeded<2){document.querySelector(widgetClassSelector+" .stjr-product-review-carousel__header__nav").style.display="none"}else{document.querySelector(widgetClassSelector+" .stjr-product-review-carousel__header__nav").style.display="flex"}
if(paginationEl){paginationEl.innerHTML=paginationHtml}
pagesEl.innerHTML=pagesHtml;currentPage=0;document.querySelectorAll(widgetClassSelector+" .js-stjr-product-review-carousel-pagination__dot").forEach((el)=>{el.addEventListener("click",handleDotClick)});var $pagesContainer=document.querySelector(widgetClassSelector+" .js-stjr-product-review-carousel-pages-container");var activePage=document.querySelector(widgetClassSelector+" .js-stjr-product-review-carousel-pages__page.stjr-product-review-carousel-pages__page--active");$pagesContainer.classList.remove("stjr-product-review-carousel-pages--height-even");if(activePage)activePage.classList.remove("stjr-product-review-carousel-pages__page--active");if(tempPages&&tempPages.length>0)tempPages[tempPages.length-1].classList.remove("stjr-product-review-carousel-pages__page--active");$pagesContainer.style.minHeight="800px";var maxHeight=-1;var innerPages=document.querySelectorAll(widgetClassSelector+" .js-stjr-product-review-carousel-pages__page-inner");for(var el of innerPages){var contentOverflowControl=el.querySelectorAll(".js-stjr-product-review-carousel-review__content");for(var content of contentOverflowControl){truncateText(content)}
maxHeight=maxHeight>el.offsetHeight?maxHeight:el.offsetHeight}
$pagesContainer.dataset.initHeight=maxHeight+60;$pagesContainer.style.minHeight=maxHeight+60+"px";var tempPages=document.querySelectorAll(widgetClassSelector+" .js-stjr-product-review-carousel-pages__page");$pagesContainer.classList.add("stjr-product-review-carousel-pages--height-even");tempPages[0].classList.add("stjr-product-review-carousel-pages__page--active");tempPages.forEach(function(element,index){element.style.order=index+1});$pagesContainer.addEventListener("transitionend",()=>{changeSlide()});if(lightbox){lightbox.load()}
window.addEventListener("resize",resize)};var update=function(e){var widget=document.querySelector(widgetClassSelector+" .js-stjr-product-review-carousel");if(widget&&widget.offsetWidth<768){widget.classList.add("stjr-product-review-carousel--mobile")}else if(widget){widget.classList.remove("stjr-product-review-carousel--mobile")}};var truncateText=function(element){var body=element.innerHTML;if(body.length>optionsLength+optionsMinTrail){var splitLocation=body.indexOf(" ",optionsLength);if(splitLocation!=-1){var splitLocation=body.indexOf(" ",optionsLength);var start=0;do{var openTag=body.indexOf("<",start);var closeTag=body.indexOf(">",start+1);if(openTag==-1||closeTag==-1||openTag>splitLocation)break;if(closeTag<splitLocation){start=closeTag+1;continue}
splitLocation=openTag-1;break}while(!0);var str1=body.substring(0,splitLocation);var str2=body.substring(splitLocation,body.length);element.innerHTML=str1+'<span class="stjr-reviews-truncate_ellipsis">'+optionsEllipsisText+"</span>"+'<span class="stjr-reviews-truncate_more" style="display:none;">'+str2+"</span>"+'<a class="stjr-reviews-truncate_more_link">'+optionsMoreText+"</a>";var moreLink=element.querySelector(".stjr-reviews-truncate_more_link");moreLink.addEventListener("click",truncateMoreClick)}}};var truncateMoreClick=function(e){var moreLink=e.target;var parentEl=moreLink.parentElement.parentElement;var moreContent=parentEl.querySelector(".stjr-reviews-truncate_more");var ellipsis=parentEl.querySelector(".stjr-reviews-truncate_ellipsis");var el=document.createElement("div");el.innerHTML=optionsMoreText;moreContent.style.display="inline";moreLink.innerHTML="";ellipsis.style.display="none";var el=e.target;var parent=el.closest(".js-stjr-product-review-carousel-review__content-overflow-control");var content=parent.querySelector(".js-stjr-product-review-carousel-review__content");var hDiff=content.offsetHeight-90;var $pagesContainer=document.querySelector(widgetClassSelector+" .js-stjr-product-review-carousel-pages-container");if(parseInt($pagesContainer.style.minHeight)<parseInt($pagesContainer.dataset.initHeight)+hDiff)$pagesContainer.style.minHeight=parseInt($pagesContainer.dataset.initHeight)+hDiff+"px";return!1};timer=setInterval(init,1000);return{reset:function(element){element.innerHTML="";element.classList.remove("stjr-init");const regex=new RegExp(/stjr-callback-\d/,"g");if(element.className.match(regex))element.className=element.className.replace(regex,"");timer=setInterval(init,1000)},}})();STJRV2.ProductReviewListWidget=(function(){var that,widgetInitClassName="stjr-product-review-list",widgetName="ProductReviewListWidget",widgetInitRoutePath="widget-product-review-list",options={},query="",id=widgetName,timer,widgetNumber,additionalOptions,widgetClassSelector=null,isPreviewMode=!1,star=0,isAbsolute=null,currentPage=1,totalPages=2,havePages=!0,maxPages=0,loading=!1,initReady=!1,numReviewsPage=12;that=this;var init=function(){var element=document.querySelector(`.${widgetInitClassName}:not(.stjr-init)`);if(!element)return;widgetNumber=STJRV2.getNextWidgetNumber();var url=`${STJRV2.subBaseToCDN()}/${widgetInitRoutePath}/fragrancex.com/${widgetNumber}`;(attrOptions=STJRV2.getAttrObj(element)),(otherOptions=STJRV2.getConfig());id="stjr-widget"+widgetNumber;options=Object.assign({},otherOptions,attrOptions);isPreviewMode=typeof options.test!="undefined"?options.test:!1;element.classList.add("stjr-init","stjr-callback-"+widgetNumber,widgetName+"-"+widgetNumber);widgetClassSelector="."+widgetName+"-"+widgetNumber;query=STJRV2.getQueryString(Object.assign({},options),null);var initErrorCallback=options.test?()=>{STJRV2.renderNoProductsMessage(widgetClassSelector)}:null;STJRV2.ReviewsWidget["receiveCallback_"+widgetNumber]=function(resp){STJRV2.setResponse("response"+resp.callback,resp)};STJRV2.setResponse("response"+widgetNumber,null);STJRV2.jsonP(url+"?"+query,widgetNumber,function(script){render(widgetNumber)},initErrorCallback);clearInterval(timer)};var render=function(){var sj_responses=STJRV2.getResponse("response"+widgetNumber);if(!STJRV2.hasLoadedStyleSheet()||!sj_responses){window.setTimeout(render.bind(this,widgetNumber),500);return}
if(sj_responses.loaded)return;sj_responses.loaded=!0;STJRV2.setResponse("response"+widgetNumber,sj_responses);var element=document.querySelector(widgetClassSelector);if(!element){return}
element.innerHTML=sj_responses.html;var pageList=document.querySelector(widgetClassSelector+" .js-stjr-product-review-list-widget-container");if(!pageList)return;update();window.removeEventListener("resize",update);window.addEventListener("resize",update);function truncateString(str,num){if(str.length>num){return str.slice(0,num)+"..."}else{return str}}
var addedReviews=document.querySelectorAll(`${widgetClassSelector} .js-stjr-product-review-list-widget-review__content`);for(var addedReview of addedReviews){if(addedReview.innerText.length>120){var parent=addedReview.closest(".js-stjr-product-review-list-widget-review__content-overflow-control");parent.classList.add("active");parent.querySelector(".js-stjr-product-review-list-widget-review__content-overflow-control__text").innerText=truncateString(addedReview.innerText,120);parent.querySelector(".js-stjr-product-review-list-widget-review__content-overflow-control__btn").addEventListener("click",reviewReadMore)}}};var reviewReadMore=function(e){var el=e.target;var parent=el.closest(".js-stjr-product-review-list-widget-review__content-overflow-control");parent.classList.remove("active")};var update=function(e){var widgetContainer=document.querySelector(widgetClassSelector+" .js-stjr-container");if(widgetContainer&&widgetContainer.offsetWidth<768){widgetContainer.classList.add("stjr-widget--mobile")}else if(widgetContainer){widgetContainer.classList.remove("stjr-widget--mobile")}};timer=setInterval(init,1000);return{reset:function(element){element.innerHTML="";element.classList.remove("stjr-init");const regex=new RegExp(/stjr-callback-\d/,"g");if(element.className.match(regex))element.className=element.className.replace(regex,"");timer=setInterval(init,1000)},}})();STJRV2.ProductPhotoGridWidget=(function(){var that,widgetInitClassName="stjr-product-photo-grid",widgetName="WidgetName",widgetInitRoutePath="widget-product-photo-grid",options={},query="",id=widgetName,timer,widgetNumber,additionalOptions,widgetClassSelector=null,isPreviewMode=!1,currentPage=1,totalPages=2,havePages=!0,maxPages=0,loading=!1,initReady=!1,numReviewsPage=12,that=this;var init=function(){var element=document.querySelector(`.${widgetInitClassName}:not(.stjr-init)`);if(!element)return;widgetNumber=STJRV2.getNextWidgetNumber();var url=`${STJRV2.subBaseToCDN()}/${widgetInitRoutePath}/fragrancex.com/${widgetNumber}`;(attrOptions=STJRV2.getAttrObj(element)),(otherOptions=STJRV2.getConfig());id="stjr-widget"+widgetNumber;options=Object.assign({},otherOptions,attrOptions);isPreviewMode=typeof options.test!="undefined"?options.test:!1;element.classList.add("stjr-init","stjr-callback-"+widgetNumber,widgetName+"-"+widgetNumber);widgetClassSelector="."+widgetName+"-"+widgetNumber;query=STJRV2.getQueryString(Object.assign({},options),null);var initErrorCallback=options.test?()=>{STJRV2.renderNoProductsMessage(widgetClassSelector)}:null;STJRV2.ReviewsWidget["receiveCallback_"+widgetNumber]=function(resp){STJRV2.setResponse("response"+resp.callback,resp)};STJRV2.setResponse("response"+widgetNumber,null);STJRV2.jsonP(url+"?"+query,widgetNumber,function(script){render(widgetNumber)},initErrorCallback);clearInterval(timer)};var render=function(){var sj_responses=STJRV2.getResponse("response"+widgetNumber);if(!STJRV2.hasLoadedStyleSheet()||!sj_responses){window.setTimeout(render.bind(this,widgetNumber),500);return}
if(sj_responses.loaded)return;sj_responses.loaded=!0;STJRV2.setResponse("response"+widgetNumber,sj_responses);var element=document.querySelector(widgetClassSelector);if(!element){return}
element.innerHTML=sj_responses.html;var pageList=document.querySelector(widgetClassSelector+" .js-stjr-container");if(!pageList)return;update();window.removeEventListener("resize",update);window.addEventListener("resize",update);loadReviews()};var loadReviews=function(page){loading=!0;var loader=document.querySelector(widgetClassSelector+" .stjr-product-photo-grid-widget .js-stjr-product-photo-grid-widget-container__content-loader");if(!loader){return}
if(loader)loader.style.display="flex";STJRV2.ReviewsWidget["productPhotoGridCallback_"+currentPage]=function(resp){STJRV2.setResponse("productPhotoGridCallback_"+currentPage,resp);setTimeout(()=>{renderReviews();document.querySelector(widgetClassSelector+" .stjr-product-photo-grid-widget .js-stjr-product-photo-grid-widget-container__content-loader").style.display="none"},500)};var query=STJRV2.getQueryString(Object.assign({},options),null);var url=STJRV2.subBaseToCDN()+"/widget-product-photo-grid-rows/fragrancex.com/"+currentPage+"?"+query;STJRV2.jsonP(url,function(script){scriptElement=script})};var renderReviews=function(resp){loading=!1;var sj_responses=STJRV2.getResponse("productPhotoGridCallback_"+currentPage);if(typeof sj_responses!="object")return;if(sj_responses.no_reviews||sj_responses.html===""){havePages=!1;if(currentPage==1){var reviewList=document.querySelector(widgetClassSelector+" .js-stjr-product-photo-grid-widget-container__rows");reviewList.innerHTML=`<p class="stjr-util-para--empty" style=" padding: 20px 0; ">No photos available</p>`}
return}
if(sj_responses.totalPages){totalPages=sj_responses.totalPages}
var reviewList=document.querySelector(widgetClassSelector+" .js-stjr-product-photo-grid-widget-container__rows");if(reviewList!=undefined){reviewList.innerHTML=reviewList.innerHTML+sj_responses.html;currentPage++;var photosContainers=document.querySelectorAll(widgetClassSelector+" .js-stjr--product-photo-grid-widget-container__rows__row__thumb__img");photosContainers.forEach((el)=>{el.removeEventListener("click",openWindow);el.addEventListener("click",openWindow)});STJRV2.markVoted(Array.from(document.querySelectorAll(widgetClassSelector+" .stjr-review-helpful")))}
if(!initReady){initReady=!0;window.addEventListener("scroll",reachedEnd.bind(that),!1)}};var reachedEnd=function(e){e.preventDefault();e.stopPropagation();var parent=document.querySelector("html");var lastRow=document.querySelector(widgetClassSelector+" .js-stjr-product-photo-grid-widget-container__rows .js-stjr-product-photo-grid-widget-container__rows__row:last-child");if(parent.scrollTop>lastRow.offsetTop+lastRow.offsetHeight/2){if(currentPage>totalPages){havePages=!1}
if(!loading&&havePages){loadReviews()}
if(!havePages){}}
return!1};var update=function(e){var widgetContainer=document.querySelector(widgetClassSelector+" .js-stjr-container");if(widgetContainer&&widgetContainer.offsetWidth<768){widgetContainer.classList.add("stjr-widget--mobile")}else if(widgetContainer){widgetContainer.classList.remove("stjr-widget--mobile")}};var openWindow=function(ev){ev.preventDefault();ev.stopPropagation();var thisEl=ev.target;var parent=thisEl;if(!parent.classList.contains("js-stjr--product-photo-grid-widget-container__rows__row__thumb__img")){parent=thisEl.closest(".js-stjr--product-photo-grid-widget-container__rows__row__thumb__img")}
var reviewId=parent.getAttribute("data-review-id");var productReviewId=parent.getAttribute("data-product-review-id");var productId=parent.getAttribute("data-product-id");STJRV2.ReviewWindowWidget.set({id:"reviewWindowWidget",url:options.url,test:options.test,review_id:reviewId,product_review_id:productReviewId,product_id:productId})};timer=setInterval(init,1000);return{reset:function(element){element.innerHTML="";element.classList.remove("stjr-init");const regex=new RegExp(/stjr-callback-\d/,"g");if(element.className.match(regex))element.className=element.className.replace(regex,"");timer=setInterval(init,1000)},}})();STJRV2.VideoReviewGrid=(function(){var that,widgetInitClassName="stjr-video-review-grid",widgetName="VideoReviewGrid",widgetInitRoutePath="widget-video-review-grid",options={},query="",id=widgetName,timer,widgetNumber,widgetClassSelector=null,isPreviewMode=!1,page=1,optionsLength=100,optionsMinTrail=20,optionsEllipsisText="... ",optionsMoreText="read more",optionsLessText="less";that=this;var init=function(){var element=document.querySelector(`.${widgetInitClassName}:not(.stjr-init)`);if(!element)return;widgetNumber=STJRV2.getNextWidgetNumber();var url=`${STJRV2.subBaseToCDN()}/${widgetInitRoutePath}/fragrancex.com/${widgetNumber}`;(attrOptions=STJRV2.getAttrObj(element)),(otherOptions=STJRV2.getConfig());id="stjr-widget"+widgetNumber;options=Object.assign({},otherOptions,attrOptions);isPreviewMode=typeof options.test!="undefined"?options.test:!1;element.classList.add("stjr-init","stjr-callback-"+widgetNumber,widgetName+"-"+widgetNumber);widgetClassSelector="."+widgetName+"-"+widgetNumber;query=STJRV2.getQueryString(Object.assign({},options),null);var initErrorCallback=null;STJRV2.ReviewsWidget["receiveCallback_"+widgetNumber]=function(resp){STJRV2.setResponse("response"+resp.callback,resp)};STJRV2.setResponse("response"+widgetNumber,null);STJRV2.jsonP(url+"?"+query,widgetNumber,function(script){render(widgetNumber)},initErrorCallback);clearInterval(timer)};var render=function(){var sj_responses=STJRV2.getResponse("response"+widgetNumber);if(!STJRV2.hasLoadedStyleSheet()||!sj_responses){window.setTimeout(render.bind(this,widgetNumber),500);return}
if(sj_responses.loaded)return;sj_responses.loaded=!0;STJRV2.setResponse("response"+widgetNumber,sj_responses);var element=document.querySelector(widgetClassSelector);if(!element){return}
element.innerHTML=sj_responses.html;loadReviews(1)};var loadReviews=function(page){STJRV2.ReviewsWidget["videoReviewGridListCallback_"+page]=function(resp){STJRV2.setResponse("videoReviewGrid"+page,resp);renderReviews();var reviewContainer=document.querySelector(widgetClassSelector+" .stjr-video-review-grid-widget");if(page!==1){SJTRUtils.scrollToElement(reviewContainer)}};var url=STJRV2.subBaseToCDN()+"/widget-video-review-grid-list/fragrancex.com/"+page;STJRV2.jsonP(url+"?"+query,page,function(script){})};var renderReviews=function(){var sj_responses=STJRV2.getResponse("videoReviewGrid"+page);if(typeof sj_responses!="object")return;var reviewList=document.querySelector(widgetClassSelector+" .stjr-video-review-grid-widget-list-container");if(reviewList!=undefined){document.querySelector(widgetClassSelector+"  .js-stjr-video-review-grid-widget__loading").classList.remove("active");reviewList.innerHTML=sj_responses.html;var contentPara=document.querySelectorAll(widgetClassSelector+" .stjr-video-review-grid-widget-container__reviews__review__content-container__text");var ytPlayBtns=document.querySelectorAll(widgetClassSelector+" .js-stjr-video-review-grid-widget-container__reviews__review__video-container .js-stjr-video-review-grid-widget-container__reviews__review__video-container__click-overlay");for(var content of contentPara){truncateText(content)}
for(var ytPlayBtn of ytPlayBtns){ytPlayBtn.addEventListener("click",playVideoYouTubeVideo)}
var links=document.querySelectorAll(widgetClassSelector+" .stjr-review-page-pagination__link");for(var i=0;i<links.length;i++){links[i].addEventListener("click",pageClick)}}};var playVideoYouTubeVideo=function(ev){pauseAllActiveYouTubeVideos();var thisEl=ev.target;var parent=thisEl.closest(".js-stjr-video-review-grid-widget-container__reviews__review__video-container");var iframe=parent.querySelector("iframe");iframe.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"*");parent.classList.add("active")};var pauseAllActiveYouTubeVideos=function(){var iframeContainers=document.querySelectorAll(widgetClassSelector+" .js-stjr-video-review-grid-widget-container__reviews__review__video-container.active");for(var iframeContainer of iframeContainers){iframeContainer.classList.remove("active");iframeContainer.querySelector("iframe").contentWindow.postMessage(JSON.stringify({event:"command",func:"pauseVideo"}),"*")}};var pageClick=function(e){var o=e.currentTarget;if(o.tagName=="SPAN")o=o.querySelector("a");if(o&&o.href){var matches=o.href.match(/page=(\d+)/);page=matches?parseInt(matches[1]):null}
if(!page||isNaN(page))page=1;var body=document.querySelector("body");document.querySelector(widgetClassSelector+"  .js-stjr-video-review-grid-widget__loading").classList.add("active");loadReviews(page);e.preventDefault();return!1};var truncateText=function(element){var body=element.innerHTML;if(body.length>optionsLength+optionsMinTrail){var splitLocation=body.indexOf(" ",optionsLength);if(splitLocation!=-1){var splitLocation=body.indexOf(" ",optionsLength);var start=0;do{var openTag=body.indexOf("<",start);var closeTag=body.indexOf(">",start+1);if(openTag==-1||closeTag==-1||openTag>splitLocation)break;if(closeTag<splitLocation){start=closeTag+1;continue}
splitLocation=openTag-1;break}while(!0);var str1=body.substring(0,splitLocation);var str2=body.substring(splitLocation,body.length);element.innerHTML=str1+'<span class="stjr-reviews-truncate_ellipsis">'+optionsEllipsisText+"</span>"+'<span class="stjr-reviews-truncate_more" style="display:none;">'+str2+"</span>"+'<a class="stjr-reviews-truncate_more_link">'+optionsMoreText+"</a>";var moreLink=element.querySelector(".stjr-reviews-truncate_more_link");moreLink.addEventListener("click",truncateMoreClick)}}};var truncateMoreClick=function(e){var moreLink=e.target;var parentEl=moreLink.parentElement.parentElement;var moreContent=parentEl.querySelector(".stjr-reviews-truncate_more");var ellipsis=parentEl.querySelector(".stjr-reviews-truncate_ellipsis");var el=document.createElement("div");el.innerHTML=optionsMoreText;moreContent.style.display="inline";moreLink.innerHTML="";ellipsis.style.display="none";var el=e.target;var parent=el.closest(".js-stjr-product-review-carousel-review__content-overflow-control");var content=parent.querySelector(".js-stjr-product-review-carousel-review__content");var hDiff=content.offsetHeight-90;var $pagesContainer=document.querySelector(widgetClassSelector+" .js-stjr-product-review-carousel-pages-container");if(parseInt($pagesContainer.style.minHeight)<parseInt($pagesContainer.dataset.initHeight)+hDiff)$pagesContainer.style.minHeight=parseInt($pagesContainer.dataset.initHeight)+hDiff+"px";return!1};timer=setInterval(init,1000);return{reset:function(element){element.innerHTML="";element.classList.remove("stjr-init");const regex=new RegExp(/stjr-callback-\d/,"g");if(element.className.match(regex))element.className=element.className.replace(regex,"");timer=setInterval(init,1000)},}})()